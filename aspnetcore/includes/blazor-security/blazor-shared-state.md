<span data-ttu-id="62657-101">Blazor 伺服器應用程式存留在伺服器記憶體中。</span><span class="sxs-lookup"><span data-stu-id="62657-101">Blazor server apps live in server memory.</span></span> <span data-ttu-id="62657-102">這表示在相同的進程內有多個應用程式託管。</span><span class="sxs-lookup"><span data-stu-id="62657-102">That means that there are multiple apps hosted within the same process.</span></span> <span data-ttu-id="62657-103">針對每個應用程式會話，Blazor 會使用自己的 DI 容器範圍來啟動一個線路。</span><span class="sxs-lookup"><span data-stu-id="62657-103">For each app session, Blazor starts a circuit with its own DI container scope.</span></span> <span data-ttu-id="62657-104">這表示範圍服務在每個 Blazor 會話中都是唯一的。</span><span class="sxs-lookup"><span data-stu-id="62657-104">That means that scoped services are unique per Blazor session.</span></span>

> [!WARNING]
> <span data-ttu-id="62657-105">我們不建議使用單一服務的相同伺服器共用狀態上的應用程式，因為這可能會造成安全性弱點，例如線上路之間洩漏使用者狀態。</span><span class="sxs-lookup"><span data-stu-id="62657-105">We don't recommend apps on the same server share state using singleton services unless extreme care is taken, as this can introduce security vulnerabilities, such as leaking user state across circuits.</span></span>

<span data-ttu-id="62657-106">您可以在 Blazor apps 中使用具狀態的單一服務（如果已特別為它設計）。</span><span class="sxs-lookup"><span data-stu-id="62657-106">You can use stateful singleton services in Blazor apps if they are specifically designed for it.</span></span> <span data-ttu-id="62657-107">例如，您可以將記憶體快取當做 singleton 使用，因為它需要金鑰來存取指定的專案，前提是使用者無法控制所使用的快取索引鍵。</span><span class="sxs-lookup"><span data-stu-id="62657-107">For example, it's ok to use a memory cache as a singleton because it requires a key to access a given entry, assuming users don't have control of what cache keys are used.</span></span>

<span data-ttu-id="62657-108">**此外，基於安全性理由，您不能 <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> 在 Blazor apps 中使用。**</span><span class="sxs-lookup"><span data-stu-id="62657-108">**Additionally, again for security reasons, you must not use <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> within Blazor apps.**</span></span> <span data-ttu-id="62657-109">Blazor 應用程式會在 ASP.NET Core 管線的內容外部執行。</span><span class="sxs-lookup"><span data-stu-id="62657-109">Blazor apps run outside of the context of the ASP.NET Core pipeline.</span></span> <span data-ttu-id="62657-110"><xref:Microsoft.AspNetCore.Http.HttpContext>不保證可在中使用 <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> ，也不保證會保留啟動 Blazor 應用程式的內容。</span><span class="sxs-lookup"><span data-stu-id="62657-110">The <xref:Microsoft.AspNetCore.Http.HttpContext> isn't guaranteed to be available within the <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor>, nor is it guaranteed to be holding the context that started the Blazor app.</span></span>

<span data-ttu-id="62657-111">將要求狀態傳遞至 Blazor 應用程式的建議方式是在應用程式的初始轉譯中，透過根元件的參數來進行：</span><span class="sxs-lookup"><span data-stu-id="62657-111">The recommended way to pass request state to the Blazor app is through parameters to the root component in the initial rendering of the app:</span></span>

* <span data-ttu-id="62657-112">定義一個類別，其中包含您要傳遞至 Blazor 應用程式的所有資料。</span><span class="sxs-lookup"><span data-stu-id="62657-112">Define a class with all the data you want to pass to the Blazor app.</span></span>
* <span data-ttu-id="62657-113">使用當時可用的來填入 Razor 頁面中的資料 <xref:Microsoft.AspNetCore.Http.HttpContext> 。</span><span class="sxs-lookup"><span data-stu-id="62657-113">Populate that data from the Razor page using the <xref:Microsoft.AspNetCore.Http.HttpContext> available at that time.</span></span>
* <span data-ttu-id="62657-114">將資料傳遞至 Blazor 應用程式，做為根元件（應用程式）的參數。</span><span class="sxs-lookup"><span data-stu-id="62657-114">Pass the data to the Blazor app as a parameter to the root component (App).</span></span>
* <span data-ttu-id="62657-115">在根元件中定義參數，以保存要傳遞至應用程式的資料。</span><span class="sxs-lookup"><span data-stu-id="62657-115">Define a parameter in the root component to hold the data being passed to the app.</span></span>
* <span data-ttu-id="62657-116">在應用程式中使用使用者特定的資料;或者，將該資料複製到內的範圍服務， <xref:Microsoft.AspNetCore.Components.ComponentBase.OnInitializedAsync%2A> 使其可跨應用程式使用。</span><span class="sxs-lookup"><span data-stu-id="62657-116">Use the user-specific data within the app; or alternatively, copy that data into a scoped service within <xref:Microsoft.AspNetCore.Components.ComponentBase.OnInitializedAsync%2A> so that it can be used across the app.</span></span>

<span data-ttu-id="62657-117">如需詳細資訊和範例程式碼，請參閱 <xref:blazor/security/server/additional-scenarios#pass-tokens-to-a-blazor-server-app>。</span><span class="sxs-lookup"><span data-stu-id="62657-117">For more information and example code, see <xref:blazor/security/server/additional-scenarios#pass-tokens-to-a-blazor-server-app>.</span></span>
