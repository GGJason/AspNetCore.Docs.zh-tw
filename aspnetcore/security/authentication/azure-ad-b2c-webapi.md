---
title: 在 ASP.NET Core 中使用 Azure Active Directory B2C 的 web Api 進行驗證
author: camsoper
description: 探索如何使用 ASP.NET Core Web API 來設定 Azure Active Directory B2C 驗證。 使用 Postman 測試已驗證的 Web API。
ms.author: casoper
ms.date: 12/05/2019
ms.custom: mvc, seodec18
uid: security/authentication/azure-ad-b2c-webapi
ms.openlocfilehash: 0c7e8a1db924bdedf29468bf6b8cc17f03962c6d
ms.sourcegitcommit: c0b72b344dadea835b0e7943c52463f13ab98dd1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/06/2019
ms.locfileid: "74880746"
---
# <a name="authentication-in-web-apis-with-azure-active-directory-b2c-in-aspnet-core"></a><span data-ttu-id="1ae8d-104">在 ASP.NET Core 中使用 Azure Active Directory B2C 的 web Api 進行驗證</span><span class="sxs-lookup"><span data-stu-id="1ae8d-104">Authentication in web APIs with Azure Active Directory B2C in ASP.NET Core</span></span>

<span data-ttu-id="1ae8d-105">作者 [Cam Soper](https://twitter.com/camsoper)</span><span class="sxs-lookup"><span data-stu-id="1ae8d-105">By [Cam Soper](https://twitter.com/camsoper)</span></span>

<span data-ttu-id="1ae8d-106">[Azure Active Directory B2C](/azure/active-directory-b2c/active-directory-b2c-overview) （Azure AD B2C）是適用于 web 和行動應用程式的雲端身分識別管理解決方案。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-106">[Azure Active Directory B2C](/azure/active-directory-b2c/active-directory-b2c-overview) (Azure AD B2C) is a cloud identity management solution for web and mobile apps.</span></span> <span data-ttu-id="1ae8d-107">此服務會針對雲端和內部部署中裝載的應用程式提供驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-107">The service provides authentication for apps hosted in the cloud and on-premises.</span></span> <span data-ttu-id="1ae8d-108">驗證類型包括個別帳戶、社交網路帳戶和同盟企業帳戶。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-108">Authentication types include individual accounts, social network accounts, and federated enterprise accounts.</span></span> <span data-ttu-id="1ae8d-109">Azure AD B2C 也會以最少的設定提供多重要素驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-109">Azure AD B2C also provides multi-factor authentication with minimal configuration.</span></span>

<span data-ttu-id="1ae8d-110">Azure Active Directory （Azure AD）和 Azure AD B2C 是個別的產品供應專案。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-110">Azure Active Directory (Azure AD) and Azure AD B2C are separate product offerings.</span></span> <span data-ttu-id="1ae8d-111">Azure AD 租使用者代表組織，而 Azure AD B2C 租使用者代表要與信賴憑證者應用程式搭配使用的身分識別集合。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-111">An Azure AD tenant represents an organization, while an Azure AD B2C tenant represents a collection of identities to be used with relying party applications.</span></span> <span data-ttu-id="1ae8d-112">若要深入瞭解，請參閱[Azure AD B2C：常見問題（FAQ）](/azure/active-directory-b2c/active-directory-b2c-faqs)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-112">To learn more, see [Azure AD B2C: Frequently asked questions (FAQ)](/azure/active-directory-b2c/active-directory-b2c-faqs).</span></span>

<span data-ttu-id="1ae8d-113">由於 web Api 沒有使用者介面，因此無法將使用者重新導向至安全權杖服務，例如 Azure AD B2C。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-113">Since web APIs have no user interface, they're unable to redirect the user to a secure token service like Azure AD B2C.</span></span> <span data-ttu-id="1ae8d-114">相反地，會將持有人權杖從呼叫應用程式傳遞給 API，這已使用 Azure AD B2C 驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-114">Instead, the API is passed a bearer token from the calling app, which has already authenticated the user with Azure AD B2C.</span></span> <span data-ttu-id="1ae8d-115">然後，API 會驗證權杖，而不會直接進行使用者互動。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-115">The API then validates the token without direct user interaction.</span></span>

<span data-ttu-id="1ae8d-116">在本教學課程中，您將了解如何：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-116">In this tutorial, learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="1ae8d-117">建立 Azure Active Directory B2C 租使用者。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-117">Create an Azure Active Directory B2C tenant.</span></span>
> * <span data-ttu-id="1ae8d-118">在 Azure AD B2C 中註冊 Web API。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-118">Register a Web API in Azure AD B2C.</span></span>
> * <span data-ttu-id="1ae8d-119">使用 Visual Studio 建立 Web API，並將其設定為使用 Azure AD B2C 的租使用者進行驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-119">Use Visual Studio to create a Web API configured to use the Azure AD B2C tenant for authentication.</span></span>
> * <span data-ttu-id="1ae8d-120">設定原則，以控制 Azure AD B2C 租使用者的行為。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-120">Configure policies controlling the behavior of the Azure AD B2C tenant.</span></span>
> * <span data-ttu-id="1ae8d-121">使用 Postman 來模擬 web 應用程式，其中顯示登入對話方塊、抓取權杖，並使用它對 Web API 提出要求。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-121">Use Postman to simulate a web app which presents a login dialog, retrieves a token, and uses it to make a request against the web API.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1ae8d-122">必要條件：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-122">Prerequisites</span></span>

<span data-ttu-id="1ae8d-123">此逐步解說需要下列各項：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-123">The following are required for this walkthrough:</span></span>

* [<span data-ttu-id="1ae8d-124">Microsoft Azure 訂用帳戶</span><span class="sxs-lookup"><span data-stu-id="1ae8d-124">Microsoft Azure subscription</span></span>](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio)
* [<span data-ttu-id="1ae8d-125">Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="1ae8d-125">Visual Studio 2019</span></span>](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019)
* [<span data-ttu-id="1ae8d-126">Postman</span><span class="sxs-lookup"><span data-stu-id="1ae8d-126">Postman</span></span>](https://www.getpostman.com/postman)

## <a name="create-the-azure-active-directory-b2c-tenant"></a><span data-ttu-id="1ae8d-127">建立 Azure Active Directory B2C 租使用者</span><span class="sxs-lookup"><span data-stu-id="1ae8d-127">Create the Azure Active Directory B2C tenant</span></span>

<span data-ttu-id="1ae8d-128">建立 Azure AD B2C 的租使用者，[如檔中所述](/azure/active-directory-b2c/active-directory-b2c-get-started)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-128">Create an Azure AD B2C tenant [as described in the documentation](/azure/active-directory-b2c/active-directory-b2c-get-started).</span></span> <span data-ttu-id="1ae8d-129">出現提示時，在本教學課程中，將租使用者與 Azure 訂用帳戶產生關聯是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-129">When prompted, associating the tenant with an Azure subscription is optional for this tutorial.</span></span>

## <a name="configure-a-sign-up-or-sign-in-policy"></a><span data-ttu-id="1ae8d-130">設定註冊或登入原則</span><span class="sxs-lookup"><span data-stu-id="1ae8d-130">Configure a sign-up or sign-in policy</span></span>

<span data-ttu-id="1ae8d-131">使用 Azure AD B2C 檔中的步驟來[建立註冊或登入原則](/azure/active-directory-b2c/active-directory-b2c-reference-policies#user-flow-versions)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-131">Use the steps in the Azure AD B2C documentation to [create a sign-up or sign-in policy](/azure/active-directory-b2c/active-directory-b2c-reference-policies#user-flow-versions).</span></span> <span data-ttu-id="1ae8d-132">將原則命名為**SiUpIn**。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-132">Name the policy **SiUpIn**.</span></span>  <span data-ttu-id="1ae8d-133">使用適用于身分**識別提供者**、**註冊屬性**和**應用程式宣告**的檔中提供的範例值。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-133">Use the example values provided in the documentation for **Identity providers**, **Sign-up attributes**, and **Application claims**.</span></span> <span data-ttu-id="1ae8d-134">使用 [**立即執行**] 按鈕來測試原則（如檔中所述）是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-134">Using the **Run now** button to test the policy as described in the documentation is optional.</span></span>

## <a name="register-the-api-in-azure-ad-b2c"></a><span data-ttu-id="1ae8d-135">在 Azure AD B2C 中註冊 API</span><span class="sxs-lookup"><span data-stu-id="1ae8d-135">Register the API in Azure AD B2C</span></span>

<span data-ttu-id="1ae8d-136">在新建立的 Azure AD B2C 租使用者中，使用**註冊 Web API**一節下的檔中的[步驟](/azure/active-directory-b2c/tutorial-register-applications#register-a-web-application)來註冊您的 API。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-136">In the newly created Azure AD B2C tenant, register your API using [the steps in the documentation](/azure/active-directory-b2c/tutorial-register-applications#register-a-web-application) under the **Register a web API** section.</span></span>

<span data-ttu-id="1ae8d-137">使用下列值：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-137">Use the following values:</span></span>

| <span data-ttu-id="1ae8d-138">設定</span><span class="sxs-lookup"><span data-stu-id="1ae8d-138">Setting</span></span>                       | <span data-ttu-id="1ae8d-139">{2&gt;值&lt;2}</span><span class="sxs-lookup"><span data-stu-id="1ae8d-139">Value</span></span>               | <span data-ttu-id="1ae8d-140">備註</span><span class="sxs-lookup"><span data-stu-id="1ae8d-140">Notes</span></span>                                                                                  |
|-------------------------------|---------------------|----------------------------------------------------------------------------------------|
| <span data-ttu-id="1ae8d-141">**名稱**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-141">**Name**</span></span>                      | <span data-ttu-id="1ae8d-142">*{API 名稱}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-142">*{API name}*</span></span>        | <span data-ttu-id="1ae8d-143">輸入應用程式的**名稱**，以向取用者描述您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-143">Enter a **Name** for the app that describes your app to consumers.</span></span>                     |
| <span data-ttu-id="1ae8d-144">**包含 Web 應用程式 / Web API**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-144">**Include web app / web API**</span></span> | <span data-ttu-id="1ae8d-145">是</span><span class="sxs-lookup"><span data-stu-id="1ae8d-145">Yes</span></span>                 |                                                                                        |
| <span data-ttu-id="1ae8d-146">**允許隱含流程**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-146">**Allow implicit flow**</span></span>       | <span data-ttu-id="1ae8d-147">是</span><span class="sxs-lookup"><span data-stu-id="1ae8d-147">Yes</span></span>                 |                                                                                        |
| <span data-ttu-id="1ae8d-148">**回覆 URL**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-148">**Reply URL**</span></span>                 | `https://localhost` | <span data-ttu-id="1ae8d-149">回覆 URL 是 Azure AD B2C 傳回您應用程式要求之任何權杖的所在端點。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-149">Reply URLs are endpoints where Azure AD B2C returns any tokens that your app requests.</span></span> |
| <span data-ttu-id="1ae8d-150">**應用程式識別碼 URI**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-150">**App ID URI**</span></span>                | <span data-ttu-id="1ae8d-151">*api*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-151">*api*</span></span>               | <span data-ttu-id="1ae8d-152">URI 不需要解析為實體位址。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-152">The URI doesn't need to resolve to a physical address.</span></span> <span data-ttu-id="1ae8d-153">它只需要是唯一的。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-153">It only needs to be unique.</span></span>     |
| <span data-ttu-id="1ae8d-154">**包含原生用戶端**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-154">**Include native client**</span></span>     | <span data-ttu-id="1ae8d-155">否</span><span class="sxs-lookup"><span data-stu-id="1ae8d-155">No</span></span>                  |                                                                                        |

<span data-ttu-id="1ae8d-156">註冊 API 之後，就會顯示租使用者中的應用程式和 Api 清單。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-156">After the API is registered, the list of apps and APIs in the tenant is displayed.</span></span> <span data-ttu-id="1ae8d-157">選取先前註冊的 API。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-157">Select the API that was previously registered.</span></span> <span data-ttu-id="1ae8d-158">選取 [**應用程式識別碼**] 欄位右邊的**複製**圖示，將它複製到剪貼簿。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-158">Select the **Copy** icon to the right of the **Application ID** field to copy it to the clipboard.</span></span> <span data-ttu-id="1ae8d-159">選取 [**已發佈的範圍**]，並確認預設的*user_impersonation*範圍是否存在。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-159">Select **Published scopes** and verify the default *user_impersonation* scope is present.</span></span>

## <a name="create-an-aspnet-core-app-in-visual-studio"></a><span data-ttu-id="1ae8d-160">在 Visual Studio 中建立 ASP.NET Core 應用程式</span><span class="sxs-lookup"><span data-stu-id="1ae8d-160">Create an ASP.NET Core app in Visual Studio</span></span>

<span data-ttu-id="1ae8d-161">Visual Studio Web 應用程式範本可以設定為使用 Azure AD B2C 租使用者進行驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-161">The Visual Studio Web Application template can be configured to use the Azure AD B2C tenant for authentication.</span></span>

<span data-ttu-id="1ae8d-162">在 Visual Studio 中：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-162">In Visual Studio:</span></span>

1. <span data-ttu-id="1ae8d-163">建立新的 ASP.NET Core Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-163">Create a new ASP.NET Core Web Application.</span></span> 
2. <span data-ttu-id="1ae8d-164">從範本清單中選取 [ **WEB API** ]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-164">Select **Web API** from the list of templates.</span></span>
3. <span data-ttu-id="1ae8d-165">選取 [**變更驗證**] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-165">Select the **Change Authentication** button.</span></span>

    ![[變更驗證] 按鈕](./azure-ad-b2c-webapi/change-auth-button.png)

4. <span data-ttu-id="1ae8d-167">在 [**變更驗證**] 對話方塊中，選取 [**個別使用者帳戶**]， > 連線**到雲端中現有的使用者存放區**。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-167">In the **Change Authentication** dialog, select **Individual User Accounts** > **Connect to an existing user store in the cloud**.</span></span>

    ![[變更驗證] 對話方塊](./azure-ad-b2c-webapi/change-auth-dialog.png)

5. <span data-ttu-id="1ae8d-169">使用下列值來完成表單：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-169">Complete the form with the following values:</span></span>

    | <span data-ttu-id="1ae8d-170">設定</span><span class="sxs-lookup"><span data-stu-id="1ae8d-170">Setting</span></span>                       | <span data-ttu-id="1ae8d-171">{2&gt;值&lt;2}</span><span class="sxs-lookup"><span data-stu-id="1ae8d-171">Value</span></span>                                                 |
    |-------------------------------|-------------------------------------------------------|
    | <span data-ttu-id="1ae8d-172">**網域名稱**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-172">**Domain Name**</span></span>               | <span data-ttu-id="1ae8d-173">*{B2C 租使用者的功能變數名稱}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-173">*{the domain name of your B2C tenant}*</span></span>                |
    | <span data-ttu-id="1ae8d-174">**應用程式識別碼**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-174">**Application ID**</span></span>            | <span data-ttu-id="1ae8d-175">*{貼上剪貼簿中的應用程式識別碼}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-175">*{paste the Application ID from the clipboard}*</span></span>       |
    | <span data-ttu-id="1ae8d-176">**註冊或登入原則**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-176">**Sign-up or sign-in policy**</span></span> | <span data-ttu-id="1ae8d-177">B2C_1_SiUpIn</span><span class="sxs-lookup"><span data-stu-id="1ae8d-177">B2C_1_SiUpIn</span></span>                                          |

    <span data-ttu-id="1ae8d-178">選取 **[確定]** 以關閉 [**變更驗證**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-178">Select **OK** to close the **Change Authentication** dialog.</span></span> <span data-ttu-id="1ae8d-179">選取 **[確定]** 以建立 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-179">Select **OK** to create the web app.</span></span>

<span data-ttu-id="1ae8d-180">Visual Studio 會使用名為*ValuesController.cs*的控制器來建立 Web API，以傳回 GET 要求的硬式編碼值。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-180">Visual Studio creates the web API with a controller named *ValuesController.cs* that returns hard-coded values for GET requests.</span></span> <span data-ttu-id="1ae8d-181">類別會以[授權](xref:security/authorization/simple)屬性標示，因此所有要求都需要驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-181">The class is marked with the [Authorize](xref:security/authorization/simple) attribute, so all requests require authentication.</span></span>

## <a name="run-the-web-api"></a><span data-ttu-id="1ae8d-182">執行 Web API</span><span class="sxs-lookup"><span data-stu-id="1ae8d-182">Run the web API</span></span>

<span data-ttu-id="1ae8d-183">在 Visual Studio 中，執行 API。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-183">In Visual Studio, run the API.</span></span> <span data-ttu-id="1ae8d-184">Visual Studio 會啟動指向 API 根 URL 的瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-184">Visual Studio launches a browser pointed at the API's root URL.</span></span> <span data-ttu-id="1ae8d-185">記下網址列中的 URL，並將 API 保留在背景中執行。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-185">Note the URL in the address bar, and leave the API running in the background.</span></span>

> [!NOTE]
> <span data-ttu-id="1ae8d-186">由於根 URL 沒有定義的控制器，因此瀏覽器可能會顯示404（找不到頁面）錯誤。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-186">Since there is no controller defined for the root URL, the browser may display a 404 (page not found) error.</span></span> <span data-ttu-id="1ae8d-187">這是正常的現象。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-187">This is expected behavior.</span></span>

## <a name="use-postman-to-get-a-token-and-test-the-api"></a><span data-ttu-id="1ae8d-188">使用 Postman 取得權杖並測試 API</span><span class="sxs-lookup"><span data-stu-id="1ae8d-188">Use Postman to get a token and test the API</span></span>

<span data-ttu-id="1ae8d-189">[Postman](https://getpostman.com/postman)是用來測試 web api 的工具。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-189">[Postman](https://getpostman.com/postman) is a tool for testing web APIs.</span></span> <span data-ttu-id="1ae8d-190">在本教學課程中，Postman 會模擬代表使用者存取 Web API 的 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-190">For this tutorial, Postman simulates a web app that accesses the web API on the user's behalf.</span></span>

### <a name="register-postman-as-a-web-app"></a><span data-ttu-id="1ae8d-191">將 Postman 註冊為 web 應用程式</span><span class="sxs-lookup"><span data-stu-id="1ae8d-191">Register Postman as a web app</span></span>

<span data-ttu-id="1ae8d-192">由於 Postman 會模擬可從 Azure AD B2C 租使用者取得權杖的 web 應用程式，因此它必須在租使用者中註冊為 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-192">Since Postman simulates a web app that obtains tokens from the Azure AD B2C tenant, it must be registered in the tenant as a web app.</span></span> <span data-ttu-id="1ae8d-193">使用**註冊 web 應用程式**一節底下[檔中的步驟](/azure/active-directory-b2c/tutorial-register-applications#register-a-web-application)來註冊 Postman。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-193">Register Postman using [the steps in the documentation](/azure/active-directory-b2c/tutorial-register-applications#register-a-web-application) under the **Register a web app** section.</span></span> <span data-ttu-id="1ae8d-194">停止**建立 web 應用程式用戶端密碼**一節。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-194">Stop at the **Create a web app client secret** section.</span></span> <span data-ttu-id="1ae8d-195">本教學課程不需要用戶端密碼。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-195">A client secret isn't required for this tutorial.</span></span> 

<span data-ttu-id="1ae8d-196">使用下列值：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-196">Use the following values:</span></span>

| <span data-ttu-id="1ae8d-197">設定</span><span class="sxs-lookup"><span data-stu-id="1ae8d-197">Setting</span></span>                       | <span data-ttu-id="1ae8d-198">{2&gt;值&lt;2}</span><span class="sxs-lookup"><span data-stu-id="1ae8d-198">Value</span></span>                            | <span data-ttu-id="1ae8d-199">備註</span><span class="sxs-lookup"><span data-stu-id="1ae8d-199">Notes</span></span>                           |
|-------------------------------|----------------------------------|---------------------------------|
| <span data-ttu-id="1ae8d-200">**名稱**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-200">**Name**</span></span>                      | <span data-ttu-id="1ae8d-201">Postman</span><span class="sxs-lookup"><span data-stu-id="1ae8d-201">Postman</span></span>                          |                                 |
| <span data-ttu-id="1ae8d-202">**包含 Web 應用程式 / Web API**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-202">**Include web app / web API**</span></span> | <span data-ttu-id="1ae8d-203">是</span><span class="sxs-lookup"><span data-stu-id="1ae8d-203">Yes</span></span>                              |                                 |
| <span data-ttu-id="1ae8d-204">**允許隱含流程**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-204">**Allow implicit flow**</span></span>       | <span data-ttu-id="1ae8d-205">是</span><span class="sxs-lookup"><span data-stu-id="1ae8d-205">Yes</span></span>                              |                                 |
| <span data-ttu-id="1ae8d-206">**回覆 URL**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-206">**Reply URL**</span></span>                 | `https://getpostman.com/postman` |                                 |
| <span data-ttu-id="1ae8d-207">**應用程式識別碼 URI**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-207">**App ID URI**</span></span>                | <span data-ttu-id="1ae8d-208">*{保留空白}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-208">*{leave blank}*</span></span>                  | <span data-ttu-id="1ae8d-209">本教學課程不需要。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-209">Not required for this tutorial.</span></span> |
| <span data-ttu-id="1ae8d-210">**包含原生用戶端**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-210">**Include native client**</span></span>     | <span data-ttu-id="1ae8d-211">否</span><span class="sxs-lookup"><span data-stu-id="1ae8d-211">No</span></span>                               |                                 |

<span data-ttu-id="1ae8d-212">新註冊的 web 應用程式需要代表使用者存取 Web API 的許可權。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-212">The newly registered web app needs permission to access the web API on the user's behalf.</span></span>  

1. <span data-ttu-id="1ae8d-213">選取應用程式清單中的 [ **Postman** ]，然後從左側功能表中選取 [ **API 存取**]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-213">Select **Postman** in the list of apps and then select **API access** from the menu on the left.</span></span>
1. <span data-ttu-id="1ae8d-214">選取 [+ 新增]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-214">Select **+ Add**.</span></span>
1. <span data-ttu-id="1ae8d-215">在 [**選取 API** ] 下拉式清單中，選取 Web API 的名稱。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-215">In the **Select API** dropdown, select the name of the web API.</span></span>
1. <span data-ttu-id="1ae8d-216">在 [**選取範圍**] 下拉式清單中，確定已選取 [所有範圍]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-216">In the **Select Scopes** dropdown, ensure all scopes are selected.</span></span>
1. <span data-ttu-id="1ae8d-217">選取 [確定]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-217">Select **Ok**.</span></span>

<span data-ttu-id="1ae8d-218">請記下 Postman 應用程式的應用程式識別碼，因為需要取得持有人權杖。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-218">Note the Postman app's Application ID, as it's required to obtain a bearer token.</span></span>

### <a name="create-a-postman-request"></a><span data-ttu-id="1ae8d-219">建立 Postman 要求</span><span class="sxs-lookup"><span data-stu-id="1ae8d-219">Create a Postman request</span></span>

<span data-ttu-id="1ae8d-220">啟動 Postman。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-220">Launch Postman.</span></span> <span data-ttu-id="1ae8d-221">根據預設，Postman 會在啟動時顯示 [**建立新**的] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-221">By default, Postman displays the **Create New** dialog upon launching.</span></span> <span data-ttu-id="1ae8d-222">如果未顯示對話方塊，請選取左上方的 [ **+ 新增**] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-222">If the dialog isn't displayed, select the **+ New** button in the upper left.</span></span>

<span data-ttu-id="1ae8d-223">從 [**建立新**的] 對話方塊：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-223">From the **Create New** dialog:</span></span>

1. <span data-ttu-id="1ae8d-224">選取 [要求]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-224">Select **Request**.</span></span>

    ![要求按鈕](./azure-ad-b2c-webapi/postman-create-new.png)

2. <span data-ttu-id="1ae8d-226">在 [**要求名稱**] 方塊中輸入*取得值*。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-226">Enter *Get Values* in the **Request name** box.</span></span>
3. <span data-ttu-id="1ae8d-227">選取 [ **+ 建立集合**] 以建立新的集合來儲存要求。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-227">Select **+ Create Collection** to create a new collection for storing the request.</span></span> <span data-ttu-id="1ae8d-228">將集合命名為*ASP.NET Core 教學*課程，然後選取核取記號。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-228">Name the collection *ASP.NET Core tutorials* and then select the checkmark.</span></span>

    ![建立新的收藏](./azure-ad-b2c-webapi/postman-create-collection.png)

4. <span data-ttu-id="1ae8d-230">選取 [**儲存至 ASP.NET Core 教學**課程] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-230">Select the **Save to ASP.NET Core tutorials** button.</span></span>

### <a name="test-the-web-api-without-authentication"></a><span data-ttu-id="1ae8d-231">在沒有驗證的情況下測試 Web API</span><span class="sxs-lookup"><span data-stu-id="1ae8d-231">Test the web API without authentication</span></span>

<span data-ttu-id="1ae8d-232">若要確認 Web API 需要驗證，請先提出要求而不進行驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-232">To verify that the web API requires authentication, first make a request without authentication.</span></span>

1. <span data-ttu-id="1ae8d-233">在 [**輸入要求 url** ] 方塊中，輸入 `ValuesController`的 URL。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-233">In the **Enter request URL** box, enter the URL for `ValuesController`.</span></span> <span data-ttu-id="1ae8d-234">URL 與在瀏覽器中以附加**api/值**顯示的相同。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-234">The URL is the same as displayed in the browser with **api/values** appended.</span></span> <span data-ttu-id="1ae8d-235">例如，`https://localhost:44375/api/values`。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-235">For example, `https://localhost:44375/api/values`.</span></span>
2. <span data-ttu-id="1ae8d-236">選取 [Send] \(傳送\) 按鈕。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-236">Select the **Send** button.</span></span>
3. <span data-ttu-id="1ae8d-237">請注意，回應的狀態是 [ *401 未授權*]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-237">Note the status of the response is *401 Unauthorized*.</span></span>

    ![401未經授權的回應](./azure-ad-b2c-webapi/postman-401-status.png)

> [!IMPORTANT]
> <span data-ttu-id="1ae8d-239">如果您收到「無法取得任何回應」錯誤，您可能需要在[Postman 設定](https://learning.getpostman.com/docs/postman/launching_postman/settings)中停用 SSL 憑證驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-239">If you receive a "Could not get any response" error, you may need to disable SSL certificate verification in the [Postman settings](https://learning.getpostman.com/docs/postman/launching_postman/settings).</span></span>

### <a name="obtain-a-bearer-token"></a><span data-ttu-id="1ae8d-240">取得持有人權杖</span><span class="sxs-lookup"><span data-stu-id="1ae8d-240">Obtain a bearer token</span></span>

<span data-ttu-id="1ae8d-241">若要對 Web API 提出已驗證的要求，則需要持有人權杖。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-241">To make an authenticated request to the web API, a bearer token is required.</span></span> <span data-ttu-id="1ae8d-242">Postman 可讓您輕鬆登入 Azure AD B2C 租使用者並取得權杖。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-242">Postman makes it easy to sign in to the Azure AD B2C tenant and obtain a token.</span></span>

1. <span data-ttu-id="1ae8d-243">在 [**授權**] 索引標籤的 [**類型**] 下拉式清單中，選取 [ **OAuth 2.0**]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-243">On the **Authorization** tab, in the **TYPE** dropdown, select **OAuth 2.0**.</span></span> <span data-ttu-id="1ae8d-244">在 [**將授權資料新增至**] 下拉式清單中，選取 [**要求標頭**]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-244">In the **Add authorization data to** dropdown, select **Request Headers**.</span></span> <span data-ttu-id="1ae8d-245">選取 [取得新存取權杖]。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-245">Select **Get New Access Token**.</span></span>

    ![具有設定的 [授權] 索引標籤](./azure-ad-b2c-webapi/postman-auth-tab.png)

2. <span data-ttu-id="1ae8d-247">完成 [**取得新的存取權杖**] 對話方塊，如下所示：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-247">Complete the **GET NEW ACCESS TOKEN** dialog as follows:</span></span>

   |                <span data-ttu-id="1ae8d-248">設定</span><span class="sxs-lookup"><span data-stu-id="1ae8d-248">Setting</span></span>                 |                                             <span data-ttu-id="1ae8d-249">{2&gt;值&lt;2}</span><span class="sxs-lookup"><span data-stu-id="1ae8d-249">Value</span></span>                                             |                                                                                                                                    <span data-ttu-id="1ae8d-250">備註</span><span class="sxs-lookup"><span data-stu-id="1ae8d-250">Notes</span></span>                                                                                                                                     |
   |----------------------------------------|-----------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |      <span data-ttu-id="1ae8d-251">**權杖名稱**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-251">**Token Name**</span></span>       |                                          <span data-ttu-id="1ae8d-252">*{token 名稱}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-252">*{token name}*</span></span>                                       |                                                                                                                   <span data-ttu-id="1ae8d-253">輸入權杖的描述性名稱。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-253">Enter a descriptive name for the token.</span></span>                                                                                                                    |
   |      <span data-ttu-id="1ae8d-254">**授與類型**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-254">**Grant Type**</span></span>       |                                           <span data-ttu-id="1ae8d-255">隱含</span><span class="sxs-lookup"><span data-stu-id="1ae8d-255">Implicit</span></span>                                            |                                                                                                                                                                                                                                                                              |
   |     <span data-ttu-id="1ae8d-256">**回呼 URL**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-256">**Callback URL**</span></span>      |                                 `https://getpostman.com/postman`                              |                                                                                                                                                                                                                                                                              |
   |       <span data-ttu-id="1ae8d-257">**驗證 URL**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-257">**Auth URL**</span></span>        | `https://login.microsoftonline.com/{tenant domain name}/oauth2/v2.0/authorize?p=B2C_1_SiUpIn` |  <span data-ttu-id="1ae8d-258">以租使用者的功能變數名稱取代 *{租使用者功能變數名稱}* 。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-258">Replace *{tenant domain name}* with the tenant's domain name.</span></span> <span data-ttu-id="1ae8d-259">**重要**事項：此 URL 必須具有與 Web API 的*appsettings*中 `AzureAdB2C.Instance` 中找到的相同功能變數名稱。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-259">**IMPORTANT**: This URL must have the same domain name as what is found in `AzureAdB2C.Instance` in the web API's *appsettings.json* file.</span></span> <span data-ttu-id="1ae8d-260">請參閱附注&dagger;。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-260">See NOTE&dagger;.</span></span>                                                  |
   |       <span data-ttu-id="1ae8d-261">**用戶端識別碼**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-261">**Client ID**</span></span>       |                <span data-ttu-id="1ae8d-262">*{輸入 Postman 應用程式的**應用程式識別碼**}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-262">*{enter the Postman app's **Application ID**}*</span></span>                              |                                                                                                                                                                                                                                                                              |
   |         <span data-ttu-id="1ae8d-263">**範圍**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-263">**Scope**</span></span>         |         `https://{tenant domain name}/{api}/user_impersonation openid offline_access`       | <span data-ttu-id="1ae8d-264">以租使用者的功能變數名稱取代 *{租使用者功能變數名稱}* 。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-264">Replace *{tenant domain name}* with the tenant's domain name.</span></span> <span data-ttu-id="1ae8d-265">以您在第一次註冊 Web API 時提供的應用程式識別碼 URI 取代 *{api}* （在此案例中，`api`）。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-265">Replace *{api}* with the App ID URI you gave the web API when you first registered it (in this case, `api`).</span></span> <span data-ttu-id="1ae8d-266">URL 的模式為： `https://{tenant}.onmicrosoft.com/{api-id-uri}/{scope name}`。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-266">The pattern for the URL is: `https://{tenant}.onmicrosoft.com/{api-id-uri}/{scope name}`.</span></span>         |
   |         <span data-ttu-id="1ae8d-267">**狀態**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-267">**State**</span></span>         |                                      <span data-ttu-id="1ae8d-268">*{保留空白}*</span><span class="sxs-lookup"><span data-stu-id="1ae8d-268">*{leave blank}*</span></span>                                          |                                                                                                                                                                                                                                                                              |
   | <span data-ttu-id="1ae8d-269">**用戶端驗證**</span><span class="sxs-lookup"><span data-stu-id="1ae8d-269">**Client Authentication**</span></span> |                                <span data-ttu-id="1ae8d-270">在主體中傳送用戶端認證</span><span class="sxs-lookup"><span data-stu-id="1ae8d-270">Send client credentials in body</span></span>                                |                                                                                                                                                                                                                                                                              |

    > [!NOTE]
    > <span data-ttu-id="1ae8d-271">&dagger; Azure Active Directory B2C 入口網站中的 [原則設定] 對話方塊會顯示兩個可能的 Url：一個格式為 `https://login.microsoftonline.com/`{租使用者功能變數名稱}/{additional 路徑資訊}，另一個格式 `https://{tenant name}.b2clogin.com/`{租使用者功能變數名稱}/{additional 路徑資訊}。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-271">&dagger; The policy settings dialog in the Azure Active Directory B2C portal displays two possible URLs: One in the format `https://login.microsoftonline.com/`{tenant domain name}/{additional path information}, and the other in the format `https://{tenant name}.b2clogin.com/`{tenant domain name}/{additional path information}.</span></span> <span data-ttu-id="1ae8d-272">請務必**在**Web API 的*appsettings*中的 `AzureAdB2C.Instance` 中找到的網域與 web 應用程式的*appsettings*檔案中所使用的相同。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-272">It's **critical** that the domain found in in `AzureAdB2C.Instance` in the web API's *appsettings.json* file matches the one used in the web app's *appsettings.json* file.</span></span> <span data-ttu-id="1ae8d-273">這是用於 Postman 中 [驗證 URL] 欄位的相同網域。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-273">This is the same domain used for the Auth URL field in Postman.</span></span> <span data-ttu-id="1ae8d-274">請注意，Visual Studio 使用與在入口網站中顯示的 URL 格式稍有不同。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-274">Note that Visual Studio uses a slightly different URL format than what's displayed in the portal.</span></span> <span data-ttu-id="1ae8d-275">只要定義域相符，URL 就可以運作。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-275">As long as the domains match, the URL works.</span></span>

3. <span data-ttu-id="1ae8d-276">選取 [**要求權杖**] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-276">Select the **Request Token** button.</span></span>

4. <span data-ttu-id="1ae8d-277">Postman 會開啟一個新視窗，其中包含 Azure AD B2C 租使用者的登入對話方塊。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-277">Postman opens a new window containing the Azure AD B2C tenant's sign-in dialog.</span></span> <span data-ttu-id="1ae8d-278">使用現有的帳戶登入（如果已建立測試原則），或選取 [**立即註冊**] 來建立新的帳戶。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-278">Sign in with an existing account (if one was created testing the policies) or select **Sign up now** to create a new account.</span></span> <span data-ttu-id="1ae8d-279">[**忘記密碼？** ] 連結是用來重設忘記的密碼。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-279">The **Forgot your password?** link is used to reset a forgotten password.</span></span>

5. <span data-ttu-id="1ae8d-280">成功登入之後，視窗會關閉，並顯示 [**管理存取權杖**] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-280">After successfully signing in, the window closes and the **MANAGE ACCESS TOKENS** dialog appears.</span></span> <span data-ttu-id="1ae8d-281">向下流覽至底部，然後選取 [**使用權杖**] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-281">Scroll down to the bottom and select the **Use Token** button.</span></span>

    ![哪裡可以找到 [使用權杖] 按鈕](./azure-ad-b2c-webapi/postman-access-token.png)

### <a name="test-the-web-api-with-authentication"></a><span data-ttu-id="1ae8d-283">使用驗證測試 Web API</span><span class="sxs-lookup"><span data-stu-id="1ae8d-283">Test the web API with authentication</span></span>

<span data-ttu-id="1ae8d-284">選取 [**傳送**] 按鈕，以再次傳送要求。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-284">Select the **Send** button to send the request again.</span></span> <span data-ttu-id="1ae8d-285">這次，回應狀態為*200 OK* ，而且 JSON 承載會顯示在 [回應**主體**] 索引標籤上。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-285">This time, the response status is *200 OK* and the JSON payload is visible on the response **Body** tab.</span></span>

![承載和成功狀態](./azure-ad-b2c-webapi/postman-success.png)

## <a name="next-steps"></a><span data-ttu-id="1ae8d-287">後續步驟</span><span class="sxs-lookup"><span data-stu-id="1ae8d-287">Next steps</span></span>

<span data-ttu-id="1ae8d-288">在本教學課程中，您將了解如何：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-288">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="1ae8d-289">建立 Azure Active Directory B2C 租使用者。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-289">Create an Azure Active Directory B2C tenant.</span></span>
> * <span data-ttu-id="1ae8d-290">在 Azure AD B2C 中註冊 Web API。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-290">Register a Web API in Azure AD B2C.</span></span>
> * <span data-ttu-id="1ae8d-291">使用 Visual Studio 建立 Web API，並將其設定為使用 Azure AD B2C 的租使用者進行驗證。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-291">Use Visual Studio to create a Web API configured to use the Azure AD B2C tenant for authentication.</span></span>
> * <span data-ttu-id="1ae8d-292">設定原則，以控制 Azure AD B2C 租使用者的行為。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-292">Configure policies controlling the behavior of the Azure AD B2C tenant.</span></span>
> * <span data-ttu-id="1ae8d-293">使用 Postman 來模擬 web 應用程式，其中顯示登入對話方塊、抓取權杖，並使用它對 Web API 提出要求。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-293">Use Postman to simulate a web app which presents a login dialog, retrieves a token, and uses it to make a request against the web API.</span></span>

<span data-ttu-id="1ae8d-294">藉由學習來繼續開發您的 API：</span><span class="sxs-lookup"><span data-stu-id="1ae8d-294">Continue developing your API by learning to:</span></span>

* <span data-ttu-id="1ae8d-295">[使用 Azure AD B2C 保護 ASP.NET Core web 應用程式](xref:security/authentication/azure-ad-b2c)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-295">[Secure an ASP.NET Core web app using Azure AD B2C](xref:security/authentication/azure-ad-b2c).</span></span>
* <span data-ttu-id="1ae8d-296">[使用 Azure AD B2C 從 .net web 應用程式呼叫 .net Web API](/azure/active-directory-b2c/active-directory-b2c-devquickstarts-web-api-dotnet)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-296">[Call a .NET web API from a .NET web app using Azure AD B2C](/azure/active-directory-b2c/active-directory-b2c-devquickstarts-web-api-dotnet).</span></span>
* <span data-ttu-id="1ae8d-297">[自訂 Azure AD B2C 使用者介面](/azure/active-directory-b2c/active-directory-b2c-reference-ui-customization)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-297">[Customize the Azure AD B2C user interface](/azure/active-directory-b2c/active-directory-b2c-reference-ui-customization).</span></span>
* <span data-ttu-id="1ae8d-298">[設定密碼複雜性需求](/azure/active-directory-b2c/active-directory-b2c-reference-password-complexity)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-298">[Configure password complexity requirements](/azure/active-directory-b2c/active-directory-b2c-reference-password-complexity).</span></span>
* <span data-ttu-id="1ae8d-299">[啟用多重要素驗證](/azure/active-directory-b2c/active-directory-b2c-reference-mfa)。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-299">[Enable multi-factor authentication](/azure/active-directory-b2c/active-directory-b2c-reference-mfa).</span></span>
* <span data-ttu-id="1ae8d-300">設定其他身分識別提供者，例如[Microsoft](/azure/active-directory-b2c/active-directory-b2c-setup-msa-app)、 [Facebook](/azure/active-directory-b2c/active-directory-b2c-setup-fb-app)、 [Google](/azure/active-directory-b2c/active-directory-b2c-setup-goog-app)、 [Amazon](/azure/active-directory-b2c/active-directory-b2c-setup-amzn-app)、 [Twitter](/azure/active-directory-b2c/active-directory-b2c-setup-twitter-app)等等。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-300">Configure additional identity providers, such as [Microsoft](/azure/active-directory-b2c/active-directory-b2c-setup-msa-app), [Facebook](/azure/active-directory-b2c/active-directory-b2c-setup-fb-app), [Google](/azure/active-directory-b2c/active-directory-b2c-setup-goog-app), [Amazon](/azure/active-directory-b2c/active-directory-b2c-setup-amzn-app), [Twitter](/azure/active-directory-b2c/active-directory-b2c-setup-twitter-app), and others.</span></span>
* <span data-ttu-id="1ae8d-301">[使用 [Azure AD] 圖形 API](/azure/active-directory-b2c/active-directory-b2c-devquickstarts-graph-dotnet)從 Azure AD B2C 租使用者中取出額外的使用者資訊，例如群組成員資格。</span><span class="sxs-lookup"><span data-stu-id="1ae8d-301">[Use the Azure AD Graph API](/azure/active-directory-b2c/active-directory-b2c-devquickstarts-graph-dotnet) to retrieve additional user information, such as group membership, from the Azure AD B2C tenant.</span></span>
