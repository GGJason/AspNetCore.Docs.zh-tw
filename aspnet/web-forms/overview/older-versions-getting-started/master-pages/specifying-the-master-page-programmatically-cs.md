---
uid: web-forms/overview/older-versions-getting-started/master-pages/specifying-the-master-page-programmatically-cs
title: 以程式設計方式指定主版頁面 (C#) |Microsoft 文件
author: rick-anderson
description: 會查看設定內容頁面的主版頁面，以程式設計方式透過 PreInit 事件處理常式。
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/28/2008
ms.topic: article
ms.assetid: 7c4a3445-2440-4aee-b9fd-779c05e6abb2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/specifying-the-master-page-programmatically-cs
msc.type: authoredcontent
ms.openlocfilehash: 2294ee2e58e55901d77958e7cf45dd74fc2a1187
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/06/2018
ms.locfileid: "30891148"
---
<a name="specifying-the-master-page-programmatically-c"></a><span data-ttu-id="03b3c-103">以程式設計方式指定主版頁面 (C#)</span><span class="sxs-lookup"><span data-stu-id="03b3c-103">Specifying the Master Page Programmatically (C#)</span></span>
====================
<span data-ttu-id="03b3c-104">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="03b3c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="03b3c-105">[下載程式碼](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.zip)或[下載 PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="03b3c-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.pdf)</span></span>

> <span data-ttu-id="03b3c-106">會查看設定內容頁面的主版頁面，以程式設計方式透過 PreInit 事件處理常式。</span><span class="sxs-lookup"><span data-stu-id="03b3c-106">Looks at setting the content page's master page programmatically via the PreInit event handler.</span></span>


## <a name="introduction"></a><span data-ttu-id="03b3c-107">簡介</span><span class="sxs-lookup"><span data-stu-id="03b3c-107">Introduction</span></span>

<span data-ttu-id="03b3c-108">因為我的範例中[*建立全站台的版面配置使用主版頁面*](creating-a-site-wide-layout-using-master-pages-cs.md)，所有內容的頁面參考以宣告方式透過其主版頁面`MasterPageFile`中屬性`@Page`指示詞。</span><span class="sxs-lookup"><span data-stu-id="03b3c-108">Since the inaugural example in [*Creating a Site-Wide Layout Using Master Pages*](creating-a-site-wide-layout-using-master-pages-cs.md), all content pages have referenced their master page declaratively via the `MasterPageFile` attribute in the `@Page` directive.</span></span> <span data-ttu-id="03b3c-109">例如，下列`@Page`指示詞連結至主版頁面的 [內容] 頁面`Site.master`:</span><span class="sxs-lookup"><span data-stu-id="03b3c-109">For example, the following `@Page` directive links the content page to the master page `Site.master`:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample1.aspx)]

<span data-ttu-id="03b3c-110">[ `Page`類別](https://msdn.microsoft.com/library/system.web.ui.page.aspx)中`System.Web.UI`命名空間包含[`MasterPageFile`屬性](https://msdn.microsoft.com/library/system.web.ui.page.masterpagefile.aspx)，傳回內容頁面的主版頁面的路徑，則可以由設定這個屬性`@Page`指示詞。</span><span class="sxs-lookup"><span data-stu-id="03b3c-110">The [`Page` class](https://msdn.microsoft.com/library/system.web.ui.page.aspx) in the `System.Web.UI` namespace includes a [`MasterPageFile` property](https://msdn.microsoft.com/library/system.web.ui.page.masterpagefile.aspx) that returns the path to the content page's master page; it is this property that is set by the `@Page` directive.</span></span> <span data-ttu-id="03b3c-111">這個屬性也可用來以程式設計方式指定內容頁面的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-111">This property can also be used to programmatically specify the content page's master page.</span></span> <span data-ttu-id="03b3c-112">這個方法很有用，如果您想要以動態方式指派主版頁面根據外部因素，例如瀏覽頁面的使用者。</span><span class="sxs-lookup"><span data-stu-id="03b3c-112">This approach is useful if you want to dynamically assign the master page based on external factors, such as the user visiting the page.</span></span>

<span data-ttu-id="03b3c-113">本教學課程中我們會將第二個主版頁面加入至我們的網站，以動態方式決定要在執行階段使用的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-113">In this tutorial we add a second master page to our website and dynamically decide which master page to use at runtime.</span></span>

## <a name="step-1-a-look-at-the-page-lifecycle"></a><span data-ttu-id="03b3c-114">步驟 1： 看頁面生命週期</span><span class="sxs-lookup"><span data-stu-id="03b3c-114">Step 1: A Look at the Page Lifecycle</span></span>

<span data-ttu-id="03b3c-115">ASP.NET 引擎時要求到達網頁伺服器內容頁面 ASP.NET 網頁時，必須將網頁的內容控制項加入主版頁面中對應 ContentPlaceHolder 的控制項。</span><span class="sxs-lookup"><span data-stu-id="03b3c-115">Whenever a request arrives at the web server for an ASP.NET page that is a content page, the ASP.NET engine must fuse the page's Content controls into the master page's corresponding ContentPlaceHolder controls.</span></span> <span data-ttu-id="03b3c-116">此 fusion 會建立單一控制項階層架構，可以繼續透過典型網頁生命週期。</span><span class="sxs-lookup"><span data-stu-id="03b3c-116">This fusion creates a single control hierarchy that can then proceed through the typical page lifecycle.</span></span>

<span data-ttu-id="03b3c-117">圖 1 說明這個融合。</span><span class="sxs-lookup"><span data-stu-id="03b3c-117">Figure 1 illustrates this fusion.</span></span> <span data-ttu-id="03b3c-118">步驟 1 中圖 1 顯示的初始內容和主版頁面控制項階層架構。</span><span class="sxs-lookup"><span data-stu-id="03b3c-118">Step 1 in Figure 1 shows the initial content and master page control hierarchies.</span></span> <span data-ttu-id="03b3c-119">PreInit 階段內容的結尾結束頁面中的控制項加入至對應的 ContentPlaceHolders 主版頁面 (步驟 2) 中。</span><span class="sxs-lookup"><span data-stu-id="03b3c-119">At the tail end of the PreInit stage the Content controls in the page are added to the corresponding ContentPlaceHolders in the master page (Step 2).</span></span> <span data-ttu-id="03b3c-120">之後此融合主版頁面當做合成的控制項階層架構的根。</span><span class="sxs-lookup"><span data-stu-id="03b3c-120">After this fusion, the master page serves as the root of the fused control hierarchy.</span></span> <span data-ttu-id="03b3c-121">這 fused 控制項階層架構接著會加入至頁面，會產生最終的控制項階層架構 (步驟 3)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-121">This fused control hierarchy is then added to the page to produce the finalized control hierarchy (Step 3).</span></span> <span data-ttu-id="03b3c-122">最後結果就是頁面控制項階層架構包含合成的控制項階層架構。</span><span class="sxs-lookup"><span data-stu-id="03b3c-122">The net result is that the page's control hierarchy includes the fused control hierarchy.</span></span>


<span data-ttu-id="03b3c-123">[![主版頁面和內容頁面控制項階層會一起 Fused PreInit 階段](specifying-the-master-page-programmatically-cs/_static/image2.png)](specifying-the-master-page-programmatically-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-123">[![The Master Page and Content Page's Control Hierarchies are Fused Together during the PreInit Stage](specifying-the-master-page-programmatically-cs/_static/image2.png)](specifying-the-master-page-programmatically-cs/_static/image1.png)</span></span>

<span data-ttu-id="03b3c-124">**圖 01**: 主版頁面和內容頁面控制項階層是一起 Fused PreInit 階段 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-124">**Figure 01**: The Master Page and Content Page's Control Hierarchies are Fused Together during the PreInit Stage ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image3.png))</span></span>


## <a name="step-2-setting-themasterpagefileproperty-from-code"></a><span data-ttu-id="03b3c-125">步驟 2： 設定`MasterPageFile`從程式碼的屬性</span><span class="sxs-lookup"><span data-stu-id="03b3c-125">Step 2: Setting the`MasterPageFile`Property from Code</span></span>

<span data-ttu-id="03b3c-126">在此融合 partakes 哪些主版頁面的值而定`Page`物件的`MasterPageFile`屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-126">What master page partakes in this fusion depends on the value of the `Page` object's `MasterPageFile` property.</span></span> <span data-ttu-id="03b3c-127">設定`MasterPageFile`屬性`@Page`指示詞有指派的淨影響`Page`的`MasterPageFile`在初始化階段，也就是網頁的生命週期的第一個階段的屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-127">Setting the `MasterPageFile` attribute in the `@Page` directive has the net effect of assigning the `Page`'s `MasterPageFile` property during the Initialization stage, which is the very first stage of the page's lifecycle.</span></span> <span data-ttu-id="03b3c-128">我們也可以程式設計方式設定這個屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-128">We can alternatively set this property programmatically.</span></span> <span data-ttu-id="03b3c-129">不過，請務必在圖 1 融合之前設定這個屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-129">However, it is imperative that this property be set before the fusion in Figure 1 takes place.</span></span>

<span data-ttu-id="03b3c-130">在 PreInit 階段開始`Page`物件引發其[`PreInit`事件](https://msdn.microsoft.com/library/system.web.ui.page.preinit.aspx)並呼叫其[`OnPreInit`方法](https://msdn.microsoft.com/library/system.web.ui.page.onpreinit.aspx)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-130">At the start of the PreInit stage the `Page` object raises its [`PreInit` event](https://msdn.microsoft.com/library/system.web.ui.page.preinit.aspx) and calls its [`OnPreInit` method](https://msdn.microsoft.com/library/system.web.ui.page.onpreinit.aspx).</span></span> <span data-ttu-id="03b3c-131">若要以程式設計方式設定主版頁面，然後，我們可以建立事件處理常式`PreInit`事件或覆寫`OnPreInit`方法。</span><span class="sxs-lookup"><span data-stu-id="03b3c-131">To set the master page programmatically, then, we can either create an event handler for the `PreInit` event or override the `OnPreInit` method.</span></span> <span data-ttu-id="03b3c-132">讓我們看看這兩種方法。</span><span class="sxs-lookup"><span data-stu-id="03b3c-132">Let's look at both approaches.</span></span>

<span data-ttu-id="03b3c-133">先開啟`Default.aspx.cs`，我們的網站首頁上的程式碼後置類別檔。</span><span class="sxs-lookup"><span data-stu-id="03b3c-133">Start by opening `Default.aspx.cs`, the code-behind class file for our site's homepage.</span></span> <span data-ttu-id="03b3c-134">加入頁面的事件處理常式`PreInit`輸入下列程式碼中的事件：</span><span class="sxs-lookup"><span data-stu-id="03b3c-134">Add an event handler for the page's `PreInit` event by typing in the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample2.cs)]

<span data-ttu-id="03b3c-135">我們可以從這裡設定`MasterPageFile`屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-135">From here we can set the `MasterPageFile` property.</span></span> <span data-ttu-id="03b3c-136">更新程式碼，它會將值指派"~ / Site.master 」 至`MasterPageFile`屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-136">Update the code so that it assigns the value "~/Site.master" to the `MasterPageFile` property.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample3.cs)]

<span data-ttu-id="03b3c-137">如果您設定中斷點並開始偵錯您會看到每當`Default.aspx`瀏覽頁面時，或每當回傳至這個頁面上，`Page_PreInit`事件處理常式都會執行和`MasterPageFile`屬性指派給"~ / Site.master"。</span><span class="sxs-lookup"><span data-stu-id="03b3c-137">If you set a breakpoint and start with debugging you'll see that whenever the `Default.aspx` page is visited or whenever there's a postback to this page, the `Page_PreInit` event handler executes and the `MasterPageFile` property is assigned to "~/Site.master".</span></span>

<span data-ttu-id="03b3c-138">或者，您可以覆寫`Page`類別的`OnPreInit`方法並將`MasterPageFile`那里屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-138">Alternatively, you can override the `Page` class's `OnPreInit` method and set the `MasterPageFile` property there.</span></span> <span data-ttu-id="03b3c-139">此範例中，我們沒有設定主版頁面中的特定頁面，而是從`BasePage`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-139">For this example, let's not set the master page in a particular page, but rather from `BasePage`.</span></span> <span data-ttu-id="03b3c-140">前文提過，我們會建立自訂的基底頁類別 (`BasePage`) 回[*主版頁面中指定的標題、 Meta 標記和其他 HTML 標頭*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md)教學課程。</span><span class="sxs-lookup"><span data-stu-id="03b3c-140">Recall that we created a custom base page class (`BasePage`) back in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial.</span></span> <span data-ttu-id="03b3c-141">目前`BasePage`會覆寫`Page`類別的`OnLoadComplete`方法，它用來設定網頁的`Title`屬性根據網站地圖資料。</span><span class="sxs-lookup"><span data-stu-id="03b3c-141">Currently `BasePage` overrides the `Page` class's `OnLoadComplete` method, where it sets the page's `Title` property based on the site map data.</span></span> <span data-ttu-id="03b3c-142">讓我們更新`BasePage`也覆寫`OnPreInit`方法，以程式設計方式指定主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-142">Let's update `BasePage` to also override the `OnPreInit` method to programmatically specify the master page.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample4.cs)]

<span data-ttu-id="03b3c-143">因為我們所有的內容頁衍生自`BasePage`，全部都現在有以程式設計的方式指派其主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-143">Because all our content pages derive from `BasePage`, all of them now have their master page programmatically assigned.</span></span> <span data-ttu-id="03b3c-144">此時`PreInit`中的事件處理常式`Default.aspx.cs`是多餘; 隨意移除它。</span><span class="sxs-lookup"><span data-stu-id="03b3c-144">At this point the `PreInit` event handler in `Default.aspx.cs` is superfluous; feel free to remove it.</span></span>

### <a name="what-about-thepagedirective"></a><span data-ttu-id="03b3c-145">呢`@Page`指示詞？</span><span class="sxs-lookup"><span data-stu-id="03b3c-145">What About the`@Page`Directive?</span></span>

<span data-ttu-id="03b3c-146">可能有點混淆內容的頁面是`MasterPageFile`屬性現已被指定在兩個地方： 以程式設計方式在`BasePage`類別的`OnPreInit`方法也透過`MasterPageFile`中每個內容頁面的屬性`@Page`指示詞。</span><span class="sxs-lookup"><span data-stu-id="03b3c-146">What may be a little confusing is that the content pages' `MasterPageFile` properties are now being specified in two places: programmatically in the `BasePage` class's `OnPreInit` method as well as through the `MasterPageFile` attribute in each content page's `@Page` directive.</span></span>

<span data-ttu-id="03b3c-147">在頁面生命週期中的第一個階段是初始化階段。</span><span class="sxs-lookup"><span data-stu-id="03b3c-147">The first stage in the page lifecycle is the Initialization stage.</span></span> <span data-ttu-id="03b3c-148">在這個階段`Page`物件的`MasterPageFile`的值指派給屬性`MasterPageFile`屬性`@Page`指示詞 （如果有提供）。</span><span class="sxs-lookup"><span data-stu-id="03b3c-148">During this stage the `Page` object's `MasterPageFile` property is assigned the value of the `MasterPageFile` attribute in the `@Page` directive (if it is provided).</span></span> <span data-ttu-id="03b3c-149">PreInit 階段遵循初始化階段，並就在這裡，我們以程式設計方式設定`Page`物件的`MasterPageFile`屬性，藉此覆寫從指派的值`@Page`指示詞。</span><span class="sxs-lookup"><span data-stu-id="03b3c-149">The PreInit stage follows the Initialization stage, and it is here where we programmatically set the `Page` object's `MasterPageFile` property, thereby overwriting the value assigned from the `@Page` directive.</span></span> <span data-ttu-id="03b3c-150">由於我們將`Page`物件的`MasterPageFile`屬性以程式設計方式，我們無法移除`MasterPageFile`屬性從`@Page`指示詞不會影響使用者的體驗。</span><span class="sxs-lookup"><span data-stu-id="03b3c-150">Because we are setting the `Page` object's `MasterPageFile` property programmatically, we could remove the `MasterPageFile` attribute from the `@Page` directive without affecting the end user's experience.</span></span> <span data-ttu-id="03b3c-151">若要說服自行這個，請繼續進行，並移除`MasterPageFile`屬性從`@Page`指示詞`Default.aspx`，然後瀏覽透過瀏覽器頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-151">To convince yourself of this, go ahead and remove the `MasterPageFile` attribute from the `@Page` directive in `Default.aspx` and then visit the page through a browser.</span></span> <span data-ttu-id="03b3c-152">如您所預期，輸出會是相同之前移除的屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-152">As you would expect, the output is the same as before the attribute was removed.</span></span>

<span data-ttu-id="03b3c-153">是否`MasterPageFile`屬性設定透過`@Page`指示詞或以程式設計的方式並不重要終端使用者的體驗。</span><span class="sxs-lookup"><span data-stu-id="03b3c-153">Whether the `MasterPageFile` property is set via the `@Page` directive or programmatically is inconsequential to the end user's experience.</span></span> <span data-ttu-id="03b3c-154">不過，`MasterPageFile`屬性`@Page`指示詞可由 Visual Studio 在設計階段期間來產生所見即所得的設計工具中檢視。</span><span class="sxs-lookup"><span data-stu-id="03b3c-154">However, the `MasterPageFile` attribute in the `@Page` directive is used by Visual Studio during design-time to produce the WYSIWYG view in the Designer.</span></span> <span data-ttu-id="03b3c-155">如果您返回`Default.aspx`Visual Studio 中，瀏覽至設計工具中，您會看到訊息，"主版頁面的錯誤： 分頁具有需要主版頁面參考的控制項，但未指定"（請參閱圖 2）。</span><span class="sxs-lookup"><span data-stu-id="03b3c-155">If you return to `Default.aspx` in Visual Studio and navigate to the Designer you'll see the message, "Master Page error: The page has controls that require a Master Page reference, but none is specified" (see Figure 2).</span></span>

<span data-ttu-id="03b3c-156">簡單地說，您需要讓`MasterPageFile`屬性`@Page`享受豐富的設計階段經驗，在 Visual Studio 中的指示詞。</span><span class="sxs-lookup"><span data-stu-id="03b3c-156">In short, you need to leave the `MasterPageFile` attribute in the `@Page` directive to enjoy a rich design-time experience in Visual Studio.</span></span>


<span data-ttu-id="03b3c-157">[![Visual Studio 會使用@Page指示詞的 MasterPageFile 屬性來呈現 [設計] 檢視](specifying-the-master-page-programmatically-cs/_static/image5.png)](specifying-the-master-page-programmatically-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-157">[![Visual Studio Uses the @Page Directive's MasterPageFile Attribute to Render the Design View](specifying-the-master-page-programmatically-cs/_static/image5.png)](specifying-the-master-page-programmatically-cs/_static/image4.png)</span></span>

<span data-ttu-id="03b3c-158">**圖 02**: Visual Studio 會使用`@Page`指示詞的`MasterPageFile`要轉譯屬性 [設計] 檢視 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-158">**Figure 02**: Visual Studio Uses the `@Page` Directive's `MasterPageFile` Attribute to Render the Design View  ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image6.png))</span></span>


## <a name="step-3-creating-an-alternative-master-page"></a><span data-ttu-id="03b3c-159">步驟 3： 建立替代主版頁面</span><span class="sxs-lookup"><span data-stu-id="03b3c-159">Step 3: Creating an Alternative Master Page</span></span>

<span data-ttu-id="03b3c-160">因為可以在執行階段可以動態載入特定的主版頁面，根據某些外部準則以程式設計方式設定內容頁面的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-160">Because a content page's master page can be set programmatically at runtime it's possible to dynamically load a particular master page based on some external criteria.</span></span> <span data-ttu-id="03b3c-161">這項功能可以在其中站台的配置必須不同根據使用者的情況下很有用。</span><span class="sxs-lookup"><span data-stu-id="03b3c-161">This functionality can be useful in situations where the site's layout needs to vary based on the user.</span></span> <span data-ttu-id="03b3c-162">比方說，部落格引擎 web 應用程式可能會讓其使用者選擇他們的部落格的版面配置其中每個配置都與不同的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-162">For instance, a blog engine web application may allow its users to choose a layout for their blog, where each layout is associated with a different master page.</span></span> <span data-ttu-id="03b3c-163">在執行階段，當訪客正在檢視使用者的部落格、 web 應用程式需要決定部落格的版面配置，並動態將對應的主版頁面關聯的內容頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-163">At runtime, when a visitor is viewing a user's blog, the web application would need to determine the blog's layout and dynamically associate the corresponding master page with the content page.</span></span>

<span data-ttu-id="03b3c-164">讓我們來討論如何動態載入某個外部的準則為基礎執行階段主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-164">Let's examine how to dynamically load a master page at runtime based on some external criteria.</span></span> <span data-ttu-id="03b3c-165">我們的網站目前包含一個主版頁面 (`Site.master`)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-165">Our website currently contains just one master page (`Site.master`).</span></span> <span data-ttu-id="03b3c-166">我們需要其他說明選擇在執行階段主版頁面的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-166">We need another master page to illustrate choosing a master page at runtime.</span></span> <span data-ttu-id="03b3c-167">此步驟著重於建立及設定新的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-167">This step focuses on creating and configuring the new master page.</span></span> <span data-ttu-id="03b3c-168">步驟 4 會查看決定哪些在執行階段使用的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-168">Step 4 looks at determining what master page to use at runtime.</span></span>

<span data-ttu-id="03b3c-169">名為的根資料夾中建立新的主版頁面`Alternate.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-169">Create a new master page in the root folder named `Alternate.master`.</span></span> <span data-ttu-id="03b3c-170">也將新的樣式表加入至名為網站`AlternateStyles.css`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-170">Also add a new style sheet to the website named `AlternateStyles.css`.</span></span>


<span data-ttu-id="03b3c-171">[![加入另一個網站的主版頁面和 CSS 檔案](specifying-the-master-page-programmatically-cs/_static/image8.png)](specifying-the-master-page-programmatically-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-171">[![Add Another Master Page and CSS File to the Website](specifying-the-master-page-programmatically-cs/_static/image8.png)](specifying-the-master-page-programmatically-cs/_static/image7.png)</span></span>

<span data-ttu-id="03b3c-172">**圖 03**： 加入另一個主版頁面和 CSS 檔案的網站 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-172">**Figure 03**: Add Another Master Page and CSS File to the Website ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image9.png))</span></span>


<span data-ttu-id="03b3c-173">我已設計`Alternate.master`主版頁面頂端的頁面上，置中對齊和海軍藍的背景上顯示的標題。</span><span class="sxs-lookup"><span data-stu-id="03b3c-173">I've designed the `Alternate.master` master page to have the title displayed at the top of the page, centered and on a navy background.</span></span> <span data-ttu-id="03b3c-174">我已在分配的左側資料行，並移動該內容下方`MainContent`ContentPlaceHolder 控制，現在會橫跨整個頁面的寬度。</span><span class="sxs-lookup"><span data-stu-id="03b3c-174">I've dispensed of the left column and moved that content beneath the `MainContent` ContentPlaceHolder control, which now spans the entire width of the page.</span></span> <span data-ttu-id="03b3c-175">此外，我 nixed 未排序的課程清單，並取代上述水平清單`MainContent`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-175">Furthermore, I nixed the unordered Lessons list and replaced it with a horizontal list above `MainContent`.</span></span> <span data-ttu-id="03b3c-176">我也已更新的字型和色彩及所使用的主版頁面 （，延伸模組，其內容頁）。</span><span class="sxs-lookup"><span data-stu-id="03b3c-176">I also updated the fonts and colors used by the master page (and, by extension, its content pages).</span></span> <span data-ttu-id="03b3c-177">圖 4 顯示`Default.aspx`時使用`Alternate.master`主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-177">Figure 4 shows `Default.aspx` when using the `Alternate.master` master page.</span></span>

> [!NOTE]
> <span data-ttu-id="03b3c-178">ASP.NET 包括了可定義*佈景主題*。</span><span class="sxs-lookup"><span data-stu-id="03b3c-178">ASP.NET includes the ability to define *Themes*.</span></span> <span data-ttu-id="03b3c-179">主題是影像、 CSS 檔案和樣式相關網頁的控制項屬性設定可以套用至在執行階段頁面的集合。</span><span class="sxs-lookup"><span data-stu-id="03b3c-179">A Theme is a collection of images, CSS files, and style-related Web control property settings that can be applied to a page at runtime.</span></span> <span data-ttu-id="03b3c-180">主題是如果您的網站配置不同只在顯示的映像和其 CSS 規則的方式。</span><span class="sxs-lookup"><span data-stu-id="03b3c-180">Themes are the way to go if your site's layouts differ only in the images displayed and by their CSS rules.</span></span> <span data-ttu-id="03b3c-181">如果配置不同更本質上，例如使用不同的 Web 控制項，或擁有完全不同的配置，則您必須使用不同的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-181">If the layouts differ more substantially, such as using different Web controls or having a radically different layout, then you will need to use separate master pages.</span></span> <span data-ttu-id="03b3c-182">在本教學課程，如需有關主題的結尾，請參閱進一步閱讀章節。</span><span class="sxs-lookup"><span data-stu-id="03b3c-182">Consult the Further Reading section at the end of this tutorial for more information on Themes.</span></span>


<span data-ttu-id="03b3c-183">[![我們的內容頁面現在可以使用新的外觀與風格](specifying-the-master-page-programmatically-cs/_static/image11.png)](specifying-the-master-page-programmatically-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-183">[![Our Content Pages Can Now Use a New Look and Feel](specifying-the-master-page-programmatically-cs/_static/image11.png)](specifying-the-master-page-programmatically-cs/_static/image10.png)</span></span>

<span data-ttu-id="03b3c-184">**圖 04**： 我們的內容頁面現在可以使用新的外觀及操作 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-184">**Figure 04**: Our Content Pages Can Now Use a New Look and Feel ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image12.png))</span></span>


<span data-ttu-id="03b3c-185">當主要和內容頁面的標記 fused 時，`MasterPage`類別會檢查以確定每個內容控制項的內容頁面參考 ContentPlaceHolder 主版頁面中的。</span><span class="sxs-lookup"><span data-stu-id="03b3c-185">When the master and content pages' markup are fused, the `MasterPage` class checks to ensure that every Content control in the content page references a ContentPlaceHolder in the master page.</span></span> <span data-ttu-id="03b3c-186">如果找不到參考不存在 ContentPlaceHolder 內容控制項，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="03b3c-186">An exception is thrown if a Content control that references a non-existent ContentPlaceHolder is found.</span></span> <span data-ttu-id="03b3c-187">換句話說，務必要指派給內容頁面的主版頁面有 ContentPlaceHolder，每個內容控制項的內容頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-187">In other words, it is imperative that the master page being assigned to the content page have a ContentPlaceHolder for each Content control in the content page.</span></span>

<span data-ttu-id="03b3c-188">`Site.master`主版頁面包含四個 ContentPlaceHolder 控制項：</span><span class="sxs-lookup"><span data-stu-id="03b3c-188">The `Site.master` master page includes four ContentPlaceHolder controls:</span></span>

- `head`
- `MainContent`
- `QuickLoginUI`
- `LeftColumnContent`

<span data-ttu-id="03b3c-189">在我們的網站內容的頁面包括只有一個或兩個內容控制項。其他每個可用 ContentPlaceHolders 包含內容控制項。</span><span class="sxs-lookup"><span data-stu-id="03b3c-189">Some of the content pages in our website include just one or two Content controls; others include a Content control for each of the available ContentPlaceHolders.</span></span> <span data-ttu-id="03b3c-190">如果我們新的主版頁面 (`Alternate.master`) 可能不會指派給內容控制項的所有 ContentPlaceHolders 中那些內容頁面`Site.master`則很重要，`Alternate.master`也包含與相同ContentPlaceHolder控制項`Site.master`.</span><span class="sxs-lookup"><span data-stu-id="03b3c-190">If our new master page (`Alternate.master`) may ever be assigned to those content pages that have Content controls for all of the ContentPlaceHolders in `Site.master` then it is essential that `Alternate.master` also include the same ContentPlaceHolder controls as `Site.master`.</span></span>

<span data-ttu-id="03b3c-191">若要取得您`Alternate.master`主版頁面看起來很相似，鑽研 （請參閱圖 4），請啟動藉由定義中的主版頁面的樣式`AlternateStyles.css`樣式表。</span><span class="sxs-lookup"><span data-stu-id="03b3c-191">To get your `Alternate.master` master page to look similar to mine (see Figure 4), start by defining the master page's styles in the `AlternateStyles.css` style sheet.</span></span> <span data-ttu-id="03b3c-192">新增下列規則到`AlternateStyles.css`:</span><span class="sxs-lookup"><span data-stu-id="03b3c-192">Add the following rules into `AlternateStyles.css`:</span></span>


[!code-css[Main](specifying-the-master-page-programmatically-cs/samples/sample5.css)]

<span data-ttu-id="03b3c-193">接下來，加入下列宣告式標記`Alternate.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-193">Next, add the following declarative markup to `Alternate.master`.</span></span> <span data-ttu-id="03b3c-194">如您所見，`Alternate.master`包含具有相同的四個 ContentPlaceHolder 控制項`ID`值當作 ContentPlaceHolder 控制項`Site.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-194">As you can see, `Alternate.master` contains four ContentPlaceHolder controls with the same `ID` values as the ContentPlaceHolder controls in `Site.master`.</span></span> <span data-ttu-id="03b3c-195">此外，它包含一個 ScriptManager 控制項，在我們的網站中使用 ASP.NET AJAX 架構的那些頁面才需要。</span><span class="sxs-lookup"><span data-stu-id="03b3c-195">Moreover, it includes a ScriptManager control, which is necessary for those pages in our website that use the ASP.NET AJAX framework.</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample6.aspx)]

### <a name="testing-the-new-master-page"></a><span data-ttu-id="03b3c-196">測試新的主版頁面</span><span class="sxs-lookup"><span data-stu-id="03b3c-196">Testing the New Master Page</span></span>

<span data-ttu-id="03b3c-197">若要測試這個新的主版頁面更新`BasePage`類別的`OnPreInit`方法以便`MasterPageFile`將值指派給屬性"~ / Alternate.master"，然後瀏覽的網站。</span><span class="sxs-lookup"><span data-stu-id="03b3c-197">To test this new master page update the `BasePage` class's `OnPreInit` method so that the `MasterPageFile` property is assigned the value "~/Alternate.master" and then visit the website.</span></span> <span data-ttu-id="03b3c-198">每個頁面應該不會發生錯誤，除了兩個函式：`~/Admin/AddProduct.aspx`和`~/Admin/Products.aspx`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-198">Every page should function without error except for two: `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx`.</span></span> <span data-ttu-id="03b3c-199">在 detailsview 中新增一項產品`~/Admin/AddProduct.aspx`導致`NullReferenceException`從嘗試設定主版頁面的程式碼行`GridMessageText`屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-199">Adding a product to the DetailsView in `~/Admin/AddProduct.aspx` results in a `NullReferenceException` from the line of code that attempts to set the master page's `GridMessageText` property.</span></span> <span data-ttu-id="03b3c-200">造訪時`~/Admin/Products.aspx``InvalidCastException`與訊息的頁面載入時擲回: 「 無法將型別的物件轉換 'ASP.alternate\_master' 輸入' ASP.site\_master'。 」</span><span class="sxs-lookup"><span data-stu-id="03b3c-200">When visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown on page load with the message: "Unable to cast object of type 'ASP.alternate\_master' to type 'ASP.site\_master'."</span></span>

<span data-ttu-id="03b3c-201">這些錯誤的發生原因`Site.master`程式碼後置類別包含公用事件、 屬性和方法中未定義`Alternate.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-201">These errors occur because the `Site.master` code-behind class includes public events, properties, and methods that are not defined in `Alternate.master`.</span></span> <span data-ttu-id="03b3c-202">這兩個分頁的標記部分有`@MasterType`指示詞參考`Site.master`主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-202">The markup portion of these two pages have a `@MasterType` directive that references the `Site.master` master page.</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample7.aspx)]

<span data-ttu-id="03b3c-203">此外，在 DetailsView 的`ItemInserted`中的事件處理常式`~/Admin/AddProduct.aspx`包含程式碼會轉換為鬆散型別`Page.Master`屬性型別的物件`Site`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-203">Also, the DetailsView's `ItemInserted` event handler in `~/Admin/AddProduct.aspx` includes code that casts the loosely-typed `Page.Master` property to an object of type `Site`.</span></span> <span data-ttu-id="03b3c-204">`@MasterType` （使用這種方式） 的指示詞和轉換`ItemInserted`緊密結合的事件處理常式`~/Admin/AddProduct.aspx`和`~/Admin/Products.aspx`頁面`Site.master`主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-204">The `@MasterType` directive (used this way) and the cast in the `ItemInserted` event handler tightly couples the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages to the `Site.master` master page.</span></span>

<span data-ttu-id="03b3c-205">若要中斷這個緊密結合，我們可以有`Site.master`和`Alternate.master`衍生自一般基底類別，其中包含定義的公用成員。</span><span class="sxs-lookup"><span data-stu-id="03b3c-205">To break this tight coupling we can have `Site.master` and `Alternate.master` derive from a common base class that contains definitions for the public members.</span></span> <span data-ttu-id="03b3c-206">接下來，我們可以更新`@MasterType`指示詞，以參考這個通用基底型別。</span><span class="sxs-lookup"><span data-stu-id="03b3c-206">Following that, we can update the `@MasterType` directive to reference this common base type.</span></span>

### <a name="creating-a-custom-base-master-page-class"></a><span data-ttu-id="03b3c-207">建立自訂的基底主版頁面類別</span><span class="sxs-lookup"><span data-stu-id="03b3c-207">Creating a Custom Base Master Page Class</span></span>

<span data-ttu-id="03b3c-208">加入新的類別檔案`App_Code`資料夾名為`BaseMasterPage.cs`，並讓它衍生自`System.Web.UI.MasterPage`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-208">Add a new class file to the `App_Code` folder named `BaseMasterPage.cs` and have it derive from `System.Web.UI.MasterPage`.</span></span> <span data-ttu-id="03b3c-209">我們必須定義`RefreshRecentProductsGrid`方法和`GridMessageText`屬性`BaseMasterPage`，但我們無法只移動它們那里從`Site.master`因為這些成員使用特定的 Web 控制項`Site.master`主版頁面 ( `RecentProducts`GridView 和`GridMessage`標籤)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-209">We need to define the `RefreshRecentProductsGrid` method and the `GridMessageText` property in `BaseMasterPage`, but we can't simply move them there from `Site.master` because these members work with Web controls that are specific to the `Site.master` master page (the `RecentProducts` GridView and `GridMessage` Label).</span></span>

<span data-ttu-id="03b3c-210">我們需要如何做為設定`BaseMasterPage`方式定義，這些成員，但實際上由實作`BaseMasterPage`的衍生類別 (`Site.master`和`Alternate.master`)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-210">What we need to do is configure `BaseMasterPage` in such a way that these members are defined there, but are actually implemented by `BaseMasterPage`'s derived classes (`Site.master` and `Alternate.master`).</span></span> <span data-ttu-id="03b3c-211">這種類型的繼承可標示的類別並為其成員`abstract`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-211">This type of inheritance is possible by marking the class and its members as `abstract`.</span></span> <span data-ttu-id="03b3c-212">簡單地說，加入`abstract`這兩個成員的關鍵字會宣告，`BaseMasterPage`尚未實作`RefreshRecentProductsGrid`和`GridMessageText`，但該將其衍生的類別。</span><span class="sxs-lookup"><span data-stu-id="03b3c-212">In short, adding the `abstract` keyword to these two members announces that `BaseMasterPage` hasn't implemented `RefreshRecentProductsGrid` and `GridMessageText`, but that its derived classes will.</span></span>

<span data-ttu-id="03b3c-213">我們也需要定義`PricesDoubled`中的事件`BaseMasterPage`衍生的類別，以引發此事件來提供一種方法。</span><span class="sxs-lookup"><span data-stu-id="03b3c-213">We also need to define the `PricesDoubled` event in `BaseMasterPage` and provide a means by the derived classes to raise the event.</span></span> <span data-ttu-id="03b3c-214">這種行為，以便使用.NET Framework 中的模式是在基底類別中建立公用事件，並新增受保護`virtual`方法名為`OnEventName`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-214">The pattern used in the .NET Framework to facilitate this behavior is to create a public event in the base class and add a protected, `virtual` method named `OnEventName`.</span></span> <span data-ttu-id="03b3c-215">在衍生的類別接著可以呼叫這個方法以引發此事件，或可以覆寫它立即之前或之後就會引發事件時，才執行程式碼。</span><span class="sxs-lookup"><span data-stu-id="03b3c-215">Derived classes can then call this method to raise the event or can override it to execute code immediately before or after the event is raised.</span></span>

<span data-ttu-id="03b3c-216">更新您`BaseMasterPage`類別，使其包含下列程式碼：</span><span class="sxs-lookup"><span data-stu-id="03b3c-216">Update your `BaseMasterPage` class so that it contains the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample8.cs)]

<span data-ttu-id="03b3c-217">接下來，請移至`Site.master`程式碼後置類別，並讓它衍生自`BaseMasterPage`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-217">Next, go to the `Site.master` code-behind class and have it derive from `BaseMasterPage`.</span></span> <span data-ttu-id="03b3c-218">因為`BaseMasterPage`是`abstract`我們要覆寫那些`abstract`這裡中的成員`Site.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-218">Because `BaseMasterPage` is `abstract` we need to override those `abstract` members here in `Site.master`.</span></span> <span data-ttu-id="03b3c-219">新增`override`方法與屬性定義的關鍵字。</span><span class="sxs-lookup"><span data-stu-id="03b3c-219">Add the `override` keyword to the method and property definitions.</span></span> <span data-ttu-id="03b3c-220">也請更新程式碼引發`PricesDoubled`中的事件`DoublePrice`按鈕的`Click`事件處理常式的基底類別呼叫`OnPricesDoubled`方法。</span><span class="sxs-lookup"><span data-stu-id="03b3c-220">Also update the code that raises the `PricesDoubled` event in the `DoublePrice` Button's `Click` event handler with a call to the base class's `OnPricesDoubled` method.</span></span>

<span data-ttu-id="03b3c-221">這些修改之後`Site.master`程式碼後置類別應包含下列程式碼：</span><span class="sxs-lookup"><span data-stu-id="03b3c-221">After these modifications the `Site.master` code-behind class should contain the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample9.cs)]

<span data-ttu-id="03b3c-222">我們也需要更新`Alternate.master`的程式碼後置類別衍生自`BaseMasterPage`並覆寫這兩個`abstract`成員。</span><span class="sxs-lookup"><span data-stu-id="03b3c-222">We also need to update `Alternate.master`'s code-behind class to derive from `BaseMasterPage` and override the two `abstract` members.</span></span> <span data-ttu-id="03b3c-223">但是由於`Alternate.master`不包含的 GridView，最新的產品，也不會顯示一個訊息之後的新產品的標籤加入至資料庫的清單，這些方法不需要採取任何動作。</span><span class="sxs-lookup"><span data-stu-id="03b3c-223">But because `Alternate.master` does not contain a GridView that lists the most recent products nor a Label that displays a message after a new product is added to the database, these methods do not need to do anything.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample10.cs)]

### <a name="referencing-the-base-master-page-class"></a><span data-ttu-id="03b3c-224">參考基底主版頁面類別</span><span class="sxs-lookup"><span data-stu-id="03b3c-224">Referencing the Base Master Page Class</span></span>

<span data-ttu-id="03b3c-225">既然我們已經完成`BaseMasterPage`類別而我們將它擴充的兩個主要頁面，最後一個步驟是，更新`~/Admin/AddProduct.aspx`和`~/Admin/Products.aspx`分頁來參考這個通用的類型。</span><span class="sxs-lookup"><span data-stu-id="03b3c-225">Now that we have completed the `BaseMasterPage` class and have our two master pages extending it, our final step is to update the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages to refer to this common type.</span></span> <span data-ttu-id="03b3c-226">藉由變更啟動`@MasterType`指示詞從兩個頁面：</span><span class="sxs-lookup"><span data-stu-id="03b3c-226">Start by changing the `@MasterType` directive in both pages from:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample11.aspx)]

<span data-ttu-id="03b3c-227">收件者:</span><span class="sxs-lookup"><span data-stu-id="03b3c-227">To:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample12.aspx)]

<span data-ttu-id="03b3c-228">而不是參考檔案路徑，`@MasterType`屬性現在已參考的基底類型 (`BaseMasterPage`)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-228">Rather than referencing a file path, the `@MasterType` property now references the base type (`BaseMasterPage`).</span></span> <span data-ttu-id="03b3c-229">因此，強型別`Master`現在是在這兩個頁面的程式碼後置類別中使用的屬性型別的`BaseMasterPage`(而不是類型`Site`)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-229">Consequently, the strongly-typed `Master` property used in both pages' code-behind classes is now of type `BaseMasterPage` (instead of type `Site`).</span></span> <span data-ttu-id="03b3c-230">透過這項變更就地重新瀏覽`~/Admin/Products.aspx`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-230">With this change in place revisit `~/Admin/Products.aspx`.</span></span> <span data-ttu-id="03b3c-231">先前，這會導致轉換錯誤則由於頁面設定成使用`Alternate.master`主版頁面，但`@MasterType`指示詞參考`Site.master`檔案。</span><span class="sxs-lookup"><span data-stu-id="03b3c-231">Previously, this resulted in a casting error because the page is configured to use the `Alternate.master` master page, but the `@MasterType` directive referenced the `Site.master` file.</span></span> <span data-ttu-id="03b3c-232">但是，頁面現在會呈現不會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="03b3c-232">But now the page renders without error.</span></span> <span data-ttu-id="03b3c-233">這是因為`Alternate.master`主版頁面都可以轉換成的型別物件`BaseMasterPage`（因為它會擴充它）。</span><span class="sxs-lookup"><span data-stu-id="03b3c-233">This is because the `Alternate.master` master page can be cast to an object of type `BaseMasterPage` (since it extends it).</span></span>

<span data-ttu-id="03b3c-234">必須設為中的一個小變更是`~/Admin/AddProduct.aspx`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-234">There's one small change that needs to be made in `~/Admin/AddProduct.aspx`.</span></span> <span data-ttu-id="03b3c-235">在 DetailsView 控制項的`ItemInserted`事件處理常式會使用這兩個的強型別`Master`屬性，與鬆散型別`Page.Master`屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-235">The DetailsView control's `ItemInserted` event handler uses both the strongly-typed `Master` property and the loosely-typed `Page.Master` property.</span></span> <span data-ttu-id="03b3c-236">當我們更新時，我們會修正的強型別參考`@MasterType`指示詞，但我們仍需要更新的鬆散型別參考。</span><span class="sxs-lookup"><span data-stu-id="03b3c-236">We fixed the strongly-typed reference when we updated the `@MasterType` directive, but we still need to update the loosely-typed reference.</span></span> <span data-ttu-id="03b3c-237">取代下列程式碼行：</span><span class="sxs-lookup"><span data-stu-id="03b3c-237">Replace the following line of code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample13.cs)]

<span data-ttu-id="03b3c-238">使用下列程式碼，它會轉換`Page.Master`的基底類型：</span><span class="sxs-lookup"><span data-stu-id="03b3c-238">With the following, which casts `Page.Master` to the base type:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample14.cs)]

## <a name="step-4-determining-what-master-page-to-bind-to-the-content-pages"></a><span data-ttu-id="03b3c-239">步驟 4： 決定哪些繫結至內容頁面的主版頁面</span><span class="sxs-lookup"><span data-stu-id="03b3c-239">Step 4: Determining What Master Page to Bind to the Content Pages</span></span>

<span data-ttu-id="03b3c-240">我們`BasePage`類別目前設定的所有內容頁面的`MasterPageFile`硬式編碼值頁面生命週期的 PreInit 階段中的屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-240">Our `BasePage` class currently sets all content pages' `MasterPageFile` properties to a hard-coded value in the PreInit stage of the page lifecycle.</span></span> <span data-ttu-id="03b3c-241">我們可以更新這個程式碼以根據一些外部因素的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-241">We can update this code to base the master page on some external factor.</span></span> <span data-ttu-id="03b3c-242">可能是主版頁面載入取決於目前登入使用者的喜好設定。</span><span class="sxs-lookup"><span data-stu-id="03b3c-242">Perhaps the master page to load depends on the preferences of the currently logged on user.</span></span> <span data-ttu-id="03b3c-243">在此情況下，我們必須撰寫程式碼`OnPreInit`方法中的`BasePage`查閱目前正在瀏覽使用者的主版頁面的喜好設定。</span><span class="sxs-lookup"><span data-stu-id="03b3c-243">In that case, we'd need to write code in the `OnPreInit` method in `BasePage` that looks up the currently visiting user's master page preferences.</span></span>

<span data-ttu-id="03b3c-244">讓我們來建立網頁，可讓使用者選擇的主版頁面，即可使用-`Site.master`或`Alternate.master`-工作階段變數中儲存這項選擇。</span><span class="sxs-lookup"><span data-stu-id="03b3c-244">Let's create a web page that allows the user to choose which master page to use - `Site.master` or `Alternate.master` - and save this choice in a Session variable.</span></span> <span data-ttu-id="03b3c-245">藉由名為的根目錄中建立新的網頁啟動`ChooseMasterPage.aspx`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-245">Start by creating a new web page in the root directory named `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="03b3c-246">此頁面 （或任何其他內容頁面從此以後） 建立時不需要繫結至主版頁面中以程式設計方式設定主版頁面因為`BasePage`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-246">When creating this page (or any other content pages henceforth) you don't need to bind it to a master page because the master page is set programmatically in `BasePage`.</span></span> <span data-ttu-id="03b3c-247">不過，如果您請不要繫結之新網頁主版頁面然後在新頁面的預設宣告式標記包含 Web Form 和主版頁面所提供的其他內容。</span><span class="sxs-lookup"><span data-stu-id="03b3c-247">However, if you do not bind the new page to a master page then the new page's default declarative markup contains a Web Form and other content supplied by the master page.</span></span> <span data-ttu-id="03b3c-248">您必須手動將適當的內容控制項取代這個標記。</span><span class="sxs-lookup"><span data-stu-id="03b3c-248">You'll need to manually replace this markup with the appropriate Content controls.</span></span> <span data-ttu-id="03b3c-249">因此，我找到您更輕鬆地將新的 ASP.NET 網頁繫結至主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-249">For that reason, I find it easier to bind the new ASP.NET page to a master page.</span></span>

> [!NOTE]
> <span data-ttu-id="03b3c-250">因為`Site.master`和`Alternate.master`有相同的 ContentPlaceHolder 控制項集合並不重要時建立新的內容頁面，您選擇何種主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-250">Because `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls it doesn't matter what master page you choose when creating the new content page.</span></span> <span data-ttu-id="03b3c-251">為了保持一致性，建議使用`Site.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-251">For consistency, I'd suggest using `Site.master`.</span></span>


<span data-ttu-id="03b3c-252">[![將新的內容頁面新增至網站](specifying-the-master-page-programmatically-cs/_static/image14.png)](specifying-the-master-page-programmatically-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-252">[![Add a New Content Page to the Website](specifying-the-master-page-programmatically-cs/_static/image14.png)](specifying-the-master-page-programmatically-cs/_static/image13.png)</span></span>

<span data-ttu-id="03b3c-253">**圖 05**： 網站加入新的內容頁面 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-253">**Figure 05**: Add a New Content Page to the Website ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image15.png))</span></span>


<span data-ttu-id="03b3c-254">更新`Web.sitemap`檔案至這一課中加入一個項目。</span><span class="sxs-lookup"><span data-stu-id="03b3c-254">Update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="03b3c-255">加入下列標記下方`<siteMapNode>`主版頁面和 ASP.NET AJAX 一課中：</span><span class="sxs-lookup"><span data-stu-id="03b3c-255">Add the following markup beneath the `<siteMapNode>` for the Master Pages and ASP.NET AJAX lesson:</span></span>


[!code-xml[Main](specifying-the-master-page-programmatically-cs/samples/sample15.xml)]

<span data-ttu-id="03b3c-256">然後再加入任何內容發佈至`ChooseMasterPage.aspx`頁面花一點時間來更新網頁的程式碼後置類別，好讓它衍生自`BasePage`(而非`System.Web.UI.Page`)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-256">Before adding any content to the `ChooseMasterPage.aspx` page take a moment to update the page's code-behind class so that it derives from `BasePage` (rather than `System.Web.UI.Page`).</span></span> <span data-ttu-id="03b3c-257">接下來，將 DropDownList 控制項加入至頁面、 設定其`ID`屬性`MasterPageChoice`，並加入兩個具有 ListItems`Text`值"~ / Site.master"和"~ / Alternate.master"。</span><span class="sxs-lookup"><span data-stu-id="03b3c-257">Next, add a DropDownList control to the page, set its `ID` property to `MasterPageChoice`, and add two ListItems with the `Text` values of "~/Site.master" and "~/Alternate.master".</span></span>

<span data-ttu-id="03b3c-258">按鈕 Web 控制項加入網頁，並設定其`ID`和`Text`屬性`SaveLayout`」 儲存配置的選擇 」，並分別。</span><span class="sxs-lookup"><span data-stu-id="03b3c-258">Add a Button Web control to the page and set its `ID` and `Text` properties to `SaveLayout` and "Save Layout Choice", respectively.</span></span> <span data-ttu-id="03b3c-259">此時網頁的宣告式標記看起來應該如下所示：</span><span class="sxs-lookup"><span data-stu-id="03b3c-259">At this point your page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample16.aspx)]

<span data-ttu-id="03b3c-260">當第一次瀏覽網頁時我們需要顯示使用者的目前選取的主版頁面選擇。</span><span class="sxs-lookup"><span data-stu-id="03b3c-260">When the page is first visited we need to display the user's currently selected master page choice.</span></span> <span data-ttu-id="03b3c-261">建立`Page_Load`事件處理常式並加入下列程式碼：</span><span class="sxs-lookup"><span data-stu-id="03b3c-261">Create a `Page_Load` event handler and add the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample17.cs)]

<span data-ttu-id="03b3c-262">上述程式碼執行只有第一個頁面瀏覽 （和不在後續回傳時）。</span><span class="sxs-lookup"><span data-stu-id="03b3c-262">The above code executes only on the first page visit (and not on subsequent postbacks).</span></span> <span data-ttu-id="03b3c-263">它會先檢查以查看工作階段變數`MyMasterPage`存在。</span><span class="sxs-lookup"><span data-stu-id="03b3c-263">It first checks to see if the Session variable `MyMasterPage` exists.</span></span> <span data-ttu-id="03b3c-264">若是如此，它會嘗試尋找相符的 ListItem 中`MasterPageChoice`DropDownList。</span><span class="sxs-lookup"><span data-stu-id="03b3c-264">If it does, it attempts to find the matching ListItem in the `MasterPageChoice` DropDownList.</span></span> <span data-ttu-id="03b3c-265">如果找到相符的清單項目，其`Selected`屬性設定為`true`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-265">If a matching ListItem is found, its `Selected` property is set to `true`.</span></span>

<span data-ttu-id="03b3c-266">我們還需要儲存到使用者的選擇的程式碼`MyMasterPage`工作階段變數。</span><span class="sxs-lookup"><span data-stu-id="03b3c-266">We also need code that saves the user's choice into the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="03b3c-267">建立事件處理常式`SaveLayout`按鈕的`Click`事件並加入下列程式碼：</span><span class="sxs-lookup"><span data-stu-id="03b3c-267">Create an event handler for the `SaveLayout` Button's `Click` event and add the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample18.cs)]

> [!NOTE]
> <span data-ttu-id="03b3c-268">依時間`Click`在回傳事件處理常式都會執行、 已選取的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-268">By the time the `Click` event handler executes on postback, the master page has already been selected.</span></span> <span data-ttu-id="03b3c-269">因此，使用者的下拉式清單選取項目不是作用中直到下一個頁面瀏覽。</span><span class="sxs-lookup"><span data-stu-id="03b3c-269">Therefore, the user's drop-down list selection won't be in effect until the next page visit.</span></span> <span data-ttu-id="03b3c-270">`Response.Redirect`強制瀏覽器以重新要求`ChooseMasterPage.aspx`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-270">The `Response.Redirect` forces the browser to re-request `ChooseMasterPage.aspx`.</span></span>


<span data-ttu-id="03b3c-271">與`ChooseMasterPage.aspx`完成 頁面上，我們最後一項工作是讓`BasePage`指派`MasterPageFile`屬性根據值`MyMasterPage`工作階段變數。</span><span class="sxs-lookup"><span data-stu-id="03b3c-271">With the `ChooseMasterPage.aspx` page complete, our final task is to have `BasePage` assign the `MasterPageFile` property based on the value of the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="03b3c-272">如果未設定的工作階段變數具有`BasePage`預設為`Site.master`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-272">If the Session variable is not set have `BasePage` default to `Site.master`.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample19.cs)]

> [!NOTE]
> <span data-ttu-id="03b3c-273">我移動指派的程式碼`Page`物件的`MasterPageFile`屬性超出`OnPreInit`事件處理常式，並置於兩個不同的方法。</span><span class="sxs-lookup"><span data-stu-id="03b3c-273">I moved the code that assigns the `Page` object's `MasterPageFile` property out of the `OnPreInit` event handler and into two separate methods.</span></span> <span data-ttu-id="03b3c-274">第一個方法， `SetMasterPageFile`，指派`MasterPageFile`屬性設為第二個方法中，所傳回的值`GetMasterPageFileFromSession`。</span><span class="sxs-lookup"><span data-stu-id="03b3c-274">This first method, `SetMasterPageFile`, assigns the `MasterPageFile` property to the value returned by the second method, `GetMasterPageFileFromSession`.</span></span> <span data-ttu-id="03b3c-275">我已`SetMasterPageFile`方法`virtual`，使未來的類別延伸`BasePage`可以選擇性地覆寫該實作自訂邏輯，如有需要。</span><span class="sxs-lookup"><span data-stu-id="03b3c-275">I made the `SetMasterPageFile` method `virtual` so that future classes that extend `BasePage` can optionally override it to implement custom logic, if needed.</span></span> <span data-ttu-id="03b3c-276">我們會看到的覆寫範例`BasePage`的`SetMasterPageFile`下一個教學課程中的屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-276">We'll see an example of overriding `BasePage`'s `SetMasterPageFile` property in the next tutorial.</span></span>


<span data-ttu-id="03b3c-277">此位置的程式碼，請瀏覽`ChooseMasterPage.aspx`頁面。</span><span class="sxs-lookup"><span data-stu-id="03b3c-277">With this code in place, visit the `ChooseMasterPage.aspx` page.</span></span> <span data-ttu-id="03b3c-278">一開始，`Site.master`主版頁面已選取 （請參閱圖 6），但使用者可以選擇不同的主版頁面，從下拉式清單。</span><span class="sxs-lookup"><span data-stu-id="03b3c-278">Initially, the `Site.master` master page is selected (see Figure 6), but the user can pick a different master page from the drop-down list.</span></span>


<span data-ttu-id="03b3c-279">[![內容頁面會顯示使用 Site.master 主版頁面](specifying-the-master-page-programmatically-cs/_static/image17.png)](specifying-the-master-page-programmatically-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-279">[![Content Pages are Displayed Using the Site.master Master Page](specifying-the-master-page-programmatically-cs/_static/image17.png)](specifying-the-master-page-programmatically-cs/_static/image16.png)</span></span>

<span data-ttu-id="03b3c-280">**圖 06**： 內容頁面會顯示使用`Site.master`主版頁面 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-280">**Figure 06**: Content Pages are Displayed Using the `Site.master` Master Page ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image18.png))</span></span>


<span data-ttu-id="03b3c-281">[![內容頁面現在會顯示使用 Alternate.master 主版頁面](specifying-the-master-page-programmatically-cs/_static/image20.png)](specifying-the-master-page-programmatically-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="03b3c-281">[![Content Pages are Now Displayed Using the Alternate.master Master Page](specifying-the-master-page-programmatically-cs/_static/image20.png)](specifying-the-master-page-programmatically-cs/_static/image19.png)</span></span>

<span data-ttu-id="03b3c-282">**圖 07**： 內容頁面會立即顯示使用`Alternate.master`主版頁面 ([按一下以檢視完整大小的影像](specifying-the-master-page-programmatically-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="03b3c-282">**Figure 07**: Content Pages are Now Displayed Using the `Alternate.master` Master Page ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image21.png))</span></span>


## <a name="summary"></a><span data-ttu-id="03b3c-283">總結</span><span class="sxs-lookup"><span data-stu-id="03b3c-283">Summary</span></span>

<span data-ttu-id="03b3c-284">當瀏覽內容的頁面時，其內容的控制項被 fused 使用其主版頁面的 ContentPlaceHolder 控制項。</span><span class="sxs-lookup"><span data-stu-id="03b3c-284">When a content page is visited, its Content controls are fused with its master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="03b3c-285">內容頁面的主版頁面由表示`Page`類別的`MasterPageFile`屬性，指派給`@Page`指示詞的`MasterPageFile`初始化階段時的屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-285">The content page's master page is denoted by the `Page` class's `MasterPageFile` property, which is assigned to the `@Page` directive's `MasterPageFile` attribute during the Initialization stage.</span></span> <span data-ttu-id="03b3c-286">本教學課程中已顯示，我們可以指派到的值為`MasterPageFile`只要我們 PreInit 階段結束之前執行此動作的屬性。</span><span class="sxs-lookup"><span data-stu-id="03b3c-286">As this tutorial showed, we can assign a value to the `MasterPageFile` property as long as we do so before the end of the PreInit stage.</span></span> <span data-ttu-id="03b3c-287">能夠以程式設計方式指定主版頁面開啟更進階的案例，例如動態地繫結至外部因素，包括主版頁面的內容頁面的媒體櫃門。</span><span class="sxs-lookup"><span data-stu-id="03b3c-287">Being able to programmatically specify the master page opens the door for more advanced scenarios, such as dynamically binding a content page to a master page based on external factors.</span></span>

<span data-ttu-id="03b3c-288">祝您程式設計 ！</span><span class="sxs-lookup"><span data-stu-id="03b3c-288">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="03b3c-289">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="03b3c-289">Further Reading</span></span>

<span data-ttu-id="03b3c-290">如需有關在本教學課程所討論的主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="03b3c-290">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="03b3c-291">ASP.NET 網頁生命週期圖表</span><span class="sxs-lookup"><span data-stu-id="03b3c-291">ASP.NET Page Lifecycle Diagram</span></span>](http://emanish.googlepages.com/Asp.Net2.0Lifecycle.PNG)
- [<span data-ttu-id="03b3c-292">ASP.NET 網頁生命週期概觀</span><span class="sxs-lookup"><span data-stu-id="03b3c-292">ASP.NET Page Lifecycle Overview</span></span>](https://msdn.microsoft.com/library/ms178472.aspx)
- [<span data-ttu-id="03b3c-293">ASP.NET 佈景主題和面板概觀</span><span class="sxs-lookup"><span data-stu-id="03b3c-293">ASP.NET Themes and Skins Overview</span></span>](https://msdn.microsoft.com/library/ykzx33wh.aspx)
- [<span data-ttu-id="03b3c-294">主版頁面： 秘訣、 竅門與設陷</span><span class="sxs-lookup"><span data-stu-id="03b3c-294">Master Pages: Tips, Tricks, and Traps</span></span>](http://www.odetocode.com/articles/450.aspx)
- [<span data-ttu-id="03b3c-295">在 ASP.NET 中的主題</span><span class="sxs-lookup"><span data-stu-id="03b3c-295">Themes in ASP.NET</span></span>](http://www.odetocode.com/articles/423.aspx)

### <a name="about-the-author"></a><span data-ttu-id="03b3c-296">關於作者</span><span class="sxs-lookup"><span data-stu-id="03b3c-296">About the Author</span></span>

<span data-ttu-id="03b3c-297">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的多個 ASP/ASP.NET 書籍和 4GuysFromRolla.com 的創辦，目前正在使用 Microsoft Web 技術從 1998 年。</span><span class="sxs-lookup"><span data-stu-id="03b3c-297">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="03b3c-298">Scott 可做為獨立顧問、 訓練和寫入器。</span><span class="sxs-lookup"><span data-stu-id="03b3c-298">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="03b3c-299">他最新的活頁簿[ *Sam 教導您自己 ASP.NET 3.5 24 小時內*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-299">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="03b3c-300">在可到達 Scott [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com)或透過在他的部落格[ http://ScottOnWriting.NET ](http://scottonwriting.net/)。</span><span class="sxs-lookup"><span data-stu-id="03b3c-300">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="03b3c-301">特別感謝</span><span class="sxs-lookup"><span data-stu-id="03b3c-301">Special Thanks To</span></span>

<span data-ttu-id="03b3c-302">許多有用的檢閱者已檢閱本教學課程系列。</span><span class="sxs-lookup"><span data-stu-id="03b3c-302">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="03b3c-303">在此教學課程的前導檢閱者已 Suchi Banerjee。</span><span class="sxs-lookup"><span data-stu-id="03b3c-303">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="03b3c-304">檢閱我即將推出的 MSDN 文件有興趣嗎？</span><span class="sxs-lookup"><span data-stu-id="03b3c-304">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="03b3c-305">如果是這樣，卸除我一行 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="03b3c-305">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="03b3c-306">[上一頁](master-pages-and-asp-net-ajax-cs.md)
> [下一頁](nested-master-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="03b3c-306">[Previous](master-pages-and-asp-net-ajax-cs.md)
[Next](nested-master-pages-cs.md)</span></span>
