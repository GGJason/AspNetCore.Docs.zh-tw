---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/common-configuration-differences-between-development-and-production-cs
title: 一般組態差異開發和生產環境 (C#) |Microsoft 文件
author: rick-anderson
description: 在先前的教學課程中我們會藉由將從開發環境的所有相關檔案複製到生產環境部署我們的網站。 不過，我...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/01/2009
ms.topic: article
ms.assetid: 721a5c37-7e21-48e0-832e-535c6351dcae
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/common-configuration-differences-between-development-and-production-cs
msc.type: authoredcontent
ms.openlocfilehash: 2694e0dba774a5bca13b9acc6b14c3e47226a064
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888587"
---
<a name="common-configuration-differences-between-development-and-production-c"></a><span data-ttu-id="84219-104">一般組態差異開發和生產環境 (C#)</span><span class="sxs-lookup"><span data-stu-id="84219-104">Common Configuration Differences Between Development and Production (C#)</span></span>
====================
<span data-ttu-id="84219-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="84219-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="84219-106">下載 PDF</span><span class="sxs-lookup"><span data-stu-id="84219-106">Download PDF</span></span>](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial05_ConfigDifferences_cs.pdf)

> <span data-ttu-id="84219-107">在先前的教學課程中我們會藉由將從開發環境的所有相關檔案複製到生產環境部署我們的網站。</span><span class="sxs-lookup"><span data-stu-id="84219-107">In earlier tutorials we deployed our website by copying all of the pertinent files from the development environment to the production environment.</span></span> <span data-ttu-id="84219-108">不過，是不常見的才會設定環境，其需要每個環境已經有唯一的 Web.config 檔案的差異。</span><span class="sxs-lookup"><span data-stu-id="84219-108">However, it is not uncommon for there to be configuration differences between environments, which necessitates that each environment have a unique Web.config file.</span></span> <span data-ttu-id="84219-109">本教學課程會檢查在一般組態中的差異，並會查看維護個別的組態資訊的策略。</span><span class="sxs-lookup"><span data-stu-id="84219-109">This tutorial examines typical configuration differences and looks at strategies for maintaining separate configuration information.</span></span>


## <a name="introduction"></a><span data-ttu-id="84219-110">簡介</span><span class="sxs-lookup"><span data-stu-id="84219-110">Introduction</span></span>


<span data-ttu-id="84219-111">最後兩個教學課程逐步進行簡單的 web 應用程式部署作業。</span><span class="sxs-lookup"><span data-stu-id="84219-111">The last two tutorials walked through deploying a simple web application.</span></span> <span data-ttu-id="84219-112">[*部署網站的 FTP 用戶端*](deploying-your-site-using-an-ftp-client-cs.md)教學課程示範了如何使用獨立的 FTP 用戶端的必要檔案複製到生產環境的開發環境。</span><span class="sxs-lookup"><span data-stu-id="84219-112">The [*Deploying Your Site Using an FTP Client*](deploying-your-site-using-an-ftp-client-cs.md) tutorial showed how to use a stand-alone FTP client to copy the necessary files from the development environment up to production.</span></span> <span data-ttu-id="84219-113">先前的教學課程中， [*部署您的網站使用 Visual Studio*](deploying-your-site-using-visual-studio-cs.md)、 查閱在部署使用 Visual Studio 複製網站工具和發佈選項。</span><span class="sxs-lookup"><span data-stu-id="84219-113">The preceding tutorial, [*Deploying Your Site Using Visual Studio*](deploying-your-site-using-visual-studio-cs.md), looked at deployment using Visual Studio's Copy Web Site tool and Publish option.</span></span> <span data-ttu-id="84219-114">在這兩個教學課程中實際執行環境中的每個檔案已在開發環境中的檔案的副本。</span><span class="sxs-lookup"><span data-stu-id="84219-114">In both tutorials every file in the production environment was a copy of a file on the development environment.</span></span> <span data-ttu-id="84219-115">不過，是不常見的實際執行環境，以不同於開發環境中的組態檔。</span><span class="sxs-lookup"><span data-stu-id="84219-115">However, it is not uncommon for configuration files in the production environment to differ from those in the development environment.</span></span> <span data-ttu-id="84219-116">Web 應用程式的組態儲存在`Web.config`檔案，且通常包含 外部資源，例如資料庫、 web 和電子郵件伺服器的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="84219-116">A web application's configuration is stored in the `Web.config` file and typically includes information about external resources, such as database, web, and email servers.</span></span> <span data-ttu-id="84219-117">它也說明了在某些情況下，例如採取的動作處理的例外狀況發生時要執行應用程式的行為。</span><span class="sxs-lookup"><span data-stu-id="84219-117">It also spells out the behavior of the application in certain situations, such as the course of action to take when an unhandled exception occurs.</span></span>

<span data-ttu-id="84219-118">部署 web 應用程式時務必正確的設定資訊結束在生產環境中。</span><span class="sxs-lookup"><span data-stu-id="84219-118">When deploying a web application it is important that the correct configuration information end up in the production environment.</span></span> <span data-ttu-id="84219-119">在大部分情況下`Web.config`開發環境中的檔案無法複製到實際執行環境，做為是。</span><span class="sxs-lookup"><span data-stu-id="84219-119">In most cases the `Web.config` file in the development environment cannot be copied to the production environment as-is.</span></span> <span data-ttu-id="84219-120">相反地，自訂的版本`Web.config`必須上傳到生產環境。</span><span class="sxs-lookup"><span data-stu-id="84219-120">Instead, a customized version of `Web.config` needs to be uploaded to production.</span></span> <span data-ttu-id="84219-121">本教學課程簡短檢閱的一些較常見的組態差異;它也摘要列出一些技術來維護環境之間的不同的組態資訊。</span><span class="sxs-lookup"><span data-stu-id="84219-121">This tutorial briefly reviews some of the more common configuration differences; it also summarizes some techniques for maintaining different configuration information between the environments.</span></span>

## <a name="typical-configuration-differences-between-the-development-and-production-environments"></a><span data-ttu-id="84219-122">一般設定開發和生產環境之間的差異</span><span class="sxs-lookup"><span data-stu-id="84219-122">Typical Configuration Differences Between the Development and Production Environments</span></span>

<span data-ttu-id="84219-123">`Web.config`檔案包含 ASP.NET 應用程式的組態資訊的分類。</span><span class="sxs-lookup"><span data-stu-id="84219-123">The `Web.config` file includes an assortment of configuration information for an ASP.NET application.</span></span> <span data-ttu-id="84219-124">此組態資訊的某些部分是相同的環境。</span><span class="sxs-lookup"><span data-stu-id="84219-124">Some of this configuration information is the same regardless of the environment.</span></span> <span data-ttu-id="84219-125">例如，驗證設定和 URL 授權規則拼出`Web.config`檔案的`<authentication>`和`<authorization>`項目通常是相同的不論環境。</span><span class="sxs-lookup"><span data-stu-id="84219-125">For instance, the authentication settings and URL authorization rules spelled out in the `Web.config` file's `<authentication>` and `<authorization>` elements are usually the same regardless of the environment.</span></span> <span data-ttu-id="84219-126">但是，根據環境的其他組態資訊-例如，外部資源的相關資訊通常有所不同。</span><span class="sxs-lookup"><span data-stu-id="84219-126">But other configuration information - such as information about external resources - typically differs depending on the environment.</span></span>

<span data-ttu-id="84219-127">資料庫連接字串是根據環境的基本和不同的組態資訊的使用範例。</span><span class="sxs-lookup"><span data-stu-id="84219-127">Database connections strings are a prime example of configuration information that differs based on the environment.</span></span> <span data-ttu-id="84219-128">當 web 應用程式資料庫與伺服器通訊，必須先建立連接，而且，只透過[連接字串](http://www.connectionstrings.com/Articles/Show/what-is-a-connection-string)。</span><span class="sxs-lookup"><span data-stu-id="84219-128">When a web application communicates with a database server it must first establish a connection, and that is achieved through a [connection string](http://www.connectionstrings.com/Articles/Show/what-is-a-connection-string).</span></span> <span data-ttu-id="84219-129">雖然也可以用硬式編碼直接在網頁或連接至資料庫的程式碼中的資料庫連接字串，但是建議您最好將它放入`Web.config`的[`<connectionStrings>`元素](https://msdn.microsoft.com/library/bf7sd233.aspx)使連接字串資訊是在單一且集中式位置。</span><span class="sxs-lookup"><span data-stu-id="84219-129">While it is possible to hard-code the database connection string directly in the web pages or the code that connects to the database, it is best to place it `Web.config`'s [`<connectionStrings>` element](https://msdn.microsoft.com/library/bf7sd233.aspx) so that the connection string information is in a single, centralized location.</span></span> <span data-ttu-id="84219-130">有時候不同的資料庫用在開發期間比用在生產環境。因此，連接字串資訊必須是唯一的每個環境。</span><span class="sxs-lookup"><span data-stu-id="84219-130">Oftentimes a different database is used during development than is used in production; consequently, the connection string information must be unique for each environment.</span></span>

> [!NOTE]
> <span data-ttu-id="84219-131">未來的教學課程中，瀏覽部署資料導向應用程式，此時我們將探討如何將資料庫連接字串儲存在組態檔中的細節。</span><span class="sxs-lookup"><span data-stu-id="84219-131">Future tutorials explore deploying data-driven applications, at which point we'll dive into the specifics of how database connection strings are stored in the configuration file.</span></span>


<span data-ttu-id="84219-132">本質上不同的開發和生產環境的行為。</span><span class="sxs-lookup"><span data-stu-id="84219-132">The intended behavior of the development and production environments differs substantially.</span></span> <span data-ttu-id="84219-133">在開發環境中的 web 應用程式正在建立、 測試及偵錯的開發人員一小群。</span><span class="sxs-lookup"><span data-stu-id="84219-133">A web application in the development environment is being created, tested, and debugged by a small group of developers.</span></span> <span data-ttu-id="84219-134">在生產環境中許多不同的同時使用者造訪該相同的應用程式。</span><span class="sxs-lookup"><span data-stu-id="84219-134">In the production environment that same application is being visited by many different simultaneous users.</span></span> <span data-ttu-id="84219-135">ASP.NET 包含數個功能，可協助開發人員在測試和偵錯應用程式，但這些功能應該停用的效能和安全性理由，在實際執行環境中。</span><span class="sxs-lookup"><span data-stu-id="84219-135">ASP.NET includes a number of features that help developers in testing and debugging an application, but these features should be disabled for performance and security reasons when in the production environment.</span></span> <span data-ttu-id="84219-136">讓我們看看一些此類組態設定。</span><span class="sxs-lookup"><span data-stu-id="84219-136">Let's look at a few such configuration settings.</span></span>

### <a name="configuration-settings-that-impact-performance"></a><span data-ttu-id="84219-137">會影響效能的組態設定</span><span class="sxs-lookup"><span data-stu-id="84219-137">Configuration Settings That Impact Performance</span></span>

<span data-ttu-id="84219-138">當瀏覽 ASP.NET 網頁時第一次 （或第一次變更後），其宣告式標記必須先轉換成類別，這個類別必須進行編譯。</span><span class="sxs-lookup"><span data-stu-id="84219-138">When an ASP.NET page is visited for the first time (or the first time after it has changed), its declarative markup must be converted into a class and this class must be compiled.</span></span> <span data-ttu-id="84219-139">如果 web 應用程式會使用自動編譯網頁的程式碼後置類別需要進行編譯，太。</span><span class="sxs-lookup"><span data-stu-id="84219-139">If the web application uses automatic compilation then the page's code-behind class needs to be compiled, too.</span></span> <span data-ttu-id="84219-140">您可以設定各種編譯選項，透過`Web.config`檔案的[`<compilation>`元素](https://msdn.microsoft.com/library/s10awwz0.aspx)。</span><span class="sxs-lookup"><span data-stu-id="84219-140">You can configure an assortment of compilation options via the `Web.config` file's [`<compilation>` element](https://msdn.microsoft.com/library/s10awwz0.aspx).</span></span>

<span data-ttu-id="84219-141">偵錯屬性是最重要的屬性中的其中一個`<compilation>`項目。</span><span class="sxs-lookup"><span data-stu-id="84219-141">The debug attribute is one of the most important attributes in the `<compilation>` element.</span></span> <span data-ttu-id="84219-142">如果`debug`屬性設定為"true"，則在已編譯的組件包含偵錯 Visual Studio 中的應用程式時，所需要的偵錯符號。</span><span class="sxs-lookup"><span data-stu-id="84219-142">If the `debug` attribute is set to "true" then the compiled assemblies include debug symbols, which are needed when debugging an application in Visual Studio.</span></span> <span data-ttu-id="84219-143">但偵錯符號增加組件的大小，並執行程式碼時造成額外的記憶體需求。</span><span class="sxs-lookup"><span data-stu-id="84219-143">But debug symbols increase the size of the assembly and impose additional memory requirements when running the code.</span></span> <span data-ttu-id="84219-144">此外，當`debug`屬性設定為"true"傳回的任何內容`WebResource.axd`未快取，這表示，每次使用者存取他們需要重新下載所傳回的靜態內容網頁`WebResource.axd`。</span><span class="sxs-lookup"><span data-stu-id="84219-144">Furthermore, when the `debug` attribute is set to "true" any content returned by `WebResource.axd` is not cached, meaning that each time a user visits a page they will need to re-download the static content returned by `WebResource.axd`.</span></span>

> [!NOTE]
> <span data-ttu-id="84219-145">`WebResource.axd` 是內建的 HTTP 處理常式在 ASP.NET 2.0 引進伺服器控制項用來擷取內嵌的資源，例如指令碼檔案、 影像、 CSS 檔案和其他內容。</span><span class="sxs-lookup"><span data-stu-id="84219-145">`WebResource.axd` is a built-in HTTP Handler introduced in ASP.NET 2.0 that server controls use to retrieve embedded resources, such as script files, images, CSS files, and other content.</span></span> <span data-ttu-id="84219-146">如需有關如何`WebResource.axd`運作以及如何使用它來存取內嵌的資源的自訂伺服器控制項，請參閱[存取內嵌資源透過 URL 使用`WebResource.axd` ](http://aspnet.4guysfromrolla.com/articles/080906-1.aspx)。</span><span class="sxs-lookup"><span data-stu-id="84219-146">For more information on how `WebResource.axd` works and how you can use it to access embedded resources from your custom server controls, see [Accessing Embedded Resources Through a URL Using `WebResource.axd`](http://aspnet.4guysfromrolla.com/articles/080906-1.aspx).</span></span>


<span data-ttu-id="84219-147">`<compilation>`項目的`debug`屬性通常設定為"true"開發環境中。</span><span class="sxs-lookup"><span data-stu-id="84219-147">The `<compilation>` element's `debug` attribute is usually set to "true" in the development environment.</span></span> <span data-ttu-id="84219-148">事實上，這個屬性必須設定為"true"，才能偵錯 web 應用程式。如果您嘗試偵錯 ASP.NET 應用程式從 Visual Studio 和`debug`屬性設定為"false"時，Visual Studio 會顯示訊息，說明應用程式，無法偵錯直到`debug`屬性設為"true"，並將若要進行這項變更為您的方案。</span><span class="sxs-lookup"><span data-stu-id="84219-148">In fact, this attribute must be set to "true" in order to debug a web application; if you try to debug an ASP.NET application from Visual Studio and the `debug` attribute is set to "false", Visual Studio will display a message explaining that the application cannot be debugged until the `debug` attribute is set to "true" and will offer to make this change for you.</span></span>

<span data-ttu-id="84219-149">您應該**從未**有`debug`屬性設定為"true"，在生產環境中，因為它對效能的影響。</span><span class="sxs-lookup"><span data-stu-id="84219-149">You should **never** have the `debug` attribute set to "true" in a production environment because of its impact on performance.</span></span> <span data-ttu-id="84219-150">本主題的更完整討論，請參閱[Scott Guthrie](https://weblogs.asp.net/scottgu/)的部落格文章：[不執行實際執行 ASP.NET 應用程式與`debug="true"`啟用](https://weblogs.asp.net/scottgu/442448)。</span><span class="sxs-lookup"><span data-stu-id="84219-150">For a more thorough discussion on this topic, refer to [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Don't Run Production ASP.NET Applications With `debug="true"` Enabled](https://weblogs.asp.net/scottgu/442448).</span></span>

### <a name="custom-errors-and-tracing"></a><span data-ttu-id="84219-151">自訂的錯誤和追蹤</span><span class="sxs-lookup"><span data-stu-id="84219-151">Custom Errors and Tracing</span></span>

<span data-ttu-id="84219-152">ASP.NET 應用程式中發生未處理的例外狀況時它會顯示最多三個項目的其中一個時間點發生執行階段：</span><span class="sxs-lookup"><span data-stu-id="84219-152">When an unhandled exception occurs in an ASP.NET application it bubbles up to the runtime at which point one of three things happens:</span></span>

- <span data-ttu-id="84219-153">會顯示一般的執行階段錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="84219-153">A generic runtime error message is displayed.</span></span> <span data-ttu-id="84219-154">此頁面會通知使用者，但執行階段錯誤，但不提供任何錯誤的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="84219-154">This page informs the user that there was a runtime error, but does not provide any details about the error.</span></span>
- <span data-ttu-id="84219-155">會顯示例外狀況詳細資料訊息，其中包含只擲回的例外狀況的資訊。</span><span class="sxs-lookup"><span data-stu-id="84219-155">An exception details message is displayed, which includes information on the exception that was just thrown.</span></span>
- <span data-ttu-id="84219-156">會顯示自訂錯誤網頁，這是 ASP.NET 網頁，您建立顯示您想要的任何訊息。</span><span class="sxs-lookup"><span data-stu-id="84219-156">A custom error page is displayed, which is an ASP.NET page that you create that displays any message you desire.</span></span>

<span data-ttu-id="84219-157">遇到未處理的例外狀況時的事取決於`Web.config`檔案的[`<customErrors>`區段](https://msdn.microsoft.com/library/h0hfz6fc.aspx)。</span><span class="sxs-lookup"><span data-stu-id="84219-157">What happens in the face of an unhandled exception depends on the `Web.config` file's [`<customErrors>` section](https://msdn.microsoft.com/library/h0hfz6fc.aspx).</span></span>

<span data-ttu-id="84219-158">在開發和測試應用程式時這樣做有助於查看瀏覽器中的任何例外狀況的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="84219-158">When developing and testing an application it helps to see details of any exception in the browser.</span></span> <span data-ttu-id="84219-159">不過，實際執行應用程式中顯示例外狀況詳細資料是潛在的安全性風險。</span><span class="sxs-lookup"><span data-stu-id="84219-159">However, showing exception details in an application on production is a potential security risk.</span></span> <span data-ttu-id="84219-160">此外，它是 unflattering，而且可讓您看起來不夠專業的網站。</span><span class="sxs-lookup"><span data-stu-id="84219-160">Moreover, it's unflattering and makes your website look unprofessional.</span></span> <span data-ttu-id="84219-161">在理想情況下，期間發生未處理的例外狀況在開發環境中的 web 應用程式會顯示例外狀況的詳細資料時相同的應用程式在生產環境中會顯示自訂錯誤網頁。</span><span class="sxs-lookup"><span data-stu-id="84219-161">Ideally, in the event of an unhandled exception a web application in the development environment will show the exception's details while the same application in production will show a custom error page.</span></span>

> [!NOTE]
> <span data-ttu-id="84219-162">預設值`<customErrors>`區段設定例外狀況詳細資料訊息頁面所造訪透過 localhost，且否則示範一般執行階段錯誤頁面時，才會顯示。</span><span class="sxs-lookup"><span data-stu-id="84219-162">The default `<customErrors>` section setting shows the exception details message only when the page is being visited through localhost, and shows the generic runtime error page otherwise.</span></span> <span data-ttu-id="84219-163">這不是理想的做法，但它以確保知道的預設行為並不會顯示為非本機訪客的例外狀況詳細資料。</span><span class="sxs-lookup"><span data-stu-id="84219-163">This isn't ideal, but it's assuring to know that the default behavior doesn't reveal exception details to non-local visitors.</span></span> <span data-ttu-id="84219-164">未來的教學課程會檢查`<customErrors>`> 一節中更多詳細資料，並說明如何將自訂錯誤網頁顯示在生產環境中發生的錯誤。</span><span class="sxs-lookup"><span data-stu-id="84219-164">A future tutorial examines the `<customErrors>` section in more detail and shows how to have a custom error page shown when an error occurs in production.</span></span>


<span data-ttu-id="84219-165">追蹤另一項 ASP.NET 功能，在開發期間很有用。</span><span class="sxs-lookup"><span data-stu-id="84219-165">Another ASP.NET feature that is useful during development is tracing.</span></span> <span data-ttu-id="84219-166">追蹤，如果啟用，記錄每個連入要求的相關資訊，並提供特殊的網頁上， `Trace.axd`，來檢視最近的要求詳細資料。</span><span class="sxs-lookup"><span data-stu-id="84219-166">Tracing, if enabled, records information about each incoming request and provides a special web page, `Trace.axd`, for viewing recent request details.</span></span> <span data-ttu-id="84219-167">您可以開啟和設定追蹤透過[`<trace>`元素](https://msdn.microsoft.com/library/6915t83k.aspx)中`Web.config`。</span><span class="sxs-lookup"><span data-stu-id="84219-167">You can turn on and configure tracing via the [`<trace>` element](https://msdn.microsoft.com/library/6915t83k.aspx) in `Web.config`.</span></span>

<span data-ttu-id="84219-168">如果您啟用追蹤，請務必確定它已停用在生產環境中。</span><span class="sxs-lookup"><span data-stu-id="84219-168">If you enable tracing make sure that it is disabled in production.</span></span> <span data-ttu-id="84219-169">追蹤資訊包括 cookie、 工作階段資料，以及其他潛在的敏感資訊，因此務必停用在生產環境中的追蹤。</span><span class="sxs-lookup"><span data-stu-id="84219-169">Because the trace information includes cookies, session data, and other potentially sensitive information, it is important to disable tracing in production.</span></span> <span data-ttu-id="84219-170">好消息是，根據預設，已停用追蹤和`Trace.axd`檔案僅可透過 localhost 存取。</span><span class="sxs-lookup"><span data-stu-id="84219-170">The good news is that, by default, tracing is disabled and the `Trace.axd` file is only accessible through localhost.</span></span> <span data-ttu-id="84219-171">如果您變更這些預設設定，在開發中確定，它們會關閉回生產環境中。</span><span class="sxs-lookup"><span data-stu-id="84219-171">If you change these default settings in development make sure that they are turned back off in production.</span></span>

## <a name="techniques-for-maintaining-separate-configuration-information"></a><span data-ttu-id="84219-172">維護個別的組態資訊的技術</span><span class="sxs-lookup"><span data-stu-id="84219-172">Techniques for Maintaining Separate Configuration Information</span></span>

<span data-ttu-id="84219-173">在開發和生產環境中具有不同的組態設定變得非常複雜的部署程序。</span><span class="sxs-lookup"><span data-stu-id="84219-173">Having different configuration settings in the development and production environments complicates the deployment process.</span></span> <span data-ttu-id="84219-174">在先前的兩個教學課程部署程序涉及複製所有必要的檔案從開發到生產環境中，但該方法僅適用於組態資訊是否兩個環境中相同。</span><span class="sxs-lookup"><span data-stu-id="84219-174">In the previous two tutorials the deployment process involved copying all of the necessary files from development to production, but that approach only works if the configuration information is the same in both environments.</span></span> <span data-ttu-id="84219-175">有各種不同的部署具有不同的組態資訊的應用程式的技術。</span><span class="sxs-lookup"><span data-stu-id="84219-175">There are a variety of techniques for deploying an application with varying configuration information.</span></span> <span data-ttu-id="84219-176">讓我們的目錄部分託管的 web 應用程式的這些選項。</span><span class="sxs-lookup"><span data-stu-id="84219-176">Let's catalog some of these options for hosted web applications.</span></span>

### <a name="manually-deploying-the-production-environment-configuration-file"></a><span data-ttu-id="84219-177">手動部署生產環境的組態檔</span><span class="sxs-lookup"><span data-stu-id="84219-177">Manually Deploying the Production Environment Configuration File</span></span>

<span data-ttu-id="84219-178">最簡單的方式會維護兩個版本的`Web.config`檔案： 一個用於開發環境，一個用於實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="84219-178">The simplest approach is to maintain two versions of the `Web.config` file: one for the development environment and one for the production environment.</span></span> <span data-ttu-id="84219-179">將所有檔案複製到實際執行伺服器，在開發環境中部署網站至生產環境都需要*除了*如`Web.config`檔案。</span><span class="sxs-lookup"><span data-stu-id="84219-179">Deploying a site to production entails copying all of the files to the production server in the development environment *except* for the `Web.config` file.</span></span> <span data-ttu-id="84219-180">相反地，實際執行環境專屬`Web.config`會將檔案複製到生產環境。</span><span class="sxs-lookup"><span data-stu-id="84219-180">Instead, the production environment-specific `Web.config` file would be copied to production.</span></span>

<span data-ttu-id="84219-181">此方法不是非常複雜，但很容易實作，因為不常變更的組態資訊。</span><span class="sxs-lookup"><span data-stu-id="84219-181">This approach is not very sophisticated, but it is easy to implement because configuration information changes infrequently.</span></span> <span data-ttu-id="84219-182">它適合用於應用程式與開發小組的單一 web 伺服器上主控的和不常變更其組態資訊。</span><span class="sxs-lookup"><span data-stu-id="84219-182">It works best for applications with a small development team that are hosted on a single web server and whose configuration information is infrequently changed.</span></span> <span data-ttu-id="84219-183">手動部署使用獨立的 FTP 用戶端應用程式檔案時，它是最 tenable。</span><span class="sxs-lookup"><span data-stu-id="84219-183">It's most tenable when manually deploying the application files using a stand-alone FTP client.</span></span> <span data-ttu-id="84219-184">使用 Visual Studio 複製網站工具或 [發佈] 選項時您必須先部署特定交換`Web.config`部署之前，請以實際執行特定檔案，然後再將其交換部署完成之後。</span><span class="sxs-lookup"><span data-stu-id="84219-184">When using Visual Studio's Copy Web Site tool or Publish option you'll need to first swap out the deployment-specific `Web.config` file with the production-specific one before deploying, and then swap them back after deployment completes.</span></span>

### <a name="change-the-configuration-during-the-build-or-deployment-process"></a><span data-ttu-id="84219-185">變更組建或部署程序期間的設定</span><span class="sxs-lookup"><span data-stu-id="84219-185">Change the Configuration During the Build or Deployment Process</span></span>

<span data-ttu-id="84219-186">討論到目前為止已假設特定組建和部署處理。</span><span class="sxs-lookup"><span data-stu-id="84219-186">The discussions thus far have assumed an ad-hoc build and deployment process.</span></span> <span data-ttu-id="84219-187">許多較大的軟體專案擁有更正式的處理程序會使用開放原始碼，首頁成長或協力廠商工具。</span><span class="sxs-lookup"><span data-stu-id="84219-187">Many larger software projects have more formalized processes that make use of open-source, home-grown, or third-party tools.</span></span> <span data-ttu-id="84219-188">這類專案，您可能可以自訂推入到生產環境之前適當地修改的組態資訊的組建或部署程序。</span><span class="sxs-lookup"><span data-stu-id="84219-188">For such projects you can likely customize the build or deployment process to appropriately modify the configuration information before it is pushed to production.</span></span> <span data-ttu-id="84219-189">如果您要建置您 web 應用程式使用[MSBuild](http://en.wikipedia.org/wiki/MSBuild)， [NAnt](http://nant.sourceforge.net/)，或某些其他建置工具，您可以有可能加入建置步驟修改`Web.config`檔案以加入實際執行環境專屬的設定。</span><span class="sxs-lookup"><span data-stu-id="84219-189">If you build your web application using [MSBuild](http://en.wikipedia.org/wiki/MSBuild), [NAnt](http://nant.sourceforge.net/), or some other build tool, you can likely add a build step to modify the `Web.config` file to include the production-specific settings.</span></span> <span data-ttu-id="84219-190">或您的部署工作流程無法以程式設計方式連接至原始檔控制伺服器並擷取適當`Web.config`檔案。</span><span class="sxs-lookup"><span data-stu-id="84219-190">Or your deployment workflow could programmatically connect to the source control server and retrieve the appropriate `Web.config` file.</span></span>

<span data-ttu-id="84219-191">如需取得適當的組態資訊到生產環境的實際方法廣泛依據您的工具和工作流程而異。</span><span class="sxs-lookup"><span data-stu-id="84219-191">The actual approach for getting the appropriate configuration information to production varies widely based on your tools and workflow.</span></span> <span data-ttu-id="84219-192">因此，我們不會深入本主題將進一步。</span><span class="sxs-lookup"><span data-stu-id="84219-192">As such, we will not delve into this topic further.</span></span> <span data-ttu-id="84219-193">如果您使用 MSBuild 或 NAnt 受歡迎的建置工具您可以找到部署文件和教學課程特有網頁搜尋透過這些工具。</span><span class="sxs-lookup"><span data-stu-id="84219-193">If you are using a popular build tool like MSBuild or NAnt you can find deployment articles and tutorials specific to these tools through a web search.</span></span>

### <a name="managing-configuration-differences-via-the-web-deployment-project-add-in"></a><span data-ttu-id="84219-194">管理組態差異透過 Web 部署專案增益集</span><span class="sxs-lookup"><span data-stu-id="84219-194">Managing Configuration Differences via the Web Deployment Project Add-In</span></span>

<span data-ttu-id="84219-195">在 2006 Microsoft Web 開發專案中的發行適用於 Visual Studio 2005。</span><span class="sxs-lookup"><span data-stu-id="84219-195">In 2006 Microsoft released the Web Development Project Add-In for Visual Studio 2005.</span></span> <span data-ttu-id="84219-196">Visual Studio 2008 增益集已於 2008年發行。</span><span class="sxs-lookup"><span data-stu-id="84219-196">An Add-In for Visual Studio 2008 was released in 2008.</span></span> <span data-ttu-id="84219-197">此增益集可讓 ASP.NET 開發人員建立個別的 Web 部署專案連同其 web 應用程式專案，建置時、 明確編譯 web 應用程式並複製檔案將部署到本機的輸出目錄。</span><span class="sxs-lookup"><span data-stu-id="84219-197">This Add-In allows for ASP.NET developers to create a separate Web Deployment Project alongside their web application project that, when built, explicitly compiles the web application and copies the files to deploy to a local output directory.</span></span> <span data-ttu-id="84219-198">Web 應用程式專案會在幕後使用 MSBuild。</span><span class="sxs-lookup"><span data-stu-id="84219-198">The Web Application Project uses MSBuild behind the scenes.</span></span>

<span data-ttu-id="84219-199">根據預設，在開發環境的`Web.config`檔案複製到輸出目錄中，但您可以設定自訂 Web 部署專案</span><span class="sxs-lookup"><span data-stu-id="84219-199">By default, the development environment's `Web.config` file is copied to the output directory, but you can setup the Web Deployment Project to customize the</span></span>

<span data-ttu-id="84219-200">取得以下列方式複製到這個目錄的設定資訊：</span><span class="sxs-lookup"><span data-stu-id="84219-200">configuration information that gets copied to this directory in the following ways:</span></span>

- <span data-ttu-id="84219-201">透過`Web.config`檔案 > 一節更換時，您可以在其中指定要取代的區段和 XML 檔案，其中包含取代文字。</span><span class="sxs-lookup"><span data-stu-id="84219-201">Via `Web.config` file section replacement, in which you specify the section to replace and an XML file that contains the replacement text.</span></span>
- <span data-ttu-id="84219-202">所提供的外部組態原始程式檔的路徑。</span><span class="sxs-lookup"><span data-stu-id="84219-202">By providing a path to an external configuration source file.</span></span> <span data-ttu-id="84219-203">選取此選項，Web 部署專案複製特定`Web.config`到輸出目錄的檔案 (而非`Web.config`開發環境中使用的檔案)。</span><span class="sxs-lookup"><span data-stu-id="84219-203">With this option selected, the Web Deployment Project copies a particular `Web.config` file to the output directory (rather than the `Web.config` file used in the development environment).</span></span>
- <span data-ttu-id="84219-204">將自訂的規則加入至 Web 部署專案所使用的 MSBuild 檔案。</span><span class="sxs-lookup"><span data-stu-id="84219-204">By adding custom rules to the MSBuild file used by the Web Deployment Project.</span></span>

<span data-ttu-id="84219-205">若要部署的 web 應用程式的組建 Web 部署專案，然後從專案的輸出資料夾複製檔案到生產環境。</span><span class="sxs-lookup"><span data-stu-id="84219-205">To deploy the web application build the Web Deployment Project and then copy the files from the project's output folder to the production environment.</span></span>

<span data-ttu-id="84219-206">若要深入了解使用 Web 部署專案的詳細資訊請參閱[Web 部署專案本文](https://msdn.microsoft.com/magazine/cc163448.aspx)從 2007 年 4 月發行的[MSDN Magazine](https://msdn.microsoft.com/magazine/default.aspx)，或洽詢進一步閱讀一節中的連結本教學課程的結尾。</span><span class="sxs-lookup"><span data-stu-id="84219-206">To learn more about using the Web Deployment Project check out [this Web Deployment Projects article](https://msdn.microsoft.com/magazine/cc163448.aspx) from the April 2007 issue of [MSDN Magazine](https://msdn.microsoft.com/magazine/default.aspx), or consult the links in the Further Reading section at the end of this tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="84219-207">因為 Web 部署專案會實作為 Visual Studio 增益集，而且 Visual Studio Express Edition （包括 Visual Web Developer） 不支援增益集，您無法使用隨 Visual Web Developer Web 部署專案。</span><span class="sxs-lookup"><span data-stu-id="84219-207">You cannot use the Web Deployment Project with Visual Web Developer because the Web Deployment Project is implemented as a Visual Studio Add-In and the Visual Studio Express Editions (including Visual Web Developer) do not support Add-Ins.</span></span>


## <a name="summary"></a><span data-ttu-id="84219-208">總結</span><span class="sxs-lookup"><span data-stu-id="84219-208">Summary</span></span>

<span data-ttu-id="84219-209">外部資源，在開發中的 web 應用程式的行為是通常不同於相同的應用程式處於生產環境。</span><span class="sxs-lookup"><span data-stu-id="84219-209">The external resources and behavior of a web application in development are typically different than when the same application is in production.</span></span> <span data-ttu-id="84219-210">例如，資料庫連接字串、 編譯選項和處理的例外狀況通常發生時的行為不同環境之間。</span><span class="sxs-lookup"><span data-stu-id="84219-210">For instance, database connection strings, compilation options, and the behavior when an unhandled exception occurs commonly differ between environments.</span></span> <span data-ttu-id="84219-211">部署程序必須配合這些差異。</span><span class="sxs-lookup"><span data-stu-id="84219-211">The deployment process must accommodate these differences.</span></span> <span data-ttu-id="84219-212">如同我們在本教學課程所討論，最簡單的方法是手動複製到生產環境的其他設定檔案。</span><span class="sxs-lookup"><span data-stu-id="84219-212">As we discussed in this tutorial, the simplest approach is to manually copy an alternate configuration file to the production environment.</span></span> <span data-ttu-id="84219-213">可能會有更有質感的解決方案或搭配更正式的組建或部署程序可容納這類自訂項目時使用的 Web 部署專案增益集。</span><span class="sxs-lookup"><span data-stu-id="84219-213">More elegant solutions are possible when using the Web Deployment Project Add-In or with a more formalized build or deployment process that can accommodate such customizations.</span></span>

<span data-ttu-id="84219-214">祝您程式設計 ！</span><span class="sxs-lookup"><span data-stu-id="84219-214">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="84219-215">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="84219-215">Further Reading</span></span>

<span data-ttu-id="84219-216">如需有關在本教學課程所討論的主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="84219-216">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="84219-217">連接字串說明</span><span class="sxs-lookup"><span data-stu-id="84219-217">Connection Strings Explained</span></span>](http://www.connectionstrings.com/Articles/Show/what-is-a-connection-string)
- [<span data-ttu-id="84219-218">資料庫連接字串 @ ConnectionStrings.com</span><span class="sxs-lookup"><span data-stu-id="84219-218">Database Connection Strings @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="84219-219">不執行實際執行 ASP.NET 應用程式與`debug="true"`啟用</span><span class="sxs-lookup"><span data-stu-id="84219-219">Don't Run Production ASP.NET Applications with `debug="true"` Enabled</span></span>](https://weblogs.asp.net/scottgu/Don_1920_t-run-production-ASP.NET-Applications-with-debug_3D001D20_true_1D20_-enabled)
- [<span data-ttu-id="84219-220">依正常程序回應未處理的例外狀況-顯示使用者易記的錯誤網頁</span><span class="sxs-lookup"><span data-stu-id="84219-220">Gracefully Responding to Unhandled Exceptions - Displaying User-Friendly Error Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/090606-1.aspx)
- [<span data-ttu-id="84219-221">如何： 使用 Visual Studio 2008 Web 部署專案嗎？</span><span class="sxs-lookup"><span data-stu-id="84219-221">How Do I: Use a Visual Studio 2008 Web Deployment Project?</span></span>](../../../videos/how-do-i/how-do-i-use-a-visual-studio-2008-web-deployment-project.md)
- [<span data-ttu-id="84219-222">部署資料庫時，索引鍵的組態設定</span><span class="sxs-lookup"><span data-stu-id="84219-222">Key Configuration Settings When Deploying a Database</span></span>](http://aspnet.4guysfromrolla.com/articles/121008-1.aspx)
- <span data-ttu-id="84219-223">[Visual Studio 2008 Web 部署專案下載](https://www.microsoft.com/downloads/details.aspx?FamilyId=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&amp;displaylang=en) | [Visual Studio 2005 Web 部署專案下載項目](https://download.microsoft.com/download/9/4/9/9496adc4-574e-4043-bb70-bc841e27f13c/WebDeploymentSetup.msi)</span><span class="sxs-lookup"><span data-stu-id="84219-223">[Visual Studio 2008 Web Deployment Projects Download](https://www.microsoft.com/downloads/details.aspx?FamilyId=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&amp;displaylang=en) | [Visual Studio 2005 Web Deployment Projects Download](https://download.microsoft.com/download/9/4/9/9496adc4-574e-4043-bb70-bc841e27f13c/WebDeploymentSetup.msi)</span></span>
- <span data-ttu-id="84219-224">[VS 2008 Web 部署專案](https://weblogs.asp.net/scottgu/archive/2005/11/06/429723.aspx) | [VS 2008 Web 部署專案支援發行](https://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)</span><span class="sxs-lookup"><span data-stu-id="84219-224">[VS 2008 Web Deployment Projects](https://weblogs.asp.net/scottgu/archive/2005/11/06/429723.aspx) | [VS 2008 Web Deployment Project Support Released](https://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)</span></span>
- [<span data-ttu-id="84219-225">Web 部署專案</span><span class="sxs-lookup"><span data-stu-id="84219-225">Web Deployment Projects</span></span>](https://msdn.microsoft.com/magazine/cc163448.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="84219-226">[上一頁](deploying-your-site-using-visual-studio-cs.md)
> [下一頁](core-differences-between-iis-and-the-asp-net-development-server-cs.md)</span><span class="sxs-lookup"><span data-stu-id="84219-226">[Previous](deploying-your-site-using-visual-studio-cs.md)
[Next](core-differences-between-iis-and-the-asp-net-development-server-cs.md)</span></span>
