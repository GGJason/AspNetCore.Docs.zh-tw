---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-partial-page-updates-with-asp-net-ajax
title: 了解部分頁面更新與 ASP.NET AJAX |Microsoft 文件
author: scottcate
description: 可能是最明顯的 ASP.NET AJAX 擴充功能的特色就是能夠進行部分或累加式頁面更新而不會進行完整回傳至 t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/28/2008
ms.topic: article
ms.assetid: 54d9df99-1161-4899-b4e8-2679c85915e7
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-partial-page-updates-with-asp-net-ajax
msc.type: authoredcontent
ms.openlocfilehash: 91a98bf1c9a71ae84c569f7ae40930422cb652e0
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/06/2018
ms.locfileid: "30891317"
---
<a name="understanding-partial-page-updates-with-aspnet-ajax"></a><span data-ttu-id="1b303-103">了解部分頁面更新與 ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="1b303-103">Understanding Partial Page Updates with ASP.NET AJAX</span></span>
====================
<span data-ttu-id="1b303-104">由[Scott 類別](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="1b303-104">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="1b303-105">下載 PDF</span><span class="sxs-lookup"><span data-stu-id="1b303-105">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial01_Partial_Page_Updates_cs.pdf)

> <span data-ttu-id="1b303-106">可能是最明顯的 ASP.NET AJAX 擴充功能的特色是進行部分或累加式頁面更新而不需要執行完整頁面的回傳至伺服器，沒有程式碼變更和最少的標記變更的能力。</span><span class="sxs-lookup"><span data-stu-id="1b303-106">Perhaps the most visible feature of the ASP.NET AJAX Extensions is the ability to do a partial or incremental page updates without doing a full postback to the server, with no code changes and minimal markup changes.</span></span> <span data-ttu-id="1b303-107">優點相當廣泛 – 的 （例如 Adobe Flash 或 Windows Media） 您多媒體狀態保持不變，可降低頻寬成本，而且用戶端不會遇到重繪閃動通常與回傳相關。</span><span class="sxs-lookup"><span data-stu-id="1b303-107">The advantages are extensive – the state of your multimedia (such as Adobe Flash or Windows Media) is unchanged, bandwidth costs are reduced, and the client does not experience the flicker usually associated with a postback.</span></span>


## <a name="introduction"></a><span data-ttu-id="1b303-108">簡介</span><span class="sxs-lookup"><span data-stu-id="1b303-108">Introduction</span></span>

<span data-ttu-id="1b303-109">Microsoft ASP.NET 技術，帶來物件導向和事件驅動的程式設計模型，與聯集它已編譯程式碼的優點。</span><span class="sxs-lookup"><span data-stu-id="1b303-109">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="1b303-110">不過，其伺服器端處理模型有幾項技術中固有的錯誤：</span><span class="sxs-lookup"><span data-stu-id="1b303-110">However, its server-side processing model has several drawbacks inherent in the technology:</span></span>

- <span data-ttu-id="1b303-111">頁面更新需要往返伺服器，需要重新整理頁面。</span><span class="sxs-lookup"><span data-stu-id="1b303-111">Page updates require a round-trip to the server, which requires a page refresh.</span></span>
- <span data-ttu-id="1b303-112">往返不會保存任何 Javascript 或其他用戶端技術 （如 Adobe Flash) 所產生的影響</span><span class="sxs-lookup"><span data-stu-id="1b303-112">Round-trips do not persist any effects generated by Javascript or other client-side technology (such as Adobe Flash)</span></span>
- <span data-ttu-id="1b303-113">在回傳時，非 Microsoft Internet Explorer 的瀏覽器不支援自動還原捲軸位置。</span><span class="sxs-lookup"><span data-stu-id="1b303-113">During postback, browsers other than Microsoft Internet Explorer do not support automatically restoring the scroll position.</span></span> <span data-ttu-id="1b303-114">與中 Internet Explorer 中，即使仍有重繪閃動頁面在重新整理。</span><span class="sxs-lookup"><span data-stu-id="1b303-114">And even in Internet Explorer, there is still a flicker as the page is refreshed.</span></span>
- <span data-ttu-id="1b303-115">回傳可能牽涉到大量的頻寬為\_ \_VIEWSTATE 表單欄位可能會成長，尤其是在處理中繼器的 GridView 控制項等控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-115">Postbacks may involve a high amount of bandwidth as the \_\_VIEWSTATE form field may grow, especially when dealing with controls such as the GridView control or repeaters.</span></span>
- <span data-ttu-id="1b303-116">沒有任何統一的模型，用於存取 Web 服務透過 JavaScript 或其他用戶端技術。</span><span class="sxs-lookup"><span data-stu-id="1b303-116">There is no unified model for accessing Web Services through JavaScript or other client-side technology.</span></span>

<span data-ttu-id="1b303-117">輸入 Microsoft ASP.NET AJAX 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="1b303-117">Enter Microsoft's ASP.NET AJAX extensions.</span></span> <span data-ttu-id="1b303-118">AJAX，代表**A**同步**J** avaScript **A** nd **X** ML，是一個整合式的架構提供累加頁面跨平台 JavaScript 中，透過更新是由 Microsoft AJAX Framework 和名為 Microsoft AJAX 指令碼程式庫的指令碼元件所組成的伺服器端程式碼所組成。</span><span class="sxs-lookup"><span data-stu-id="1b303-118">AJAX, which stands for **A** synchronous **J** avaScript **A** nd **X** ML, is an integrated framework for providing incremental page updates via cross-platform JavaScript, composed of server-side code comprising the Microsoft AJAX Framework, and a script component called the Microsoft AJAX Script Library.</span></span> <span data-ttu-id="1b303-119">ASP.NET AJAX 擴充功能也會提供用於存取 ASP.NET Web 服務透過 JavaScript 的跨平台支援。</span><span class="sxs-lookup"><span data-stu-id="1b303-119">The ASP.NET AJAX extensions also provide cross-platform support for accessing ASP.NET Web Services via JavaScript.</span></span>

<span data-ttu-id="1b303-120">本白皮書會檢查 ASP.NET AJAX 擴充功能，其中包含 ScriptManager 元件、 UpdatePanel 控制項和 UpdateProgress 控制項，並會考慮它們應該或不應該的案例的部分頁面更新功能過高。</span><span class="sxs-lookup"><span data-stu-id="1b303-120">This whitepaper examines the partial page updates functionality of the ASP.NET AJAX Extensions, which includes the ScriptManager component, the UpdatePanel control, and the UpdateProgress control, and considers scenarios in which they should or should not be utilized.</span></span>

<span data-ttu-id="1b303-121">本白皮書根據在 Beta 2 版本的 Visual Studio 2008 和.NET Framework 3.5，將 ASP.NET AJAX 擴充功能整合到基底類別庫 （其中先前適用於 ASP.NET 2.0 的附加元件）。</span><span class="sxs-lookup"><span data-stu-id="1b303-121">This whitepaper is based on the Beta 2 release of the Visual Studio 2008 and the .NET Framework 3.5, which integrates the ASP.NET AJAX Extensions into the Base Class Library (where it was previously an add-on component available for ASP.NET 2.0).</span></span> <span data-ttu-id="1b303-122">本白皮書也會假設您使用 Visual Studio 2008 並不 Visual Web Developer Express 版。參考某些專案範本可能無法使用 Visual Web Developer Express 的使用者。</span><span class="sxs-lookup"><span data-stu-id="1b303-122">This whitepaper also assumes that you are using Visual Studio 2008 and not Visual Web Developer Express Edition; some project templates that are referenced may not be available to Visual Web Developer Express users.</span></span>

## <a name="partial-page-updates"></a><span data-ttu-id="1b303-123">部分頁面更新</span><span class="sxs-lookup"><span data-stu-id="1b303-123">Partial Page Updates</span></span>

<span data-ttu-id="1b303-124">可能是最明顯的 ASP.NET AJAX 擴充功能的特色是進行部分或累加式頁面更新而不需要執行完整頁面的回傳至伺服器，沒有程式碼變更和最少的標記變更的能力。</span><span class="sxs-lookup"><span data-stu-id="1b303-124">Perhaps the most visible feature of the ASP.NET AJAX Extensions is the ability to do a partial or incremental page updates without doing a full postback to the server, with no code changes and minimal markup changes.</span></span> <span data-ttu-id="1b303-125">優點相當廣泛-的 （例如 Adobe Flash 或 Windows Media） 您多媒體狀態保持不變，可降低頻寬成本，而且用戶端不會遇到重繪閃動通常與回傳相關。</span><span class="sxs-lookup"><span data-stu-id="1b303-125">The advantages are extensive - the state of your multimedia (such as Adobe Flash or Windows Media) is unchanged, bandwidth costs are reduced, and the client does not experience the flicker usually associated with a postback.</span></span>

<span data-ttu-id="1b303-126">能夠整合部分網頁呈現整合 ASP.NET 中，幾乎不需要變更到您的專案。</span><span class="sxs-lookup"><span data-stu-id="1b303-126">The ability to integrate partial page rendering is integrated into ASP.NET with minimal changes into your project.</span></span>

## <a name="walkthrough-integrating-partial-rendering-into-an-existing-project"></a><span data-ttu-id="1b303-127">逐步解說： 將部分呈現整合至現有的專案</span><span class="sxs-lookup"><span data-stu-id="1b303-127">Walkthrough: Integrating Partial Rendering into an Existing Project</span></span>


1. <span data-ttu-id="1b303-128">在 Microsoft Visual Studio 2008 中，建立新的 ASP.NET 網站專案，請前往<em>檔案</em> <em>- &gt;新增</em> <em>- &gt;網站</em>並從對話方塊選取 ASP.NET 網站。</span><span class="sxs-lookup"><span data-stu-id="1b303-128">In Microsoft Visual Studio 2008, create a new ASP.NET Web Site project by going to <em>File</em><em>-&gt; New</em><em>-&gt; Web Site</em> and selecting ASP.NET Web Site from the dialog.</span></span> <span data-ttu-id="1b303-129">您可以將檔案命名任何您喜歡，並可能會先安裝到檔案系統或到網際網路資訊服務 (IIS)。</span><span class="sxs-lookup"><span data-stu-id="1b303-129">You can name it whatever you like, and you may install it either to the file system or into Internet Information Services (IIS).</span></span>
2. <span data-ttu-id="1b303-130">您會有基本的 ASP.NET 標記的空白預設頁面 (伺服器端表單和`@Page`指示詞)。</span><span class="sxs-lookup"><span data-stu-id="1b303-130">You will be presented with the blank default page with basic ASP.NET markup (a server-side form and an `@Page` directive).</span></span> <span data-ttu-id="1b303-131">卸除稱為標籤`Label1`和按鈕呼叫`Button1`拖曳到頁面中的表單項目。</span><span class="sxs-lookup"><span data-stu-id="1b303-131">Drop a Label called `Label1` and a Button called `Button1` onto the page within the form element.</span></span> <span data-ttu-id="1b303-132">您設定的可能以任何您喜歡的 text 屬性。</span><span class="sxs-lookup"><span data-stu-id="1b303-132">You may set their text properties to whatever you like.</span></span>
3. <span data-ttu-id="1b303-133">在 [設計] 檢視中，按兩下`Button1`產生程式碼後置事件處理常式。</span><span class="sxs-lookup"><span data-stu-id="1b303-133">In Design view, double-click `Button1` to generate a code-behind event handler.</span></span> <span data-ttu-id="1b303-134">在此事件處理常式中，設定`Label1.Text`至您已按下按鈕 ！</span><span class="sxs-lookup"><span data-stu-id="1b303-134">Within this event handler, set `Label1.Text` to You clicked the button!</span></span> <span data-ttu-id="1b303-135">。</span><span class="sxs-lookup"><span data-stu-id="1b303-135">.</span></span>

<span data-ttu-id="1b303-136">**清單 1: Default.aspx 之前有啟用局部呈現標記**</span><span class="sxs-lookup"><span data-stu-id="1b303-136">**Listing 1: Markup for default.aspx before partial rendering is enabled**</span></span>

[!code-aspx[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample1.aspx)]

<span data-ttu-id="1b303-137">**表 2： 程式碼後置 （修剪） default.aspx.cs**</span><span class="sxs-lookup"><span data-stu-id="1b303-137">**Listing 2: Codebehind (trimmed) in default.aspx.cs**</span></span>

[!code-csharp[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample2.cs)]

1. <span data-ttu-id="1b303-138">按 F5 啟動您的網站。</span><span class="sxs-lookup"><span data-stu-id="1b303-138">Press F5 to launch your web site.</span></span> <span data-ttu-id="1b303-139">Visual Studio 會提示您加入 web.config 檔案以啟用偵錯。這樣做。</span><span class="sxs-lookup"><span data-stu-id="1b303-139">Visual Studio will prompt you to add a web.config file to enable debugging; do so.</span></span> <span data-ttu-id="1b303-140">當您按一下按鈕時，請注意，若要變更標籤中文字的頁面重新整理沒有短暫的重繪閃動因為頁面會重新繪製。</span><span class="sxs-lookup"><span data-stu-id="1b303-140">When you click the button, notice that the page refreshes to change the text in the label, and there is a brief flicker as the page is redrawn.</span></span>
2. <span data-ttu-id="1b303-141">關閉瀏覽器視窗之後, 會傳回至 Visual Studio 和標記頁面。</span><span class="sxs-lookup"><span data-stu-id="1b303-141">After closing your browser window, return to Visual Studio and to the markup page.</span></span> <span data-ttu-id="1b303-142">在 Visual Studio 工具箱中，向下捲動並尋找標示為 [AJAX 擴充功能] 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="1b303-142">Scroll down in the Visual Studio toolbox, and find the tab labeled AJAX Extensions.</span></span> <span data-ttu-id="1b303-143">（如果因為您使用較舊版本的 AJAX 或地圖集時進行的擴充功能，您並沒有此索引標籤，請參閱的逐步解說稍後在本白皮書中，註冊 AJAX 擴充功能的工具箱項目或安裝目前版本和可下載的 Windows 安裝程式從網站）。</span><span class="sxs-lookup"><span data-stu-id="1b303-143">(If you do not have this tab because you are using an older version of AJAX or Atlas extensions, refer to the walkthrough for registering the AJAX Extensions toolbox items later in this whitepaper, or install the current version with the Windows Installer downloadable from the website).</span></span>


[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image2.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image1.png)

<span data-ttu-id="1b303-144">([按一下以檢視完整大小的影像](understanding-partial-page-updates-with-asp-net-ajax/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="1b303-144">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image3.png))</span></span>


1. <span data-ttu-id="1b303-145"><em>已知問題：</em>如果您已經有與 ASP.NET 2.0 AJAX 擴充功能一起安裝的 Visual Studio 2005 的電腦上安裝 Visual Studio 2008，Visual Studio 2008 會匯入 AJAX 擴充功能的工具箱項目。</span><span class="sxs-lookup"><span data-stu-id="1b303-145"><em>Known Issue:</em>If you install Visual Studio 2008 onto a computer that already has Visual Studio 2005 installed with the ASP.NET 2.0 AJAX Extensions, Visual Studio 2008 will import the AJAX Extensions toolbox items.</span></span> <span data-ttu-id="1b303-146">您可以判斷是否為情況藉由檢查元件; 的工具提示他們應該說 3.5.0.0 版本。</span><span class="sxs-lookup"><span data-stu-id="1b303-146">You can determine whether this is the case by examining the tooltip of the components; they should say Version 3.5.0.0.</span></span> <span data-ttu-id="1b303-147">如果他們說 2.0.0.0 版，您已匯入舊的工具箱項目，而且必須以手動方式將其匯入 Visual Studio 中使用 [選擇工具箱項目] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="1b303-147">If they say Version 2.0.0.0, then you have imported your old toolbox items, and will need to manually import them by using the Choose Toolbox Items dialog in Visual Studio.</span></span> <span data-ttu-id="1b303-148">您無法將透過設計工具的第 2 版控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-148">You will be unable to add Version 2 controls via the designer.</span></span>

2. <span data-ttu-id="1b303-149">之前`<asp:Label>`開始標記、 建立的空白字元，行和工具箱 中的 UpdatePanel 控制項上按兩下。</span><span class="sxs-lookup"><span data-stu-id="1b303-149">Before the `<asp:Label>` tag begins, create a line of whitespace, and double-click on the UpdatePanel control in the toolbox.</span></span> <span data-ttu-id="1b303-150">請注意，新`@Register`指示詞是否包含在頁面上，指出應該使用會匯 System.Web.UI 命名空間內的控制項頂端`asp:`前置詞。</span><span class="sxs-lookup"><span data-stu-id="1b303-150">Note that a new `@Register` directive is included at the top of the page, indicating that controls within the System.Web.UI namespace should be imported using the `asp:` prefix.</span></span>
3. <span data-ttu-id="1b303-151">拖曳結尾`</asp:UpdatePanel>`標記結尾的按鈕項目，以便使用包裝的標籤和按鈕控制項的項目是語式正確。</span><span class="sxs-lookup"><span data-stu-id="1b303-151">Drag the closing `</asp:UpdatePanel>` tag past the end of the Button element, so that the element is well-formed with the Label and Button controls wrapped.</span></span>
4. <span data-ttu-id="1b303-152">在開啟之後`<asp:UpdatePanel>`標記中，開始開啟新的標記。</span><span class="sxs-lookup"><span data-stu-id="1b303-152">After the opening `<asp:UpdatePanel>` tag, begin opening a new tag.</span></span> <span data-ttu-id="1b303-153">請注意，IntelliSense 會提示您有兩個選項。</span><span class="sxs-lookup"><span data-stu-id="1b303-153">Note that IntelliSense prompts you with two options.</span></span> <span data-ttu-id="1b303-154">在此案例中，建立`<ContentTemplate>`標記。</span><span class="sxs-lookup"><span data-stu-id="1b303-154">In this case, create a `<ContentTemplate>` tag.</span></span> <span data-ttu-id="1b303-155">請務必使標記語式正確包裝您的標籤和按鈕周圍此標記。</span><span class="sxs-lookup"><span data-stu-id="1b303-155">Be sure to wrap this tag around your Label and Button so that the markup is well-formed.</span></span>


[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image5.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image4.png)

<span data-ttu-id="1b303-156">([按一下以檢視完整大小的影像](understanding-partial-page-updates-with-asp-net-ajax/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="1b303-156">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image6.png))</span></span>


1. <span data-ttu-id="1b303-157">中的任何地方`<form>`項目，包括 ScriptManager 控制項上按兩下`ScriptManager`工具箱中的項目。</span><span class="sxs-lookup"><span data-stu-id="1b303-157">Anywhere within the `<form>` element, include a ScriptManager control by double-clicking on the `ScriptManager` item in the toolbox.</span></span>
2. <span data-ttu-id="1b303-158">編輯`<asp:ScriptManager>`標記，使其包含屬性`EnablePartialRendering= true`。</span><span class="sxs-lookup"><span data-stu-id="1b303-158">Edit the `<asp:ScriptManager>` tag so that it includes the attribute `EnablePartialRendering= true`.</span></span>

<span data-ttu-id="1b303-159">**列出 3： 啟用局部呈現與 default.aspx 的標記**</span><span class="sxs-lookup"><span data-stu-id="1b303-159">**Listing 3: Markup for default.aspx with partial rendering enabled**</span></span>

[!code-aspx[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample3.aspx)]

1. <span data-ttu-id="1b303-160">開啟 web.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="1b303-160">Open your web.config file.</span></span> <span data-ttu-id="1b303-161">請注意，Visual Studio 已自動加入 System.Web.Extensions.dll 編譯參考。</span><span class="sxs-lookup"><span data-stu-id="1b303-161">Notice that Visual Studio has automatically added a compilation reference to System.Web.Extensions.dll.</span></span>

1. <span data-ttu-id="1b303-162">What's New in Visual Studio 2008: web.config 中自動隨附的 ASP.NET 網站專案範本包含所有必要的參考加入至 ASP.NET AJAX 擴充功能，並包含的組態資訊可能會加上註解的區段未加上註解以啟用其他功能。</span><span class="sxs-lookup"><span data-stu-id="1b303-162">What's New in Visual Studio 2008: The web.config that comes with the ASP.NET Web Site project templates automatically includes all necessary references to the ASP.NET AJAX Extensions, and includes commented sections of configuration information that can be un-commented to enable additional functionality.</span></span> <span data-ttu-id="1b303-163">已安裝 ASP.NET 2.0 AJAX 擴充功能時，visual Studio 2005 會有類似的範本。</span><span class="sxs-lookup"><span data-stu-id="1b303-163">Visual Studio 2005 had similar templates when ASP.NET 2.0 AJAX Extensions were installed.</span></span> <span data-ttu-id="1b303-164">不過，在 Visual Studio 2008 中，AJAX 擴充功能會退出預設 （也就是他們所參考的預設值，但是可以移除做為參考）。</span><span class="sxs-lookup"><span data-stu-id="1b303-164">However, in Visual Studio 2008, the AJAX Extensions are opt-out by default (that is, they are referenced by default, but can be removed as references).</span></span>


[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image8.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image7.png)

<span data-ttu-id="1b303-165">([按一下以檢視完整大小的影像](understanding-partial-page-updates-with-asp-net-ajax/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="1b303-165">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image9.png))</span></span>


1. <span data-ttu-id="1b303-166">按 F5 啟動您的網站。</span><span class="sxs-lookup"><span data-stu-id="1b303-166">Press F5 to launch your website.</span></span> <span data-ttu-id="1b303-167">請注意如何變更任何來源的程式碼中需要支援局部呈現-只標記已變更。</span><span class="sxs-lookup"><span data-stu-id="1b303-167">Note how no source code changes were required to support partial rendering - only markup was changed.</span></span>

<span data-ttu-id="1b303-168">當您啟動您的網站時，您應該會看到部分轉譯為現在已啟用，因為當您按一下按鈕將會是沒有重繪閃動，也不會有頁面捲軸的位置 （此範例不示範的） 中的任何變更。</span><span class="sxs-lookup"><span data-stu-id="1b303-168">When you launch your website, you should see that partial rendering is now enabled, because when you click on the button there will be no flicker, nor will there be any change in the page scroll position (this example does not demonstrate that).</span></span> <span data-ttu-id="1b303-169">如果您要查看呈現網頁的來源，按一下按鈕後，它會確認尚未發生回傳事實上-原始標籤文字仍然是組件的來源標記中，標籤已變更透過 JavaScript。</span><span class="sxs-lookup"><span data-stu-id="1b303-169">If you were to look at the rendered source of the page after clicking the button, it will confirm that in fact a post-back has not occurred - the original label text is still part of the source markup, and the label has changed through JavaScript.</span></span>

<span data-ttu-id="1b303-170">Visual Studio 2008 似乎不會隨附預先定義的範本，ASP.NET AJAX 能力的網站。</span><span class="sxs-lookup"><span data-stu-id="1b303-170">Visual Studio 2008 does not appear to come with a pre-defined template for an ASP.NET AJAX-Enabled web site.</span></span> <span data-ttu-id="1b303-171">不過，此範本已使用 Visual Studio 2005 中，如果已安裝的 Visual Studio 2005 和 ASP.NET 2.0 AJAX 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="1b303-171">However, such a template was available within Visual Studio 2005 if the Visual Studio 2005 and ASP.NET 2.0 AJAX Extensions were installed.</span></span> <span data-ttu-id="1b303-172">因此，設定網站和開始使用 AJAX-Enabled 網站範本可能會更容易，因為範本中應包含完整設定 web.config 檔案 （支援所有 ASP.NET AJAX 擴充功能，包括 Web 服務的存取和 JSON 序列化為 JavaScript 物件標記法），其中包括 UpdatePanel 和 ContentTemplate 主要 Web Forms 網頁內的預設值。</span><span class="sxs-lookup"><span data-stu-id="1b303-172">Consequently, configuring a web site and starting with the AJAX-Enabled Web Site template will likely be even easier, as the template should include a fully-configured web.config file (supporting all of the ASP.NET AJAX Extensions, including Web Services access and JSON serialization - JavaScript Object Notation) and includes an UpdatePanel and ContentTemplate within the main Web Forms page by default.</span></span> <span data-ttu-id="1b303-173">啟用局部呈現檢視的預設網頁的很簡單，重新查看本逐步解說的步驟 10 拖放到頁面的控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-173">Enabling partial rendering with this default page is as simple as revisiting Step 10 of this walkthrough and dropping controls onto the page.</span></span>

## <a name="the-scriptmanager-control"></a><span data-ttu-id="1b303-174">ScriptManager 控制項</span><span class="sxs-lookup"><span data-stu-id="1b303-174">The ScriptManager Control</span></span>

## <a name="scriptmanager-control-reference"></a><span data-ttu-id="1b303-175">ScriptManager 控制項參考</span><span class="sxs-lookup"><span data-stu-id="1b303-175">ScriptManager Control Reference</span></span>

<span data-ttu-id="1b303-176">啟用標記的屬性：</span><span class="sxs-lookup"><span data-stu-id="1b303-176">Markup-Enabled Properties:</span></span>

| <span data-ttu-id="1b303-177">**屬性名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-177">**Property Name**</span></span> | <span data-ttu-id="1b303-178">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-178">**Type**</span></span> | <span data-ttu-id="1b303-179">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-179">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-180">AllowCustomErrors-Redirect</span><span class="sxs-lookup"><span data-stu-id="1b303-180">AllowCustomErrors-Redirect</span></span> | <span data-ttu-id="1b303-181">Bool</span><span class="sxs-lookup"><span data-stu-id="1b303-181">Bool</span></span> | <span data-ttu-id="1b303-182">指定是否要使用 web.config 檔案的自訂錯誤區段，來處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="1b303-182">Specifies whether to use the custom error section of the web.config file to handle errors.</span></span> |
| <span data-ttu-id="1b303-183">AsyncPostBackError-Message</span><span class="sxs-lookup"><span data-stu-id="1b303-183">AsyncPostBackError-Message</span></span> | <span data-ttu-id="1b303-184">String</span><span class="sxs-lookup"><span data-stu-id="1b303-184">String</span></span> | <span data-ttu-id="1b303-185">取得或設定傳送到用戶端，如果發生錯誤時引發的錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="1b303-185">Gets or sets the error message sent to the client if an error is raised.</span></span> |
| <span data-ttu-id="1b303-186">AsyncPostBack-Timeout</span><span class="sxs-lookup"><span data-stu-id="1b303-186">AsyncPostBack-Timeout</span></span> | <span data-ttu-id="1b303-187">Int32</span><span class="sxs-lookup"><span data-stu-id="1b303-187">Int32</span></span> | <span data-ttu-id="1b303-188">取得或設定預設的用戶端應該等待要完成之非同步要求的時間量。</span><span class="sxs-lookup"><span data-stu-id="1b303-188">Gets or sets the default amount of a time a client should wait for the asynchronous request to complete.</span></span> |
| <span data-ttu-id="1b303-189">EnableScript-Globalization</span><span class="sxs-lookup"><span data-stu-id="1b303-189">EnableScript-Globalization</span></span> | <span data-ttu-id="1b303-190">Bool</span><span class="sxs-lookup"><span data-stu-id="1b303-190">Bool</span></span> | <span data-ttu-id="1b303-191">取得或設定是否已啟用指令碼的全球化。</span><span class="sxs-lookup"><span data-stu-id="1b303-191">Gets or sets whether script globalization is enabled.</span></span> |
| <span data-ttu-id="1b303-192">EnableScript-Localization</span><span class="sxs-lookup"><span data-stu-id="1b303-192">EnableScript-Localization</span></span> | <span data-ttu-id="1b303-193">Bool</span><span class="sxs-lookup"><span data-stu-id="1b303-193">Bool</span></span> | <span data-ttu-id="1b303-194">取得或設定是否已啟用指令碼當地語系化。</span><span class="sxs-lookup"><span data-stu-id="1b303-194">Gets or sets whether script localization is enabled.</span></span> |
| <span data-ttu-id="1b303-195">ScriptLoadTimeout</span><span class="sxs-lookup"><span data-stu-id="1b303-195">ScriptLoadTimeout</span></span> | <span data-ttu-id="1b303-196">Int32</span><span class="sxs-lookup"><span data-stu-id="1b303-196">Int32</span></span> | <span data-ttu-id="1b303-197">決定指令碼載入用戶端所允許的秒數</span><span class="sxs-lookup"><span data-stu-id="1b303-197">Determines the number of seconds allowed for loading scripts into the client</span></span> |
| <span data-ttu-id="1b303-198">ScriptMode</span><span class="sxs-lookup"><span data-stu-id="1b303-198">ScriptMode</span></span> | <span data-ttu-id="1b303-199">列舉 （自動、 偵錯、 發行、 繼承）</span><span class="sxs-lookup"><span data-stu-id="1b303-199">Enum (Auto, Debug, Release, Inherit)</span></span> | <span data-ttu-id="1b303-200">取得或設定是否要呈現的指令碼的發行版本</span><span class="sxs-lookup"><span data-stu-id="1b303-200">Gets or sets whether to render release versions of scripts</span></span> |
| <span data-ttu-id="1b303-201">ScriptPath</span><span class="sxs-lookup"><span data-stu-id="1b303-201">ScriptPath</span></span> | <span data-ttu-id="1b303-202">String</span><span class="sxs-lookup"><span data-stu-id="1b303-202">String</span></span> | <span data-ttu-id="1b303-203">取得或設定要傳送至用戶端指令碼檔案位置的根路徑。</span><span class="sxs-lookup"><span data-stu-id="1b303-203">Gets or sets the root path to the location of script files to be sent to the client.</span></span> |

<span data-ttu-id="1b303-204">僅限程式碼的屬性：</span><span class="sxs-lookup"><span data-stu-id="1b303-204">Code-Only Properties:</span></span>

| <span data-ttu-id="1b303-205">**屬性名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-205">**Property Name**</span></span> | <span data-ttu-id="1b303-206">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-206">**Type**</span></span> | <span data-ttu-id="1b303-207">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-207">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-208">AuthenticationService</span><span class="sxs-lookup"><span data-stu-id="1b303-208">AuthenticationService</span></span> | <span data-ttu-id="1b303-209">AuthenticationService-Manager</span><span class="sxs-lookup"><span data-stu-id="1b303-209">AuthenticationService-Manager</span></span> | <span data-ttu-id="1b303-210">取得有關將傳送至用戶端 ASP.NET 驗證服務 proxy 的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="1b303-210">Gets details about the ASP.NET Authentication Service proxy that will be sent to the client.</span></span> |
| <span data-ttu-id="1b303-211">IsDebuggingEnabled</span><span class="sxs-lookup"><span data-stu-id="1b303-211">IsDebuggingEnabled</span></span> | <span data-ttu-id="1b303-212">Bool</span><span class="sxs-lookup"><span data-stu-id="1b303-212">Bool</span></span> | <span data-ttu-id="1b303-213">取得是否編寫指令碼和程式碼偵錯已啟用。</span><span class="sxs-lookup"><span data-stu-id="1b303-213">Gets whether script and code debugging is enabled.</span></span> |
| <span data-ttu-id="1b303-214">IsInAsyncPostback</span><span class="sxs-lookup"><span data-stu-id="1b303-214">IsInAsyncPostback</span></span> | <span data-ttu-id="1b303-215">Bool</span><span class="sxs-lookup"><span data-stu-id="1b303-215">Bool</span></span> | <span data-ttu-id="1b303-216">取得頁面目前是否在非同步回傳要求。</span><span class="sxs-lookup"><span data-stu-id="1b303-216">Gets whether the page is currently in an asynchronous post back request.</span></span> |
| <span data-ttu-id="1b303-217">ProfileService</span><span class="sxs-lookup"><span data-stu-id="1b303-217">ProfileService</span></span> | <span data-ttu-id="1b303-218">ProfileService-Manager</span><span class="sxs-lookup"><span data-stu-id="1b303-218">ProfileService-Manager</span></span> | <span data-ttu-id="1b303-219">取得詳細資料會傳送至用戶端的 ASP.NET 程式碼剖析服務 proxy。</span><span class="sxs-lookup"><span data-stu-id="1b303-219">Gets details about the ASP.NET Profiling Service proxy that will be sent to the client.</span></span> |
| <span data-ttu-id="1b303-220">指令碼</span><span class="sxs-lookup"><span data-stu-id="1b303-220">Scripts</span></span> | <span data-ttu-id="1b303-221">Collection&lt;Script-Reference&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-221">Collection&lt;Script-Reference&gt;</span></span> | <span data-ttu-id="1b303-222">取得將傳送至用戶端的指令碼參考的集合。</span><span class="sxs-lookup"><span data-stu-id="1b303-222">Gets a collection of script references that will be sent to the client.</span></span> |
| <span data-ttu-id="1b303-223">服務</span><span class="sxs-lookup"><span data-stu-id="1b303-223">Services</span></span> | <span data-ttu-id="1b303-224">Collection&lt;Service-Reference&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-224">Collection&lt;Service-Reference&gt;</span></span> | <span data-ttu-id="1b303-225">取得將傳送至用戶端的 Web 服務 proxy 參考的集合。</span><span class="sxs-lookup"><span data-stu-id="1b303-225">Gets a collection of Web Service proxy references that will be sent to the client.</span></span> |
| <span data-ttu-id="1b303-226">SupportsPartialRendering</span><span class="sxs-lookup"><span data-stu-id="1b303-226">SupportsPartialRendering</span></span> | <span data-ttu-id="1b303-227">Bool</span><span class="sxs-lookup"><span data-stu-id="1b303-227">Bool</span></span> | <span data-ttu-id="1b303-228">取得指出是否目前的用戶端支援局部呈現。</span><span class="sxs-lookup"><span data-stu-id="1b303-228">Gets whether the current client supports partial rendering.</span></span> <span data-ttu-id="1b303-229">如果這個屬性會傳回**false**，所有的網頁要求便會是標準的回傳。</span><span class="sxs-lookup"><span data-stu-id="1b303-229">If this property returns **false**, then all page requests will be standard postbacks.</span></span> |

<span data-ttu-id="1b303-230">公用程式碼的方法：</span><span class="sxs-lookup"><span data-stu-id="1b303-230">Public Code Methods:</span></span>

| <span data-ttu-id="1b303-231">**方法名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-231">**Method Name**</span></span> | <span data-ttu-id="1b303-232">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-232">**Type**</span></span> | <span data-ttu-id="1b303-233">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-233">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-234">SetFocus(string)</span><span class="sxs-lookup"><span data-stu-id="1b303-234">SetFocus(string)</span></span> | <span data-ttu-id="1b303-235">Void</span><span class="sxs-lookup"><span data-stu-id="1b303-235">Void</span></span> | <span data-ttu-id="1b303-236">當要求完成時，請用戶端將焦點設定至特定控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-236">Sets the focus of the client to a particular control when the request has completed.</span></span> |

<span data-ttu-id="1b303-237">標記下階：</span><span class="sxs-lookup"><span data-stu-id="1b303-237">Markup Descendants:</span></span>

| <span data-ttu-id="1b303-238">**標記**</span><span class="sxs-lookup"><span data-stu-id="1b303-238">**Tag**</span></span> | <span data-ttu-id="1b303-239">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-239">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="1b303-240">&lt;AuthenticationService&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-240">&lt;AuthenticationService&gt;</span></span> | <span data-ttu-id="1b303-241">提供 ASP.NET 驗證服務 proxy 的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="1b303-241">Provides details about the proxy to the ASP.NET authentication service.</span></span> |
| <span data-ttu-id="1b303-242">&lt;ProfileService&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-242">&lt;ProfileService&gt;</span></span> | <span data-ttu-id="1b303-243">提供 asp.net 程式碼剖析服務的 proxy 詳細資料。</span><span class="sxs-lookup"><span data-stu-id="1b303-243">Provides details about the proxy to the ASP.NET profiling service.</span></span> |
| <span data-ttu-id="1b303-244">&lt;Scripts&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-244">&lt;Scripts&gt;</span></span> | <span data-ttu-id="1b303-245">提供額外的指令碼參考。</span><span class="sxs-lookup"><span data-stu-id="1b303-245">Provides additional script references.</span></span> |
| <span data-ttu-id="1b303-246">&lt;asp:ScriptReference&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-246">&lt;asp:ScriptReference&gt;</span></span> | <span data-ttu-id="1b303-247">代表特定的指令碼參考。</span><span class="sxs-lookup"><span data-stu-id="1b303-247">Denotes a specific script reference.</span></span> |
| <span data-ttu-id="1b303-248">&lt;Service&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-248">&lt;Service&gt;</span></span> | <span data-ttu-id="1b303-249">提供額外的 Web 服務參考其中將包含所產生的 proxy 類別。</span><span class="sxs-lookup"><span data-stu-id="1b303-249">Provides additional Web Service references which will have proxy classes generated.</span></span> |
| <span data-ttu-id="1b303-250">&lt;asp:ServiceReference&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-250">&lt;asp:ServiceReference&gt;</span></span> | <span data-ttu-id="1b303-251">代表特定的 Web 服務參考。</span><span class="sxs-lookup"><span data-stu-id="1b303-251">Denotes a specific Web Service reference.</span></span> |

<span data-ttu-id="1b303-252">ScriptManager 控制項是 ASP.NET AJAX 擴充功能的基本核心。</span><span class="sxs-lookup"><span data-stu-id="1b303-252">The ScriptManager control is the essential core for the ASP.NET AJAX Extensions.</span></span> <span data-ttu-id="1b303-253">它提供存取權 （包含大量的用戶端指令碼型別系統） 的指令碼程式庫，支援局部呈現，並提供其他的 ASP.NET 服務 （例如驗證和程式碼剖析，還有其他 Web 服務） 更詳盡的支援。</span><span class="sxs-lookup"><span data-stu-id="1b303-253">It provides access to the script library (including the extensive client-side script type system), supports partial rendering, and provides extensive support for additional ASP.NET services (such as authentication and profiling, but also other Web Services).</span></span> <span data-ttu-id="1b303-254">ScriptManager 控制項也會提供用戶端指令碼的全球化和當地語系化支援。</span><span class="sxs-lookup"><span data-stu-id="1b303-254">The ScriptManager control also provides globalization and localization support for the client scripts.</span></span>

## <a name="providing-alterative-and-supplemental-scripts"></a><span data-ttu-id="1b303-255">提供 Alterative 和補充指令碼</span><span class="sxs-lookup"><span data-stu-id="1b303-255">Providing Alterative and Supplemental Scripts</span></span>

<span data-ttu-id="1b303-256">在 Microsoft ASP.NET 2.0 AJAX Extensions 中這兩個偵錯包含整個指令碼並做為參考組件中內嵌的資源釋放版本時，開發人員可用來將 ScriptManager 重新導向至自訂指令碼檔案，以及註冊其他必要的指令碼。</span><span class="sxs-lookup"><span data-stu-id="1b303-256">While the Microsoft ASP.NET 2.0 AJAX Extensions include the entire script code in both debug and release editions as resources embedded in the referenced assemblies, developers are free to redirect the ScriptManager to customized script files, as well as register additional necessary scripts.</span></span>

<span data-ttu-id="1b303-257">若要覆寫通常包含指令碼 （例如，支援 Sys.WebForms 命名空間和自訂的輸入系統） 的預設繫結，您可以註冊`ResolveScriptReference`ScriptManager 類別的事件。</span><span class="sxs-lookup"><span data-stu-id="1b303-257">To override the default binding for the typically-included scripts (such as those which support the Sys.WebForms namespace and the custom typing system), you can register for the `ResolveScriptReference` event of the ScriptManager class.</span></span> <span data-ttu-id="1b303-258">此事件處理常式呼叫這個方法時，有機會將路徑變更指令碼檔案有問題;指令碼管理員會再將用戶端指令碼的不同或自訂的副本。</span><span class="sxs-lookup"><span data-stu-id="1b303-258">When this method is called, the event handler has the opportunity to change the path to the script file in question; the script manager will then send a different or customized copy of the scripts to the client.</span></span>

<span data-ttu-id="1b303-259">此外，指令碼參考 (由`ScriptReference`類別) 可包含以程式設計方式或透過標記。</span><span class="sxs-lookup"><span data-stu-id="1b303-259">Additionally, script references (represented by the `ScriptReference` class) can be included programmatically or via markup.</span></span> <span data-ttu-id="1b303-260">若要這樣做，請以程式設計方式修改`ScriptManager.Scripts`集合，或包含`<asp:ScriptReference>`標記下`<Scripts>`ScriptManager 控制項的第一層子系的標記。</span><span class="sxs-lookup"><span data-stu-id="1b303-260">To do so, either programmatically modify the `ScriptManager.Scripts` collection, or include `<asp:ScriptReference>` tags under the `<Scripts>` tag, which is a first-level child of the ScriptManager control.</span></span>

## <a name="custom-error-handling-for-updatepanels"></a><span data-ttu-id="1b303-261">自訂錯誤處理 updatepanel 就</span><span class="sxs-lookup"><span data-stu-id="1b303-261">Custom Error Handling for UpdatePanels</span></span>

<span data-ttu-id="1b303-262">雖然程式 UpdatePanel 控制項所指定的觸發程序會處理更新，錯誤處理和自訂錯誤訊息的支援是由頁面 ScriptManager 控制項執行個體中處理。</span><span class="sxs-lookup"><span data-stu-id="1b303-262">Although updates are handled by triggers specified by UpdatePanel controls, the support for error handling and custom error messages is handled by a page's ScriptManager control instance.</span></span> <span data-ttu-id="1b303-263">這是藉由公開事件， `AsyncPostBackError`，至可以網頁，然後提供自訂例外狀況處理邏輯。</span><span class="sxs-lookup"><span data-stu-id="1b303-263">This is done by exposing an event, `AsyncPostBackError`, to the page which can then provide custom exception-handling logic.</span></span>

<span data-ttu-id="1b303-264">所耗用的 AsyncPostBackError 事件，您可以指定`AsyncPostBackErrorMessage`屬性，進而導致警示引發完成回呼的方塊。</span><span class="sxs-lookup"><span data-stu-id="1b303-264">By consuming the AsyncPostBackError event, you may specify the `AsyncPostBackErrorMessage` property, which then causes an alert box to be raised upon completion of the callback.</span></span>

<span data-ttu-id="1b303-265">用戶端的自訂，您也可以不使用預設警示方塊;比方說，您可能想要顯示的自訂`<div>`項目，而不是預設瀏覽器的強制回應對話方塊。</span><span class="sxs-lookup"><span data-stu-id="1b303-265">Client-side customization is also possible instead of using the default alert box; for instance, you may want to display a customized `<div>` element rather than the default browser modal dialog.</span></span> <span data-ttu-id="1b303-266">在此情況下，您可以處理用戶端指令碼中的錯誤訊息：</span><span class="sxs-lookup"><span data-stu-id="1b303-266">In this case, you can handle the error in client script:</span></span>

<span data-ttu-id="1b303-267">**列出 5： 用戶端指令碼顯示自訂錯誤**</span><span class="sxs-lookup"><span data-stu-id="1b303-267">**Listing 5: Client-side script to display custom errors**</span></span>

[!code-html[Main](understanding-partial-page-updates-with-asp-net-ajax/samples/sample4.html)]

<span data-ttu-id="1b303-268">非常簡單，上述指令碼使用註冊回呼的用戶端 AJAX 執行階段非同步要求完成時。</span><span class="sxs-lookup"><span data-stu-id="1b303-268">Quite simply, the above script registers a callback with the client-side AJAX runtime for when the asynchronous request has been completed.</span></span> <span data-ttu-id="1b303-269">然後它會檢查是否已報告錯誤，請參閱，若是則處理的詳細資料，最後至執行階段指出自訂指令碼中處理錯誤狀況。</span><span class="sxs-lookup"><span data-stu-id="1b303-269">It then checks to see whether an error was reported, and if so, processes the details of it, finally indicating to the runtime that the error was handled in custom script.</span></span>

## <a name="globalization-and-localization-support"></a><span data-ttu-id="1b303-270">全球化和當地語系化支援</span><span class="sxs-lookup"><span data-stu-id="1b303-270">Globalization and Localization Support</span></span>

<span data-ttu-id="1b303-271">ScriptManager 控制項來當地語系化的指令碼字串和使用者介面元件，提供更詳盡的支援不過，該主題不本白皮書的範圍內。</span><span class="sxs-lookup"><span data-stu-id="1b303-271">The ScriptManager control provides extensive support for localization of script strings and user interface components; however, that topic is outside of the scope of this whitepaper.</span></span> <span data-ttu-id="1b303-272">如需詳細資訊，請參閱白皮書，在 ASP.NET AJAX Extensions 中的全球化支援。</span><span class="sxs-lookup"><span data-stu-id="1b303-272">For more information, see the whitepaper, Globalization Support in ASP.NET AJAX Extensions.</span></span>

## <a name="the-updatepanel-control"></a><span data-ttu-id="1b303-273">UpdatePanel 控制項</span><span class="sxs-lookup"><span data-stu-id="1b303-273">The UpdatePanel Control</span></span>

## <a name="updatepanel-control-reference"></a><span data-ttu-id="1b303-274">UpdatePanel 控制項參考</span><span class="sxs-lookup"><span data-stu-id="1b303-274">UpdatePanel Control Reference</span></span>

<span data-ttu-id="1b303-275">啟用標記的屬性：</span><span class="sxs-lookup"><span data-stu-id="1b303-275">Markup-Enabled Properties:</span></span>

| <span data-ttu-id="1b303-276">**屬性名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-276">**Property Name**</span></span> | <span data-ttu-id="1b303-277">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-277">**Type**</span></span> | <span data-ttu-id="1b303-278">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-278">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-279">ChildrenAsTriggers</span><span class="sxs-lookup"><span data-stu-id="1b303-279">ChildrenAsTriggers</span></span> | <span data-ttu-id="1b303-280">bool</span><span class="sxs-lookup"><span data-stu-id="1b303-280">bool</span></span> | <span data-ttu-id="1b303-281">指定子控制項是否自動啟動回傳重新整理。</span><span class="sxs-lookup"><span data-stu-id="1b303-281">Specifies whether child controls automatically invoke refresh on postback.</span></span> |
| <span data-ttu-id="1b303-282">RenderMode</span><span class="sxs-lookup"><span data-stu-id="1b303-282">RenderMode</span></span> | <span data-ttu-id="1b303-283">列舉 （「 區塊 」、 「 內嵌 」）</span><span class="sxs-lookup"><span data-stu-id="1b303-283">enum (Block, Inline)</span></span> | <span data-ttu-id="1b303-284">指定將會以視覺化方式呈現內容的方式。</span><span class="sxs-lookup"><span data-stu-id="1b303-284">Specifies the way the content will be visually presented.</span></span> |
| <span data-ttu-id="1b303-285">UpdateMode</span><span class="sxs-lookup"><span data-stu-id="1b303-285">UpdateMode</span></span> | <span data-ttu-id="1b303-286">列舉 （Always、 條件式）</span><span class="sxs-lookup"><span data-stu-id="1b303-286">enum (Always, Conditional)</span></span> | <span data-ttu-id="1b303-287">指定 UpdatePanel 是否永遠重新整理部分呈現期間，或如果它只重新整理時叫用觸發程序。</span><span class="sxs-lookup"><span data-stu-id="1b303-287">Specifies whether the UpdatePanel is always refreshed during a partial render or if it is only refreshed when a trigger is hit.</span></span> |

<span data-ttu-id="1b303-288">僅限程式碼的屬性：</span><span class="sxs-lookup"><span data-stu-id="1b303-288">Code-Only Properties:</span></span>

| <span data-ttu-id="1b303-289">**屬性名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-289">**Property Name**</span></span> | <span data-ttu-id="1b303-290">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-290">**Type**</span></span> | <span data-ttu-id="1b303-291">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-291">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-292">IsInPartialRendering</span><span class="sxs-lookup"><span data-stu-id="1b303-292">IsInPartialRendering</span></span> | <span data-ttu-id="1b303-293">bool</span><span class="sxs-lookup"><span data-stu-id="1b303-293">bool</span></span> | <span data-ttu-id="1b303-294">取得是否 UpdatePanel 支援局部呈現目前的要求。</span><span class="sxs-lookup"><span data-stu-id="1b303-294">Gets whether the UpdatePanel is supporting partial rendering for the current request.</span></span> |
| <span data-ttu-id="1b303-295">ContentTemplate</span><span class="sxs-lookup"><span data-stu-id="1b303-295">ContentTemplate</span></span> | <span data-ttu-id="1b303-296">ITemplate</span><span class="sxs-lookup"><span data-stu-id="1b303-296">ITemplate</span></span> | <span data-ttu-id="1b303-297">取得標記範本更新要求。</span><span class="sxs-lookup"><span data-stu-id="1b303-297">Gets the markup template for the update request.</span></span> |
| <span data-ttu-id="1b303-298">ContentTemplateContainer</span><span class="sxs-lookup"><span data-stu-id="1b303-298">ContentTemplateContainer</span></span> | <span data-ttu-id="1b303-299">控制項</span><span class="sxs-lookup"><span data-stu-id="1b303-299">Control</span></span> | <span data-ttu-id="1b303-300">更新要求中取得的程式設計的範本。</span><span class="sxs-lookup"><span data-stu-id="1b303-300">Gets the programmatic template for the update request.</span></span> |
| <span data-ttu-id="1b303-301">觸發程序</span><span class="sxs-lookup"><span data-stu-id="1b303-301">Triggers</span></span> | <span data-ttu-id="1b303-302">UpdatePanel- TriggerCollection</span><span class="sxs-lookup"><span data-stu-id="1b303-302">UpdatePanel- TriggerCollection</span></span> | <span data-ttu-id="1b303-303">取得與目前的 UpdatePanel 相關聯的觸發程序的清單。</span><span class="sxs-lookup"><span data-stu-id="1b303-303">Gets the list of triggers associated with the current UpdatePanel.</span></span> |

<span data-ttu-id="1b303-304">公用程式碼的方法：</span><span class="sxs-lookup"><span data-stu-id="1b303-304">Public Code Methods:</span></span>

| <span data-ttu-id="1b303-305">**方法名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-305">**Method Name**</span></span> | <span data-ttu-id="1b303-306">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-306">**Type**</span></span> | <span data-ttu-id="1b303-307">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-307">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-308">Update （)</span><span class="sxs-lookup"><span data-stu-id="1b303-308">Update()</span></span> | <span data-ttu-id="1b303-309">Void</span><span class="sxs-lookup"><span data-stu-id="1b303-309">Void</span></span> | <span data-ttu-id="1b303-310">以程式設計方式更新指定的 UpdatePanel。</span><span class="sxs-lookup"><span data-stu-id="1b303-310">Updates the specified UpdatePanel programmatically.</span></span> <span data-ttu-id="1b303-311">可讓伺服器要求來觸發其他未觸發的 UpdatePanel 部分呈現。</span><span class="sxs-lookup"><span data-stu-id="1b303-311">Allows a server request to trigger a partial render of an otherwise-untriggered UpdatePanel.</span></span> |

<span data-ttu-id="1b303-312">標記下階：</span><span class="sxs-lookup"><span data-stu-id="1b303-312">Markup Descendants:</span></span>

| <span data-ttu-id="1b303-313">**標記**</span><span class="sxs-lookup"><span data-stu-id="1b303-313">**Tag**</span></span> | <span data-ttu-id="1b303-314">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-314">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="1b303-315">&lt;ContentTemplate&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-315">&lt;ContentTemplate&gt;</span></span> | <span data-ttu-id="1b303-316">指定要用來呈現部分的轉譯結果的標記。</span><span class="sxs-lookup"><span data-stu-id="1b303-316">Specifies the markup to be used to render the partial rendering result.</span></span> <span data-ttu-id="1b303-317">子系&lt;asp: UpdatePanel&gt;。</span><span class="sxs-lookup"><span data-stu-id="1b303-317">Child of &lt;asp:UpdatePanel&gt;.</span></span> |
| <span data-ttu-id="1b303-318">&lt;觸發程序&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-318">&lt;Triggers&gt;</span></span> | <span data-ttu-id="1b303-319">指定的集合*n*與更新此 UpdatePanel 相關聯的控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-319">Specifies a collection of *n* controls associated with updating this UpdatePanel.</span></span> <span data-ttu-id="1b303-320">子系&lt;asp: UpdatePanel&gt;。</span><span class="sxs-lookup"><span data-stu-id="1b303-320">Child of &lt;asp:UpdatePanel&gt;.</span></span> |
| <span data-ttu-id="1b303-321">&lt;asp:AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-321">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="1b303-322">指定叫用的給定 UpdatePanel 的部分網頁呈現的觸發程序。</span><span class="sxs-lookup"><span data-stu-id="1b303-322">Specifies a trigger that invokes a partial page render for the given UpdatePanel.</span></span> <span data-ttu-id="1b303-323">這可能會或可能不是那麼 UpdatePanel 有問題的子系的控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-323">This may or may not be a control as a descendant of the UpdatePanel in question.</span></span> <span data-ttu-id="1b303-324">細微的事件名稱。子系&lt;觸發程序&gt;。</span><span class="sxs-lookup"><span data-stu-id="1b303-324">Granular to the event name.Child of &lt;Triggers&gt;.</span></span> |
| <span data-ttu-id="1b303-325">&lt;asp:PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-325">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="1b303-326">指定的控制項，會導致整個頁面重新整理。</span><span class="sxs-lookup"><span data-stu-id="1b303-326">Specifies a control that causes the entire page to refresh.</span></span> <span data-ttu-id="1b303-327">這可能會或可能不是那麼 UpdatePanel 有問題的子系的控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-327">This may or may not be a control as a descendant of the UpdatePanel in question.</span></span> <span data-ttu-id="1b303-328">細微的物件。</span><span class="sxs-lookup"><span data-stu-id="1b303-328">Granular to the object.</span></span> <span data-ttu-id="1b303-329">子系&lt;觸發程序&gt;。</span><span class="sxs-lookup"><span data-stu-id="1b303-329">Child of &lt;Triggers&gt;.</span></span> |

<span data-ttu-id="1b303-330">`UpdatePanel`控制項是用來分隔，就需要在 AJAX 擴充功能的部分呈現功能的伺服器端內容控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-330">The `UpdatePanel` control is the control that delimits the server-side content that will take part in the partial rendering functionality of the AJAX Extensions.</span></span> <span data-ttu-id="1b303-331">沒有可以在頁面上，UpdatePanel 控制項數目沒有限制，也可以巢狀。</span><span class="sxs-lookup"><span data-stu-id="1b303-331">There is no limit to the number of UpdatePanel controls that can be on a page, and they can be nested.</span></span> <span data-ttu-id="1b303-332">每個 UpdatePanel 遭到隔離，使每個都可以獨立工作 （您可以有兩個 updatepanel 就相同時間執行呈現不同部分的頁面上，獨立於網頁回傳）。</span><span class="sxs-lookup"><span data-stu-id="1b303-332">Each UpdatePanel is isolated, so that each can work independently (you can have two UpdatePanels running at the same time, rendering different parts of the page, independent of the page's postback).</span></span>

<span data-ttu-id="1b303-333">UpdatePanel 控制主要負責控制觸發程序-根據預設，UpdatePanel 內所含的任何控制項`ContentTemplate`會建立回傳是否註冊為觸發程序中的 UpdatePanel。</span><span class="sxs-lookup"><span data-stu-id="1b303-333">The UpdatePanel control primarily deals with control triggers - by default, any control contained within an UpdatePanel's `ContentTemplate` that creates a postback is registered as a trigger for the UpdatePanel.</span></span> <span data-ttu-id="1b303-334">這表示 UpdatePanel 可以使用使用者控制項 （例如 GridView) 中的預設資料繫結控制項，而且指令碼中編寫程式。</span><span class="sxs-lookup"><span data-stu-id="1b303-334">This means that the UpdatePanel can work with the default data-bound controls (such as the GridView), with user controls, and they can be programmed in script.</span></span>

<span data-ttu-id="1b303-335">根據預設，觸發部分頁面轉譯時，將會重新整理頁面上的所有 UpdatePanel 控制項、 UpdatePanel 控制項定義這類動作的觸發程序。</span><span class="sxs-lookup"><span data-stu-id="1b303-335">By default, when a partial page render is triggered, all UpdatePanel controls on the page will be refreshed, whether or not the UpdatePanel controls defined triggers for such action.</span></span> <span data-ttu-id="1b303-336">例如，如果一個 UpdatePanel 定義按鈕控制項，並按一下該按鈕控制項，依預設會重新整理該頁面上的所有 UpdatePanel 控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-336">For example, if one UpdatePanel defines a Button control, and that Button control is clicked, all UpdatePanel controls on that page will be refreshed by default.</span></span> <span data-ttu-id="1b303-337">這是因為，根據預設， `UpdateMode` UpdatePanel 的屬性設定為`Always`。</span><span class="sxs-lookup"><span data-stu-id="1b303-337">This is because, by default, the `UpdateMode` property of the UpdatePanel is set to `Always`.</span></span> <span data-ttu-id="1b303-338">或者，您可能會在這裡將更新模式屬性設定為`Conditional`，這表示如果叫用特定的觸發程序時，才會重新整理 UpdatePanel。</span><span class="sxs-lookup"><span data-stu-id="1b303-338">Alternatively, you may set the UpdateMode property to `Conditional`, which means that the UpdatePanel will only be refreshed if a specific trigger is hit.</span></span>

## <a name="custom-control-notes"></a><span data-ttu-id="1b303-339">自訂控制項資訊</span><span class="sxs-lookup"><span data-stu-id="1b303-339">Custom Control Notes</span></span>

<span data-ttu-id="1b303-340">UpdatePanel 可以加入至任何使用者控制項或自訂控制項。不過，這些控制項隨附的頁面必須也包含 ScriptManager 控制項與屬性 EnablePartialRendering 設為**true**。</span><span class="sxs-lookup"><span data-stu-id="1b303-340">An UpdatePanel can be added to any user control or custom control; however, the page on which these controls are included must also include a ScriptManager control with the property EnablePartialRendering set to **true**.</span></span>

<span data-ttu-id="1b303-341">其中一種方式，您可能會考慮這時使用 Web 自訂控制項來覆寫的受保護`CreateChildControls()`方法`CompositeControl`類別。</span><span class="sxs-lookup"><span data-stu-id="1b303-341">One way in which you might account for this when using Web Custom Controls is to override the protected `CreateChildControls()` method of the `CompositeControl` class.</span></span> <span data-ttu-id="1b303-342">如此一來，您可以將插入 UpdatePanel 控制項的子系與外界之間如果您判斷該分頁支援部分呈現。否則，您可以只是圖層的子控制項至容器`Control`執行個體。</span><span class="sxs-lookup"><span data-stu-id="1b303-342">By doing so, you can inject an UpdatePanel between the control's children and the outside world if you determine the page supports partial rendering; otherwise, you can simply layer the child controls into a container `Control` instance.</span></span>

## <a name="updatepanel-considerations"></a><span data-ttu-id="1b303-343">UpdatePanel 的考量</span><span class="sxs-lookup"><span data-stu-id="1b303-343">UpdatePanel Considerations</span></span>

<span data-ttu-id="1b303-344">UpdatePanel 的運作方式為黑色方塊的項目內容中的 JavaScript XMLHttpRequest ASP.NET 回傳文繞圖。</span><span class="sxs-lookup"><span data-stu-id="1b303-344">The UpdatePanel operates as something of a black-box, wrapping ASP.NET postbacks within the context of a JavaScript XMLHttpRequest.</span></span> <span data-ttu-id="1b303-345">不過，有顯著的效能考量，務必牢記在心方面的行為和速度。</span><span class="sxs-lookup"><span data-stu-id="1b303-345">However, there are significant performance considerations to bear in mind, both in terms of behavior and speed.</span></span> <span data-ttu-id="1b303-346">若要了解 UpdatePanel 的運作方式，讓您最好能夠決定其用途的適用時機，您應該檢查 AJAX exchange。</span><span class="sxs-lookup"><span data-stu-id="1b303-346">To understand how the UpdatePanel works, so that you can best decide when its use is appropriate, you should examine the AJAX exchange.</span></span> <span data-ttu-id="1b303-347">下列範例會使用現有的站台和、 Mozilla Firefox firebug 這類擴充功能 （firebug 這類擷取 XMLHttpRequest 資料）。</span><span class="sxs-lookup"><span data-stu-id="1b303-347">The following example uses an existing site and, Mozilla Firefox with the Firebug extension (Firebug captures XMLHttpRequest data).</span></span>

<span data-ttu-id="1b303-348">請考慮的表單，以及其他項目，它應該填入表單或控制項上的 city 和 state 欄位郵遞區號文字方塊。</span><span class="sxs-lookup"><span data-stu-id="1b303-348">Consider a form that, among other things, has a postal code textbox which is supposed to populate a city and state field on a form or control.</span></span> <span data-ttu-id="1b303-349">最後，此表單會收集成員資格資訊，包括使用者的名稱、 地址及連絡資訊。</span><span class="sxs-lookup"><span data-stu-id="1b303-349">This form ultimately collects membership information, including a user's name, address, and contact information.</span></span> <span data-ttu-id="1b303-350">有許多的設計考量，若要納入考量，根據特定專案需求。</span><span class="sxs-lookup"><span data-stu-id="1b303-350">There are many design considerations to take into account, based on the requirements of a specific project.</span></span>


[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image11.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image10.png)

<span data-ttu-id="1b303-351">([按一下以檢視完整大小的影像](understanding-partial-page-updates-with-asp-net-ajax/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="1b303-351">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image12.png))</span></span>


[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image14.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image13.png)

<span data-ttu-id="1b303-352">([按一下以檢視完整大小的影像](understanding-partial-page-updates-with-asp-net-ajax/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="1b303-352">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image15.png))</span></span>


<span data-ttu-id="1b303-353">此應用程式的原始反覆項目，在控制項已建置納入使用者的登錄資料，包括郵遞區號、 城市及狀態的全部內容。</span><span class="sxs-lookup"><span data-stu-id="1b303-353">In the original iteration of this application, a control was built that incorporated the entirety of the user registration data, including the postal code, city, and state.</span></span> <span data-ttu-id="1b303-354">整個控制項已包裝在 UpdatePanel，並放到 Web 表單。</span><span class="sxs-lookup"><span data-stu-id="1b303-354">The entire control was wrapped within an UpdatePanel and dropped onto a Web Form.</span></span> <span data-ttu-id="1b303-355">當使用者輸入的郵遞區號時，UpdatePanel 會偵測事件 （中的對應 TextChanged 事件後端，指定觸發程序，或使用 ChildrenAsTriggers 屬性會設為 true）。</span><span class="sxs-lookup"><span data-stu-id="1b303-355">When the postal code is entered by the user, the UpdatePanel detects the event (the corresponding TextChanged event in the back-end, either by specifying triggers or by using the ChildrenAsTriggers property set to true).</span></span> <span data-ttu-id="1b303-356">由 firebug 這類擷取 AJAX 張貼所有 UpdatePanel 內的欄位 （在右側，請參閱圖）。</span><span class="sxs-lookup"><span data-stu-id="1b303-356">AJAX posts all of the fields within the UpdatePanel, as captured by FireBug (see the diagram on the right).</span></span>

<span data-ttu-id="1b303-357">表示螢幕擷取畫面，因為傳遞 UpdatePanel 內的每個控制項中的值 （在此情況下，它們是全部空白），以及檢視狀態欄位。</span><span class="sxs-lookup"><span data-stu-id="1b303-357">As the screen capture indicates, values from every control within the UpdatePanel are delivered (in this case, they are all empty), as well as the ViewState field.</span></span> <span data-ttu-id="1b303-358">所有 told，超過 9 kb 的資料傳送，實際上只有五個位元組的資料需要進行此特定要求時。</span><span class="sxs-lookup"><span data-stu-id="1b303-358">All told, over 9kb of data is sent, when in fact only five bytes of data were needed to make this particular request.</span></span> <span data-ttu-id="1b303-359">回應會更為繁雜： 總共 57 kb 傳送至用戶端，只是為了更新文字和下拉式清單 欄位。</span><span class="sxs-lookup"><span data-stu-id="1b303-359">The response is even more bloated: in total, 57kb is sent to the client, simply to update a text field and a drop-down field.</span></span>

<span data-ttu-id="1b303-360">它也可能是有興趣，請參閱 ASP.NET AJAX 更新展示檔的方式。</span><span class="sxs-lookup"><span data-stu-id="1b303-360">It may also be of interest to see how ASP.NET AJAX updates the presentation.</span></span> <span data-ttu-id="1b303-361">UpdatePanel 更新要求的回應部分會顯示在左邊; firebug 這類主控台顯示它是特別構成管線分隔字串會依用戶端指令碼和重組頁面上。</span><span class="sxs-lookup"><span data-stu-id="1b303-361">The response portion of the UpdatePanel's update request is shown in the Firebug console display on the left; it is a specially-formulated pipe-delimited string that is broken up by the client script and then reassembled on the page.</span></span> <span data-ttu-id="1b303-362">具體而言，ASP.NET AJAX 設定*innerHTML*用戶端，表示您的 UpdatePanel 上 HTML 項目的屬性。</span><span class="sxs-lookup"><span data-stu-id="1b303-362">Specifically, ASP.NET AJAX sets the *innerHTML* property of the HTML element on the client that represents your UpdatePanel.</span></span> <span data-ttu-id="1b303-363">瀏覽器會重新產生 DOM，即沒有稍微延遲，視需要處理的資訊數量而定。</span><span class="sxs-lookup"><span data-stu-id="1b303-363">As the browser re-generates the DOM, there is a slight delay, depending on the amount of information that needs to be processed.</span></span>

<span data-ttu-id="1b303-364">重新產生作業的 DOM 的觸發程序的一些其他問題：</span><span class="sxs-lookup"><span data-stu-id="1b303-364">The regeneration of the DOM triggers a number of additional issues:</span></span>


[![](understanding-partial-page-updates-with-asp-net-ajax/_static/image17.png)](understanding-partial-page-updates-with-asp-net-ajax/_static/image16.png)

<span data-ttu-id="1b303-365">([按一下以檢視完整大小的影像](understanding-partial-page-updates-with-asp-net-ajax/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="1b303-365">([Click to view full-size image](understanding-partial-page-updates-with-asp-net-ajax/_static/image18.png))</span></span>


- <span data-ttu-id="1b303-366">如果在 UpdatePanel 內的焦點的 HTML 項目，就可能會失去焦點。</span><span class="sxs-lookup"><span data-stu-id="1b303-366">If the focused HTML element is within the UpdatePanel, it will lose focus.</span></span> <span data-ttu-id="1b303-367">因此，如果按下 Tab 鍵以結束郵遞區號文字方塊中的使用者，其下一個目的地已經 [縣 （市）] 文字方塊。</span><span class="sxs-lookup"><span data-stu-id="1b303-367">So, for users who pressed the Tab key to exit the postal code text box, their next destination would have been the City text box.</span></span> <span data-ttu-id="1b303-368">不過，一旦 UpdatePanel 重新整理顯示畫面，表單就不再擁有焦點，並按 Tab 鍵已經啟動 （例如連結） 的焦點項目反白顯示。</span><span class="sxs-lookup"><span data-stu-id="1b303-368">However, once the UpdatePanel refreshed the display, the form would no longer have had focus, and pressing Tab would have started highlighting the focus elements (such as links).</span></span>
- <span data-ttu-id="1b303-369">如果任何類型的自訂用戶端指令碼正在使用中，存取 DOM 項目，參考會保存函式可能就會變成無用之後部分回傳。</span><span class="sxs-lookup"><span data-stu-id="1b303-369">If any type of custom client-side script is in use that accesses DOM elements, references persisted by functions may become defunct after a partial postback.</span></span>

<span data-ttu-id="1b303-370">Updatepanel 就不會是所有方案。</span><span class="sxs-lookup"><span data-stu-id="1b303-370">UpdatePanels are not intended to be catch-all solutions.</span></span> <span data-ttu-id="1b303-371">相反地，提供特定狀況，包括建立原型，小型控制更新快速解決方案和 ASP.NET 開發人員可能熟悉.NET 物件模型，但較不因此與 DOM 提供熟悉的介面</span><span class="sxs-lookup"><span data-stu-id="1b303-371">Rather, they provide a quick solution for certain situations, including prototyping, small control updates, and provide a familiar interface to ASP.NET developers who might be familiar with the .NET object model but less-so with the DOM.</span></span> <span data-ttu-id="1b303-372">有幾種方式，可能會導致更好的效能，視應用程式案例而定：</span><span class="sxs-lookup"><span data-stu-id="1b303-372">There are a number of alternatives that may result in better performance, depending on the application scenario:</span></span>

- <span data-ttu-id="1b303-373">請考慮使用 PageMethods 和 JSON （JavaScript 物件標記法） 可讓開發人員，如同叫用 web 服務呼叫，時，叫用網頁上的靜態方法。</span><span class="sxs-lookup"><span data-stu-id="1b303-373">Consider using PageMethods and JSON (JavaScript Object Notation) allows the developer to invoke static methods on a page as if a web service call was being invoked.</span></span> <span data-ttu-id="1b303-374">因為方法是靜態的無狀態是必要的。指令碼呼叫端提供的參數，並以非同步方式傳回結果。</span><span class="sxs-lookup"><span data-stu-id="1b303-374">Because the methods are static, no state is necessary; the script caller supplies the parameters, and the result is returned asynchronously.</span></span>
- <span data-ttu-id="1b303-375">Web 服務和 JSON 如果需要考慮使用單一控制項跨應用程式在幾個地方使用。</span><span class="sxs-lookup"><span data-stu-id="1b303-375">Consider using a Web Service and JSON if a single control needs to be used in several places across an application.</span></span> <span data-ttu-id="1b303-376">這一次需要特殊的工作相當少，並以非同步方式運作。</span><span class="sxs-lookup"><span data-stu-id="1b303-376">This again requires very little special work, and works asynchronously.</span></span>

<span data-ttu-id="1b303-377">將透過 Web 服務或網頁方法的功能有也有其缺點。</span><span class="sxs-lookup"><span data-stu-id="1b303-377">Incorporating functionality through Web Services or Page Methods has drawbacks as well.</span></span> <span data-ttu-id="1b303-378">首先和最重要，ASP.NET 開發人員通常傾向功能的小型元件建置至使用者控制項 （.ascx 檔案）。</span><span class="sxs-lookup"><span data-stu-id="1b303-378">First and foremost, ASP.NET developers typically tend to build small components of functionality into user controls (.ascx files).</span></span> <span data-ttu-id="1b303-379">無法在這些檔案; 裝載網頁方法它們必須裝載在實際的.aspx 網頁類別。</span><span class="sxs-lookup"><span data-stu-id="1b303-379">Page methods cannot be hosted in these files; they must be hosted within the actual .aspx page class.</span></span> <span data-ttu-id="1b303-380">同樣地，web 服務必須裝載在.asmx 類別。</span><span class="sxs-lookup"><span data-stu-id="1b303-380">Web services, similarly, must be hosted within the .asmx class.</span></span> <span data-ttu-id="1b303-381">不同的應用程式，此架構會違反單一的責任原則，在於單一元件的功能現在橫跨兩個或多個實體元件可能會有少量或沒有一致的繫結。</span><span class="sxs-lookup"><span data-stu-id="1b303-381">Depending on the application, this architecture may violate the Single Responsibility Principle, in that the functionality for a single component is now spread across two or more physical components which may have little or no cohesive ties.</span></span>

<span data-ttu-id="1b303-382">最後，如果應用程式需要 updatepanel 就會使用，下列指導方針應該協助疑難排解與維護。</span><span class="sxs-lookup"><span data-stu-id="1b303-382">Finally, if an application requires that UpdatePanels are used, the following guidelines should assist with troubleshooting and maintenance.</span></span>

- <span data-ttu-id="1b303-383">**巢狀 updatepanel 就盡可能，不僅內單位，同時也是跨單位的程式碼。**</span><span class="sxs-lookup"><span data-stu-id="1b303-383">**Nest UpdatePanels as little as possible, not only within-units, but also across units of code.**</span></span> <span data-ttu-id="1b303-384">例如，UpdatePanel 包裝控制項，而該控制項也包含 UpdatePanel，其中包含含有 UpdatePanel 的另一個控制項，在頁面上是跨單位巢狀結構。</span><span class="sxs-lookup"><span data-stu-id="1b303-384">For example, having an UpdatePanel on a Page that wraps a Control, while that Control also contains an UpdatePanel, which contains another Control that contains an UpdatePanel, is cross-unit nesting.</span></span> <span data-ttu-id="1b303-385">這有助於清除保留哪些項目應該重新整理，並且避免子 updatepanel 就未預期的重新整理。</span><span class="sxs-lookup"><span data-stu-id="1b303-385">This helps to keep clear which elements should be refreshing, and prevents unexpected refreshes to child UpdatePanels.</span></span>
- <span data-ttu-id="1b303-386">**保留*ChildrenAsTriggers*屬性設定為 false，而且明確設定 觸發事件。**</span><span class="sxs-lookup"><span data-stu-id="1b303-386">**Keep the *ChildrenAsTriggers* property set to false, and explicitly set triggering events.**</span></span> <span data-ttu-id="1b303-387">利用`<Triggers>`集合更輕鬆的方式，來處理事件，而可能會導致非預期的行為，協助維護工作，並強制開發人員選擇加入的事件。</span><span class="sxs-lookup"><span data-stu-id="1b303-387">Utilizing the `<Triggers>` collection is a much clearer way to handle events, and may prevent unexpected behavior, helping with maintenance tasks and forcing a developer to opt-in for an event.</span></span>
- <span data-ttu-id="1b303-388">**使用可能的最小單位來達成的功能。**</span><span class="sxs-lookup"><span data-stu-id="1b303-388">**Use the smallest possible unit to achieve functionality.**</span></span> <span data-ttu-id="1b303-389">如中所述的 「 郵遞區號 」 服務，包裝討論只有最低限度降低時間伺服器、 總處理，以及用戶端-伺服器交換的使用量，增強效能。</span><span class="sxs-lookup"><span data-stu-id="1b303-389">As noted in the discussion of the postal code service, wrapping only the bare minimum reduces time to the server, total processing, and the footprint of the client-server exchange, enhancing performance.</span></span>

## <a name="the-updateprogress-control"></a><span data-ttu-id="1b303-390">UpdateProgress 控制項</span><span class="sxs-lookup"><span data-stu-id="1b303-390">The UpdateProgress Control</span></span>

## <a name="updateprogress-control-reference"></a><span data-ttu-id="1b303-391">UpdateProgress 控制項參考</span><span class="sxs-lookup"><span data-stu-id="1b303-391">UpdateProgress Control Reference</span></span>

<span data-ttu-id="1b303-392">啟用標記的屬性：</span><span class="sxs-lookup"><span data-stu-id="1b303-392">Markup-Enabled Properties:</span></span>

| <span data-ttu-id="1b303-393">**屬性名稱**</span><span class="sxs-lookup"><span data-stu-id="1b303-393">**Property Name**</span></span> | <span data-ttu-id="1b303-394">**Type**</span><span class="sxs-lookup"><span data-stu-id="1b303-394">**Type**</span></span> | <span data-ttu-id="1b303-395">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-395">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1b303-396">AssociatedUpdate-PanelID</span><span class="sxs-lookup"><span data-stu-id="1b303-396">AssociatedUpdate-PanelID</span></span> | <span data-ttu-id="1b303-397">String</span><span class="sxs-lookup"><span data-stu-id="1b303-397">String</span></span> | <span data-ttu-id="1b303-398">指定此 UpdateProgress 應該報告的 UpdatePanel 的識別碼。</span><span class="sxs-lookup"><span data-stu-id="1b303-398">Specifies the ID of the UpdatePanel that this UpdateProgress should report on.</span></span> |
| <span data-ttu-id="1b303-399">DisplayAfter</span><span class="sxs-lookup"><span data-stu-id="1b303-399">DisplayAfter</span></span> | <span data-ttu-id="1b303-400">Int</span><span class="sxs-lookup"><span data-stu-id="1b303-400">Int</span></span> | <span data-ttu-id="1b303-401">在開始非同步的要求之後，會顯示此控制項之前，請以毫秒為單位指定的逾時。</span><span class="sxs-lookup"><span data-stu-id="1b303-401">Specifies the timeout in milliseconds before this control is displayed after the asynchronous request begins.</span></span> |
| <span data-ttu-id="1b303-402">DynamicLayout</span><span class="sxs-lookup"><span data-stu-id="1b303-402">DynamicLayout</span></span> | <span data-ttu-id="1b303-403">bool</span><span class="sxs-lookup"><span data-stu-id="1b303-403">bool</span></span> | <span data-ttu-id="1b303-404">指定是否要以動態方式呈現進度。</span><span class="sxs-lookup"><span data-stu-id="1b303-404">Specifies whether the progress is rendered dynamically.</span></span> |

<span data-ttu-id="1b303-405">標記下階：</span><span class="sxs-lookup"><span data-stu-id="1b303-405">Markup Descendants:</span></span>

| <span data-ttu-id="1b303-406">**標記**</span><span class="sxs-lookup"><span data-stu-id="1b303-406">**Tag**</span></span> | <span data-ttu-id="1b303-407">**描述**</span><span class="sxs-lookup"><span data-stu-id="1b303-407">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="1b303-408">&lt;ProgressTemplate&gt;</span><span class="sxs-lookup"><span data-stu-id="1b303-408">&lt;ProgressTemplate&gt;</span></span> | <span data-ttu-id="1b303-409">包含設定將與此控制項顯示之內容的控制項範本。</span><span class="sxs-lookup"><span data-stu-id="1b303-409">Contains the control template set for the content that will be displayed with this control.</span></span> |

<span data-ttu-id="1b303-410">UpdateProgress 控制項可讓您的意見來進行必要的工作來傳輸到伺服器時保留您的使用者感興趣的量值。</span><span class="sxs-lookup"><span data-stu-id="1b303-410">The UpdateProgress control gives you a measure of feedback to keep your users' interest while doing the necessary work to transport to the server.</span></span> <span data-ttu-id="1b303-411">這可協助使用者了解，您所做的項目即使它可能不明顯，尤其是大部分使用者可用來重新整理，並查看 [狀態] 列反白顯示的頁面。</span><span class="sxs-lookup"><span data-stu-id="1b303-411">This can help your users know that you're doing something even though it may not be apparent, especially since most users are used to the page refreshing and seeing the status bar highlight.</span></span>

<span data-ttu-id="1b303-412">請注意，為 UpdateProgress 控制項可以出現的任何位置頁面階層上。</span><span class="sxs-lookup"><span data-stu-id="1b303-412">As a note, UpdateProgress controls can appear anywhere on a page hierarchy.</span></span> <span data-ttu-id="1b303-413">不過，在部分回傳起始從子系 UpdatePanel （UpdatePanel 會巢狀另一個 UpdatePanel） 所在的情況下，回傳的觸發程序 UpdatePanel 會導致 UpdateProgress 範本顯示為子系的子系UpdatePanel 以及 UpdatePanel 的父系。</span><span class="sxs-lookup"><span data-stu-id="1b303-413">However, in cases in which a partial postback is initiated from a child UpdatePanel (where an UpdatePanel is nested within another UpdatePanel), postbacks that trigger the child UpdatePanel will cause UpdateProgress templates to be displayed for the child UpdatePanel as well as the parent UpdatePanel.</span></span> <span data-ttu-id="1b303-414">但是，如果觸發程序的直接子系的父系 UpdatePanel，則只有與父代相關聯的 UpdateProgress 範本會顯示。</span><span class="sxs-lookup"><span data-stu-id="1b303-414">But, if the trigger is a direct child of the parent UpdatePanel, then only the UpdateProgress templates associated with the parent will be displayed.</span></span>

## <a name="summary"></a><span data-ttu-id="1b303-415">總結</span><span class="sxs-lookup"><span data-stu-id="1b303-415">Summary</span></span>

<span data-ttu-id="1b303-416">Microsoft ASP.NET AJAX 擴充功能是設計用來協助您讓網頁更容易存取，並提供更豐富的使用者體驗，對您 web 應用程式的高性能的產品。</span><span class="sxs-lookup"><span data-stu-id="1b303-416">The Microsoft ASP.NET AJAX extensions are sophisticated products designed to assist in making web content more accessible and to provide a richer user experience to your web applications.</span></span> <span data-ttu-id="1b303-417">ASP.NET AJAX Extensions 中的部分頁面轉譯控制項，一部分包括 ScriptManager、 UpdatePanel 和 UpdateProgress 控制項是一些最明顯的工具組元件。</span><span class="sxs-lookup"><span data-stu-id="1b303-417">As part of the ASP.NET AJAX Extensions, the partial page rendering controls, including the ScriptManager, the UpdatePanel, and UpdateProgress controls are some of the most visible components of the toolkit.</span></span>

<span data-ttu-id="1b303-418">ScriptManager 元件整合的用戶端 JavaScript 的擴充，佈建，以及可讓不同的伺服器和用戶端元件一起開發的最小投資。</span><span class="sxs-lookup"><span data-stu-id="1b303-418">The ScriptManager component integrates the provision of client JavaScript for the Extensions, as well as enables the various server- and client-side components to work together with minimal development investment.</span></span>

<span data-ttu-id="1b303-419">UpdatePanel 控制項是明顯 magic 方塊-UpdatePanel 中的標記可以有伺服器端程式碼後置並不會觸發頁面重新整理。</span><span class="sxs-lookup"><span data-stu-id="1b303-419">The UpdatePanel control is the apparent magic box - markup within the UpdatePanel can have server-side Codebehind and not trigger a page refresh.</span></span> <span data-ttu-id="1b303-420">UpdatePanel 控制項可以巢狀，而且可以相依於其他 updatepanel 就中的控制項。</span><span class="sxs-lookup"><span data-stu-id="1b303-420">UpdatePanel controls can be nested, and can be dependent on controls in other UpdatePanels.</span></span> <span data-ttu-id="1b303-421">根據預設，updatepanel 就會處理及其子系控制項，來叫用任何回傳，雖然這項功能可以是要更為精確，以宣告方式或以程式設計的方式。</span><span class="sxs-lookup"><span data-stu-id="1b303-421">By default, UpdatePanels handle any postbacks invoked by their descendant controls, although this functionality can be finely tuned, either declaratively or programmatically.</span></span>

<span data-ttu-id="1b303-422">當使用 UpdatePanel 控制項時，開發人員應該留意可能就會發生的效能影響。</span><span class="sxs-lookup"><span data-stu-id="1b303-422">When using the UpdatePanel control, developers should be aware of the performance impact that could potentially arise.</span></span> <span data-ttu-id="1b303-423">可能的替代項目包含 web 服務和頁面的方法，但應視為應用程式的設計。</span><span class="sxs-lookup"><span data-stu-id="1b303-423">Potential alternatives include web services and page methods, though the design of the application should be considered.</span></span>

<span data-ttu-id="1b303-424">UpdateProgress 控制項可讓使用者知道她或他不會被忽略，而幕後作業的要求將要頁面否則不會進行任何動作來回應使用者輸入。</span><span class="sxs-lookup"><span data-stu-id="1b303-424">The UpdateProgress control allows the user to know that she or he is not being ignored, and that the behind-the-scenes request is going on while the page is otherwise not doing anything to respond to the user input.</span></span> <span data-ttu-id="1b303-425">它也包含中止局部呈現結果。</span><span class="sxs-lookup"><span data-stu-id="1b303-425">It also includes the ability to abort partial rendering results.</span></span>

<span data-ttu-id="1b303-426">在一起，這些工具可協助提供豐富、 順暢的使用者體驗的伺服器工作給使用者較不明顯，較不會中斷工作流程。</span><span class="sxs-lookup"><span data-stu-id="1b303-426">Together, these tools assist creating a rich and seamless user experience by making server work less apparent to the user and interrupting workflow less.</span></span>

## <a name="bio"></a><span data-ttu-id="1b303-427">簡歷</span><span class="sxs-lookup"><span data-stu-id="1b303-427">Bio</span></span>

<span data-ttu-id="1b303-428">Scott 是否已從 1997 年使用 Microsoft Web 技術，且 myKB.com 總統 ([www.myKB.com](http://www.myKB.com)) 擅長撰寫 ASP.NET 架構的重點 Knowledge Base 軟體解決方案的應用程式。</span><span class="sxs-lookup"><span data-stu-id="1b303-428">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="1b303-429">透過在電子郵件，即可以聯繫 Scott [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com)或在他的部落格[ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="1b303-429">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="1b303-430">下一步</span><span class="sxs-lookup"><span data-stu-id="1b303-430">Next</span></span>](understanding-asp-net-ajax-updatepanel-triggers.md)
